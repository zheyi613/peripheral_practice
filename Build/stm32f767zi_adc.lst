ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"stm32f767zi_adc.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.pa4_adc1_init,"ax",%progbits
  19              		.align	1
  20              		.global	pa4_adc1_init
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	pa4_adc1_init:
  26              	.LFB0:
  27              		.file 1 "./Src/stm32f767zi_adc.c"
   1:./Src/stm32f767zi_adc.c **** /**
   2:./Src/stm32f767zi_adc.c ****  * @file stm32f767zi_adc.c
   3:./Src/stm32f767zi_adc.c ****  * @author zheyi613 (zheyi880613@gmail.com)
   4:./Src/stm32f767zi_adc.c ****  * @brief adc
   5:./Src/stm32f767zi_adc.c ****  * @date 2022-08-15
   6:./Src/stm32f767zi_adc.c ****  */
   7:./Src/stm32f767zi_adc.c **** 
   8:./Src/stm32f767zi_adc.c **** #include "stm32f767zi_adc.h"
   9:./Src/stm32f767zi_adc.c **** 
  10:./Src/stm32f767zi_adc.c **** void pa4_adc1_init(void)
  11:./Src/stm32f767zi_adc.c **** {
  28              		.loc 1 11 1
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 1, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33 0000 80B4     		push	{r7}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 7, -4
  37 0002 00AF     		add	r7, sp, #0
  38              	.LCFI1:
  39              		.cfi_def_cfa_register 7
  12:./Src/stm32f767zi_adc.c ****         /*      Configure the ADC GPIO pin      */
  13:./Src/stm32f767zi_adc.c ****         // Enable clock access to GPIOA
  14:./Src/stm32f767zi_adc.c ****         RCC->AHB1ENR |= GPIOA_CLE_EN;
  40              		.loc 1 14 22
  41 0004 134B     		ldr	r3, .L2
  42 0006 1B6B     		ldr	r3, [r3, #48]
  43 0008 124A     		ldr	r2, .L2
  44 000a 43F00103 		orr	r3, r3, #1
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s 			page 2


  45 000e 1363     		str	r3, [r2, #48]
  15:./Src/stm32f767zi_adc.c ****         // Set PA4 mode to analog mode
  16:./Src/stm32f767zi_adc.c ****         GPIOA->MODER |= (GPIO_MODE_ANALOG << 8);
  46              		.loc 1 16 22
  47 0010 114B     		ldr	r3, .L2+4
  48 0012 1B68     		ldr	r3, [r3]
  49 0014 104A     		ldr	r2, .L2+4
  50 0016 43F44073 		orr	r3, r3, #768
  51 001a 1360     		str	r3, [r2]
  17:./Src/stm32f767zi_adc.c **** 
  18:./Src/stm32f767zi_adc.c ****         /*      Configure the ADC module        */
  19:./Src/stm32f767zi_adc.c ****         // Enable clock access to the ADC module
  20:./Src/stm32f767zi_adc.c ****         RCC->APB2ENR |= ADC1_CLK_EN;
  52              		.loc 1 20 22
  53 001c 0D4B     		ldr	r3, .L2
  54 001e 5B6C     		ldr	r3, [r3, #68]
  55 0020 0C4A     		ldr	r2, .L2
  56 0022 43F48073 		orr	r3, r3, #256
  57 0026 5364     		str	r3, [r2, #68]
  21:./Src/stm32f767zi_adc.c ****         // Set conversion to continuous
  22:./Src/stm32f767zi_adc.c ****         //ADC1->CR2 |= ADC_CONT;
  23:./Src/stm32f767zi_adc.c ****         // Set sequence length to 1
  24:./Src/stm32f767zi_adc.c ****         ADC1->SQR1 |= ADC_SEQLEN_1;
  58              		.loc 1 24 20
  59 0028 0C4B     		ldr	r3, .L2+8
  60 002a 0C4A     		ldr	r2, .L2+8
  61 002c DB6A     		ldr	r3, [r3, #44]
  62 002e D362     		str	r3, [r2, #44]
  25:./Src/stm32f767zi_adc.c ****         // Set adc channel
  26:./Src/stm32f767zi_adc.c ****         ADC1->SQR3 |= CH4_RANK1;
  63              		.loc 1 26 20
  64 0030 0A4B     		ldr	r3, .L2+8
  65 0032 5B6B     		ldr	r3, [r3, #52]
  66 0034 094A     		ldr	r2, .L2+8
  67 0036 43F00403 		orr	r3, r3, #4
  68 003a 5363     		str	r3, [r2, #52]
  27:./Src/stm32f767zi_adc.c ****         // Enable adc module
  28:./Src/stm32f767zi_adc.c ****         ADC1->CR2 |= ADC_ADON;
  69              		.loc 1 28 19
  70 003c 074B     		ldr	r3, .L2+8
  71 003e 9B68     		ldr	r3, [r3, #8]
  72 0040 064A     		ldr	r2, .L2+8
  73 0042 43F00103 		orr	r3, r3, #1
  74 0046 9360     		str	r3, [r2, #8]
  29:./Src/stm32f767zi_adc.c **** }
  75              		.loc 1 29 1
  76 0048 00BF     		nop
  77 004a BD46     		mov	sp, r7
  78              	.LCFI2:
  79              		.cfi_def_cfa_register 13
  80              		@ sp needed
  81 004c 5DF8047B 		ldr	r7, [sp], #4
  82              	.LCFI3:
  83              		.cfi_restore 7
  84              		.cfi_def_cfa_offset 0
  85 0050 7047     		bx	lr
  86              	.L3:
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s 			page 3


  87 0052 00BF     		.align	2
  88              	.L2:
  89 0054 00380240 		.word	1073887232
  90 0058 00000240 		.word	1073872896
  91 005c 00200140 		.word	1073815552
  92              		.cfi_endproc
  93              	.LFE0:
  95              		.section	.text.adc1_start_conversion,"ax",%progbits
  96              		.align	1
  97              		.global	adc1_start_conversion
  98              		.syntax unified
  99              		.thumb
 100              		.thumb_func
 102              	adc1_start_conversion:
 103              	.LFB1:
  30:./Src/stm32f767zi_adc.c **** 
  31:./Src/stm32f767zi_adc.c **** void adc1_start_conversion(void)
  32:./Src/stm32f767zi_adc.c **** {
 104              		.loc 1 32 1
 105              		.cfi_startproc
 106              		@ args = 0, pretend = 0, frame = 0
 107              		@ frame_needed = 1, uses_anonymous_args = 0
 108              		@ link register save eliminated.
 109 0000 80B4     		push	{r7}
 110              	.LCFI4:
 111              		.cfi_def_cfa_offset 4
 112              		.cfi_offset 7, -4
 113 0002 00AF     		add	r7, sp, #0
 114              	.LCFI5:
 115              		.cfi_def_cfa_register 7
  33:./Src/stm32f767zi_adc.c ****         // Start conversion
  34:./Src/stm32f767zi_adc.c ****         ADC1->CR2 |= ADC_SWSTART;
 116              		.loc 1 34 19
 117 0004 054B     		ldr	r3, .L5
 118 0006 9B68     		ldr	r3, [r3, #8]
 119 0008 044A     		ldr	r2, .L5
 120 000a 43F08043 		orr	r3, r3, #1073741824
 121 000e 9360     		str	r3, [r2, #8]
  35:./Src/stm32f767zi_adc.c **** }
 122              		.loc 1 35 1
 123 0010 00BF     		nop
 124 0012 BD46     		mov	sp, r7
 125              	.LCFI6:
 126              		.cfi_def_cfa_register 13
 127              		@ sp needed
 128 0014 5DF8047B 		ldr	r7, [sp], #4
 129              	.LCFI7:
 130              		.cfi_restore 7
 131              		.cfi_def_cfa_offset 0
 132 0018 7047     		bx	lr
 133              	.L6:
 134 001a 00BF     		.align	2
 135              	.L5:
 136 001c 00200140 		.word	1073815552
 137              		.cfi_endproc
 138              	.LFE1:
 140              		.section	.text.adc1_get_data,"ax",%progbits
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s 			page 4


 141              		.align	1
 142              		.global	adc1_get_data
 143              		.syntax unified
 144              		.thumb
 145              		.thumb_func
 147              	adc1_get_data:
 148              	.LFB2:
  36:./Src/stm32f767zi_adc.c **** 
  37:./Src/stm32f767zi_adc.c **** uint32_t adc1_get_data(void)
  38:./Src/stm32f767zi_adc.c **** {
 149              		.loc 1 38 1
 150              		.cfi_startproc
 151              		@ args = 0, pretend = 0, frame = 0
 152              		@ frame_needed = 1, uses_anonymous_args = 0
 153              		@ link register save eliminated.
 154 0000 80B4     		push	{r7}
 155              	.LCFI8:
 156              		.cfi_def_cfa_offset 4
 157              		.cfi_offset 7, -4
 158 0002 00AF     		add	r7, sp, #0
 159              	.LCFI9:
 160              		.cfi_def_cfa_register 7
  39:./Src/stm32f767zi_adc.c ****         // Wait for End-of-Conversion flag
  40:./Src/stm32f767zi_adc.c ****         while (!(ADC1->SR & ADC_SR_EOC));
 161              		.loc 1 40 15
 162 0004 00BF     		nop
 163              	.L8:
 164              		.loc 1 40 22 discriminator 1
 165 0006 064B     		ldr	r3, .L10
 166 0008 1B68     		ldr	r3, [r3]
 167              		.loc 1 40 27 discriminator 1
 168 000a 03F00203 		and	r3, r3, #2
 169              		.loc 1 40 15 discriminator 1
 170 000e 002B     		cmp	r3, #0
 171 0010 F9D0     		beq	.L8
  41:./Src/stm32f767zi_adc.c ****         // Read results
  42:./Src/stm32f767zi_adc.c ****         return ADC1->DR;
 172              		.loc 1 42 20
 173 0012 034B     		ldr	r3, .L10
 174 0014 DB6C     		ldr	r3, [r3, #76]
  43:./Src/stm32f767zi_adc.c **** }...
 175              		.loc 1 43 1
 176 0016 1846     		mov	r0, r3
 177 0018 BD46     		mov	sp, r7
 178              	.LCFI10:
 179              		.cfi_def_cfa_register 13
 180              		@ sp needed
 181 001a 5DF8047B 		ldr	r7, [sp], #4
 182              	.LCFI11:
 183              		.cfi_restore 7
 184              		.cfi_def_cfa_offset 0
 185 001e 7047     		bx	lr
 186              	.L11:
 187              		.align	2
 188              	.L10:
 189 0020 00200140 		.word	1073815552
 190              		.cfi_endproc
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s 			page 5


 191              	.LFE2:
 193              		.text
 194              	.Letext0:
 195              		.file 2 "e:\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_default_types.h"
 196              		.file 3 "e:\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 197              		.file 4 "./Inc/stm32f767zi_hal.h"
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s 			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 stm32f767zi_adc.c
C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s:19     .text.pa4_adc1_init:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s:25     .text.pa4_adc1_init:00000000 pa4_adc1_init
C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s:89     .text.pa4_adc1_init:00000054 $d
C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s:96     .text.adc1_start_conversion:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s:102    .text.adc1_start_conversion:00000000 adc1_start_conversion
C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s:136    .text.adc1_start_conversion:0000001c $d
C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s:141    .text.adc1_get_data:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s:147    .text.adc1_get_data:00000000 adc1_get_data
C:\Users\DCS_LAB\AppData\Local\Temp\ccOOJO2i.s:189    .text.adc1_get_data:00000020 $d

NO UNDEFINED SYMBOLS
