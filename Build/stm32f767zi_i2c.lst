ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"stm32f767zi_i2c.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.i2c1_master_default_init,"ax",%progbits
  19              		.align	1
  20              		.global	i2c1_master_default_init
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	i2c1_master_default_init:
  26              	.LFB0:
  27              		.file 1 "./Src/stm32f767zi_i2c.c"
   1:./Src/stm32f767zi_i2c.c **** /**
   2:./Src/stm32f767zi_i2c.c ****  * @file stm32f767zi_i2c.c
   3:./Src/stm32f767zi_i2c.c ****  * @author ufo880613@gmail.com (ufo880613@gmail.com)
   4:./Src/stm32f767zi_i2c.c ****  * @brief Inter-intergrated circuit
   5:./Src/stm32f767zi_i2c.c ****  * @date 2022-08-20
   6:./Src/stm32f767zi_i2c.c ****  */
   7:./Src/stm32f767zi_i2c.c **** 
   8:./Src/stm32f767zi_i2c.c **** #include "stm32f767zi_i2c.h"
   9:./Src/stm32f767zi_i2c.c **** 
  10:./Src/stm32f767zi_i2c.c **** static void i2c_set_ownAddress1(I2C_reg_t *I2Cx, uint32_t addr);
  11:./Src/stm32f767zi_i2c.c **** 
  12:./Src/stm32f767zi_i2c.c **** void i2c1_master_default_init(void)
  13:./Src/stm32f767zi_i2c.c **** {
  28              		.loc 1 13 1
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 1, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33 0000 80B4     		push	{r7}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 7, -4
  37 0002 00AF     		add	r7, sp, #0
  38              	.LCFI1:
  39              		.cfi_def_cfa_register 7
  14:./Src/stm32f767zi_i2c.c **** 	/*      Configure SCL/SDA line        */
  15:./Src/stm32f767zi_i2c.c **** 
  16:./Src/stm32f767zi_i2c.c **** 	// Enable clock for GPIOB
  17:./Src/stm32f767zi_i2c.c **** 	RCC->AHB1ENR |= GPIOB_CLK_EN;
  40              		.loc 1 17 15
  41 0004 294B     		ldr	r3, .L2
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 2


  42 0006 1B6B     		ldr	r3, [r3, #48]
  43 0008 284A     		ldr	r2, .L2
  44 000a 43F00203 		orr	r3, r3, #2
  45 000e 1363     		str	r3, [r2, #48]
  18:./Src/stm32f767zi_i2c.c **** 	// Configure PB6(SCL) and PB9(SDA) mode to alternative function
  19:./Src/stm32f767zi_i2c.c **** 	GPIOB->MODER |= GPIO_MODE_ALTFN << (2 * I2C1_SCL_POS);
  46              		.loc 1 19 15
  47 0010 274B     		ldr	r3, .L2+4
  48 0012 1B68     		ldr	r3, [r3]
  49 0014 264A     		ldr	r2, .L2+4
  50 0016 43F40053 		orr	r3, r3, #8192
  51 001a 1360     		str	r3, [r2]
  20:./Src/stm32f767zi_i2c.c **** 	GPIOB->MODER |= GPIO_MODE_ALTFN << (2 * I2C1_SDA_POS);
  52              		.loc 1 20 15
  53 001c 244B     		ldr	r3, .L2+4
  54 001e 1B68     		ldr	r3, [r3]
  55 0020 234A     		ldr	r2, .L2+4
  56 0022 43F40023 		orr	r3, r3, #524288
  57 0026 1360     		str	r3, [r2]
  21:./Src/stm32f767zi_i2c.c **** 	// Select alternate function type as AF4 (I2C1_SCL/I2C1_SDA)
  22:./Src/stm32f767zi_i2c.c **** 	GPIOB->AFR[I2C1_SCL_POS >> 3] |= I2C_AF << (4 * (I2C1_SCL_POS & 0x7U));
  58              		.loc 1 22 32
  59 0028 214B     		ldr	r3, .L2+4
  60 002a 1B6A     		ldr	r3, [r3, #32]
  61 002c 204A     		ldr	r2, .L2+4
  62 002e 43F08063 		orr	r3, r3, #67108864
  63 0032 1362     		str	r3, [r2, #32]
  23:./Src/stm32f767zi_i2c.c **** 	GPIOB->AFR[I2C1_SDA_POS >> 3] |= I2C_AF << (4 * (I2C1_SDA_POS & 0x7U));
  64              		.loc 1 23 32
  65 0034 1E4B     		ldr	r3, .L2+4
  66 0036 5B6A     		ldr	r3, [r3, #36]
  67 0038 1D4A     		ldr	r2, .L2+4
  68 003a 43F04003 		orr	r3, r3, #64
  69 003e 5362     		str	r3, [r2, #36]
  24:./Src/stm32f767zi_i2c.c **** 	// Set pin output type to open-drain
  25:./Src/stm32f767zi_i2c.c **** 	GPIOB->OTYPER |= GPIO_OTYPER_OPEN_DRAIN << I2C1_SCL_POS;
  70              		.loc 1 25 16
  71 0040 1B4B     		ldr	r3, .L2+4
  72 0042 5B68     		ldr	r3, [r3, #4]
  73 0044 1A4A     		ldr	r2, .L2+4
  74 0046 43F04003 		orr	r3, r3, #64
  75 004a 5360     		str	r3, [r2, #4]
  26:./Src/stm32f767zi_i2c.c **** 	GPIOB->OTYPER |= GPIO_OTYPER_OPEN_DRAIN << I2C1_SDA_POS;
  76              		.loc 1 26 16
  77 004c 184B     		ldr	r3, .L2+4
  78 004e 5B68     		ldr	r3, [r3, #4]
  79 0050 174A     		ldr	r2, .L2+4
  80 0052 43F40073 		orr	r3, r3, #512
  81 0056 5360     		str	r3, [r2, #4]
  27:./Src/stm32f767zi_i2c.c **** 	// Enable internal pull-up register
  28:./Src/stm32f767zi_i2c.c **** 	GPIOB->PUPDR |= GPIO_PUPDR_PULL_UP << (2 * I2C1_SCL_POS);
  82              		.loc 1 28 15
  83 0058 154B     		ldr	r3, .L2+4
  84 005a DB68     		ldr	r3, [r3, #12]
  85 005c 144A     		ldr	r2, .L2+4
  86 005e 43F48053 		orr	r3, r3, #4096
  87 0062 D360     		str	r3, [r2, #12]
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 3


  29:./Src/stm32f767zi_i2c.c **** 	GPIOB->PUPDR |= GPIO_PUPDR_PULL_UP << (2 * I2C1_SDA_POS);
  88              		.loc 1 29 15
  89 0064 124B     		ldr	r3, .L2+4
  90 0066 DB68     		ldr	r3, [r3, #12]
  91 0068 114A     		ldr	r2, .L2+4
  92 006a 43F48023 		orr	r3, r3, #262144
  93 006e D360     		str	r3, [r2, #12]
  30:./Src/stm32f767zi_i2c.c **** 
  31:./Src/stm32f767zi_i2c.c **** 	/*        Configure I2C parameters        */
  32:./Src/stm32f767zi_i2c.c **** 
  33:./Src/stm32f767zi_i2c.c **** 	// Enable clock access to the I2C module
  34:./Src/stm32f767zi_i2c.c **** 	RCC->APB1ENR |= I2C1_CLK_EN;
  94              		.loc 1 34 15
  95 0070 0E4B     		ldr	r3, .L2
  96 0072 1B6C     		ldr	r3, [r3, #64]
  97 0074 0D4A     		ldr	r2, .L2
  98 0076 43F40013 		orr	r3, r3, #2097152
  99 007a 1364     		str	r3, [r2, #64]
  35:./Src/stm32f767zi_i2c.c **** 	// Disable I2C module
  36:./Src/stm32f767zi_i2c.c **** 	I2C1->CR1 &= ~I2C_CR1_PE;
 100              		.loc 1 36 12
 101 007c 0D4B     		ldr	r3, .L2+8
 102 007e 1B68     		ldr	r3, [r3]
 103 0080 0C4A     		ldr	r2, .L2+8
 104 0082 23F00103 		bic	r3, r3, #1
 105 0086 1360     		str	r3, [r2]
  37:./Src/stm32f767zi_i2c.c **** 	// Set timing
  38:./Src/stm32f767zi_i2c.c **** 	I2C1->TIMINGR |= I2C_TIMING;
 106              		.loc 1 38 16
 107 0088 0A4B     		ldr	r3, .L2+8
 108 008a 1A69     		ldr	r2, [r3, #16]
 109 008c 0949     		ldr	r1, .L2+8
 110 008e 0A4B     		ldr	r3, .L2+12
 111 0090 1343     		orrs	r3, r3, r2
 112 0092 0B61     		str	r3, [r1, #16]
  39:./Src/stm32f767zi_i2c.c **** 	// Enable I2C module
  40:./Src/stm32f767zi_i2c.c **** 	I2C1->CR1 |= I2C_CR1_PE;
 113              		.loc 1 40 12
 114 0094 074B     		ldr	r3, .L2+8
 115 0096 1B68     		ldr	r3, [r3]
 116 0098 064A     		ldr	r2, .L2+8
 117 009a 43F00103 		orr	r3, r3, #1
 118 009e 1360     		str	r3, [r2]
  41:./Src/stm32f767zi_i2c.c **** }
 119              		.loc 1 41 1
 120 00a0 00BF     		nop
 121 00a2 BD46     		mov	sp, r7
 122              	.LCFI2:
 123              		.cfi_def_cfa_register 13
 124              		@ sp needed
 125 00a4 5DF8047B 		ldr	r7, [sp], #4
 126              	.LCFI3:
 127              		.cfi_restore 7
 128              		.cfi_def_cfa_offset 0
 129 00a8 7047     		bx	lr
 130              	.L3:
 131 00aa 00BF     		.align	2
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 4


 132              	.L2:
 133 00ac 00380240 		.word	1073887232
 134 00b0 00040240 		.word	1073873920
 135 00b4 00540040 		.word	1073763328
 136 00b8 5B3D3000 		.word	3161435
 137              		.cfi_endproc
 138              	.LFE0:
 140              		.section	.text.i2c2_slave_default_init,"ax",%progbits
 141              		.align	1
 142              		.global	i2c2_slave_default_init
 143              		.syntax unified
 144              		.thumb
 145              		.thumb_func
 147              	i2c2_slave_default_init:
 148              	.LFB1:
  42:./Src/stm32f767zi_i2c.c **** 
  43:./Src/stm32f767zi_i2c.c **** void i2c2_slave_default_init(void)
  44:./Src/stm32f767zi_i2c.c **** {
 149              		.loc 1 44 1
 150              		.cfi_startproc
 151              		@ args = 0, pretend = 0, frame = 0
 152              		@ frame_needed = 1, uses_anonymous_args = 0
 153 0000 80B5     		push	{r7, lr}
 154              	.LCFI4:
 155              		.cfi_def_cfa_offset 8
 156              		.cfi_offset 7, -8
 157              		.cfi_offset 14, -4
 158 0002 00AF     		add	r7, sp, #0
 159              	.LCFI5:
 160              		.cfi_def_cfa_register 7
  45:./Src/stm32f767zi_i2c.c **** 	/*        Configure SCL/SDA line        */
  46:./Src/stm32f767zi_i2c.c **** 
  47:./Src/stm32f767zi_i2c.c **** 	// Enable clock for GPIOB
  48:./Src/stm32f767zi_i2c.c **** 	RCC->AHB1ENR |= GPIOB_CLK_EN;
 161              		.loc 1 48 15
 162 0004 344B     		ldr	r3, .L5
 163 0006 1B6B     		ldr	r3, [r3, #48]
 164 0008 334A     		ldr	r2, .L5
 165 000a 43F00203 		orr	r3, r3, #2
 166 000e 1363     		str	r3, [r2, #48]
  49:./Src/stm32f767zi_i2c.c **** 	// Configure PB10(SCL) and PB11(SDA) mode to alternative function
  50:./Src/stm32f767zi_i2c.c **** 	GPIOB->MODER |= GPIO_MODE_ALTFN << (2 * I2C2_SCL_POS);
 167              		.loc 1 50 15
 168 0010 324B     		ldr	r3, .L5+4
 169 0012 1B68     		ldr	r3, [r3]
 170 0014 314A     		ldr	r2, .L5+4
 171 0016 43F40013 		orr	r3, r3, #2097152
 172 001a 1360     		str	r3, [r2]
  51:./Src/stm32f767zi_i2c.c **** 	GPIOB->MODER |= GPIO_MODE_ALTFN << (2 * I2C2_SDA_POS);
 173              		.loc 1 51 15
 174 001c 2F4B     		ldr	r3, .L5+4
 175 001e 1B68     		ldr	r3, [r3]
 176 0020 2E4A     		ldr	r2, .L5+4
 177 0022 43F40003 		orr	r3, r3, #8388608
 178 0026 1360     		str	r3, [r2]
  52:./Src/stm32f767zi_i2c.c **** 	// Select alternate function type as AF4 (I2C2_SCL/I2C_SDA)
  53:./Src/stm32f767zi_i2c.c **** 	GPIOB->AFR[I2C2_SCL_POS >> 3] |= I2C_AF << (4 * (I2C2_SCL_POS & 0x7U));
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 5


 179              		.loc 1 53 32
 180 0028 2C4B     		ldr	r3, .L5+4
 181 002a 5B6A     		ldr	r3, [r3, #36]
 182 002c 2B4A     		ldr	r2, .L5+4
 183 002e 43F48063 		orr	r3, r3, #1024
 184 0032 5362     		str	r3, [r2, #36]
  54:./Src/stm32f767zi_i2c.c **** 	GPIOB->AFR[I2C2_SDA_POS >> 3] |= I2C_AF << (4 * (I2C2_SDA_POS & 0x7U));
 185              		.loc 1 54 32
 186 0034 294B     		ldr	r3, .L5+4
 187 0036 5B6A     		ldr	r3, [r3, #36]
 188 0038 284A     		ldr	r2, .L5+4
 189 003a 43F48043 		orr	r3, r3, #16384
 190 003e 5362     		str	r3, [r2, #36]
  55:./Src/stm32f767zi_i2c.c **** 	// Set pin output type to open-drain
  56:./Src/stm32f767zi_i2c.c **** 	GPIOB->OTYPER |= GPIO_OTYPER_OPEN_DRAIN << I2C2_SCL_POS;
 191              		.loc 1 56 16
 192 0040 264B     		ldr	r3, .L5+4
 193 0042 5B68     		ldr	r3, [r3, #4]
 194 0044 254A     		ldr	r2, .L5+4
 195 0046 43F48063 		orr	r3, r3, #1024
 196 004a 5360     		str	r3, [r2, #4]
  57:./Src/stm32f767zi_i2c.c **** 	GPIOB->OTYPER |= GPIO_OTYPER_OPEN_DRAIN << I2C2_SDA_POS;
 197              		.loc 1 57 16
 198 004c 234B     		ldr	r3, .L5+4
 199 004e 5B68     		ldr	r3, [r3, #4]
 200 0050 224A     		ldr	r2, .L5+4
 201 0052 43F40063 		orr	r3, r3, #2048
 202 0056 5360     		str	r3, [r2, #4]
  58:./Src/stm32f767zi_i2c.c **** 	// Enable internal pull-up register
  59:./Src/stm32f767zi_i2c.c **** 	GPIOB->PUPDR |= GPIO_PUPDR_PULL_UP << (2 * I2C2_SCL_POS);
 203              		.loc 1 59 15
 204 0058 204B     		ldr	r3, .L5+4
 205 005a DB68     		ldr	r3, [r3, #12]
 206 005c 1F4A     		ldr	r2, .L5+4
 207 005e 43F48013 		orr	r3, r3, #1048576
 208 0062 D360     		str	r3, [r2, #12]
  60:./Src/stm32f767zi_i2c.c **** 	GPIOB->PUPDR |= GPIO_PUPDR_PULL_UP << (2 * I2C2_SDA_POS);
 209              		.loc 1 60 15
 210 0064 1D4B     		ldr	r3, .L5+4
 211 0066 DB68     		ldr	r3, [r3, #12]
 212 0068 1C4A     		ldr	r2, .L5+4
 213 006a 43F48003 		orr	r3, r3, #4194304
 214 006e D360     		str	r3, [r2, #12]
  61:./Src/stm32f767zi_i2c.c **** 
  62:./Src/stm32f767zi_i2c.c **** 	/*        Configure I2C parameters        */
  63:./Src/stm32f767zi_i2c.c **** 
  64:./Src/stm32f767zi_i2c.c **** 	// Enable clock access to the I2C module
  65:./Src/stm32f767zi_i2c.c **** 	RCC->APB1ENR |= I2C2_CLK_EN;
 215              		.loc 1 65 15
 216 0070 194B     		ldr	r3, .L5
 217 0072 1B6C     		ldr	r3, [r3, #64]
 218 0074 184A     		ldr	r2, .L5
 219 0076 43F48003 		orr	r3, r3, #4194304
 220 007a 1364     		str	r3, [r2, #64]
  66:./Src/stm32f767zi_i2c.c **** 	// Enable I2c interrupt in the NVIC
  67:./Src/stm32f767zi_i2c.c **** 	NVIC->ISER[(((uint32_t)I2C2_EV_IRQn) >> 5UL)] =
 221              		.loc 1 67 6
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 6


 222 007c 184B     		ldr	r3, .L5+8
 223              		.loc 1 67 48
 224 007e 0222     		movs	r2, #2
 225 0080 5A60     		str	r2, [r3, #4]
  68:./Src/stm32f767zi_i2c.c **** 		(uint32_t)(1UL << (((uint32_t)I2C2_EV_IRQn) & 0x1FUL));
  69:./Src/stm32f767zi_i2c.c **** 	// Disable I2C module
  70:./Src/stm32f767zi_i2c.c **** 	I2C2->CR1 &= ~I2C_CR1_PE;
 226              		.loc 1 70 12
 227 0082 184B     		ldr	r3, .L5+12
 228 0084 1B68     		ldr	r3, [r3]
 229 0086 174A     		ldr	r2, .L5+12
 230 0088 23F00103 		bic	r3, r3, #1
 231 008c 1360     		str	r3, [r2]
  71:./Src/stm32f767zi_i2c.c **** 	// Set device address
  72:./Src/stm32f767zi_i2c.c **** 	i2c_set_ownAddress1(I2C2, I2C_SLAVE_OWN_ADDRESS);
 232              		.loc 1 72 2
 233 008e 2D21     		movs	r1, #45
 234 0090 1448     		ldr	r0, .L5+12
 235 0092 FFF7FEFF 		bl	i2c_set_ownAddress1
  73:./Src/stm32f767zi_i2c.c **** 	// Enable own address 1
  74:./Src/stm32f767zi_i2c.c **** 	I2C2->OAR1 |= I2C_OAR1_OA1EN;
 236              		.loc 1 74 13
 237 0096 134B     		ldr	r3, .L5+12
 238 0098 9B68     		ldr	r3, [r3, #8]
 239 009a 124A     		ldr	r2, .L5+12
 240 009c 43F40043 		orr	r3, r3, #32768
 241 00a0 9360     		str	r3, [r2, #8]
  75:./Src/stm32f767zi_i2c.c **** 	// Enable ADDR interrupt
  76:./Src/stm32f767zi_i2c.c **** 	I2C2->CR1 |= I2C_CR1_ADDRIE;
 242              		.loc 1 76 12
 243 00a2 104B     		ldr	r3, .L5+12
 244 00a4 1B68     		ldr	r3, [r3]
 245 00a6 0F4A     		ldr	r2, .L5+12
 246 00a8 43F00803 		orr	r3, r3, #8
 247 00ac 1360     		str	r3, [r2]
  77:./Src/stm32f767zi_i2c.c **** 	// Enable NACK interrupt
  78:./Src/stm32f767zi_i2c.c **** 	I2C2->CR1 |= I2C_CR1_NACKIE;
 248              		.loc 1 78 12
 249 00ae 0D4B     		ldr	r3, .L5+12
 250 00b0 1B68     		ldr	r3, [r3]
 251 00b2 0C4A     		ldr	r2, .L5+12
 252 00b4 43F01003 		orr	r3, r3, #16
 253 00b8 1360     		str	r3, [r2]
  79:./Src/stm32f767zi_i2c.c **** 	// Enable STOP interrupt
  80:./Src/stm32f767zi_i2c.c **** 	I2C2->CR1 |= I2C_CR1_STOPIE;
 254              		.loc 1 80 12
 255 00ba 0A4B     		ldr	r3, .L5+12
 256 00bc 1B68     		ldr	r3, [r3]
 257 00be 094A     		ldr	r2, .L5+12
 258 00c0 43F02003 		orr	r3, r3, #32
 259 00c4 1360     		str	r3, [r2]
  81:./Src/stm32f767zi_i2c.c **** 	// Enable I2C module
  82:./Src/stm32f767zi_i2c.c **** 	I2C2->CR1 |= I2C_CR1_PE;
 260              		.loc 1 82 12
 261 00c6 074B     		ldr	r3, .L5+12
 262 00c8 1B68     		ldr	r3, [r3]
 263 00ca 064A     		ldr	r2, .L5+12
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 7


 264 00cc 43F00103 		orr	r3, r3, #1
 265 00d0 1360     		str	r3, [r2]
  83:./Src/stm32f767zi_i2c.c **** }
 266              		.loc 1 83 1
 267 00d2 00BF     		nop
 268 00d4 80BD     		pop	{r7, pc}
 269              	.L6:
 270 00d6 00BF     		.align	2
 271              	.L5:
 272 00d8 00380240 		.word	1073887232
 273 00dc 00040240 		.word	1073873920
 274 00e0 00E100E0 		.word	-536813312
 275 00e4 00580040 		.word	1073764352
 276              		.cfi_endproc
 277              	.LFE1:
 279              		.section	.text.i2c_set_ownAddress1,"ax",%progbits
 280              		.align	1
 281              		.syntax unified
 282              		.thumb
 283              		.thumb_func
 285              	i2c_set_ownAddress1:
 286              	.LFB2:
  84:./Src/stm32f767zi_i2c.c **** 
  85:./Src/stm32f767zi_i2c.c **** static void i2c_set_ownAddress1(I2C_reg_t *I2Cx, uint32_t addr)
  86:./Src/stm32f767zi_i2c.c **** {
 287              		.loc 1 86 1
 288              		.cfi_startproc
 289              		@ args = 0, pretend = 0, frame = 8
 290              		@ frame_needed = 1, uses_anonymous_args = 0
 291              		@ link register save eliminated.
 292 0000 80B4     		push	{r7}
 293              	.LCFI6:
 294              		.cfi_def_cfa_offset 4
 295              		.cfi_offset 7, -4
 296 0002 83B0     		sub	sp, sp, #12
 297              	.LCFI7:
 298              		.cfi_def_cfa_offset 16
 299 0004 00AF     		add	r7, sp, #0
 300              	.LCFI8:
 301              		.cfi_def_cfa_register 7
 302 0006 7860     		str	r0, [r7, #4]
 303 0008 3960     		str	r1, [r7]
  87:./Src/stm32f767zi_i2c.c **** 	addr = (addr & ~0x7FU) ? (addr | I2C_OAR1_OA1MODE) : (addr << 1);
 304              		.loc 1 87 15
 305 000a 3B68     		ldr	r3, [r7]
 306 000c 23F07F03 		bic	r3, r3, #127
 307              		.loc 1 87 53
 308 0010 002B     		cmp	r3, #0
 309 0012 03D0     		beq	.L8
 310              		.loc 1 87 53 is_stmt 0 discriminator 1
 311 0014 3B68     		ldr	r3, [r7]
 312 0016 43F48063 		orr	r3, r3, #1024
 313 001a 01E0     		b	.L9
 314              	.L8:
 315              		.loc 1 87 53 discriminator 2
 316 001c 3B68     		ldr	r3, [r7]
 317 001e 5B00     		lsls	r3, r3, #1
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 8


 318              	.L9:
 319              		.loc 1 87 7 is_stmt 1 discriminator 4
 320 0020 3B60     		str	r3, [r7]
  88:./Src/stm32f767zi_i2c.c **** 	MODIFY_REG(I2Cx->OAR1, I2C_OAR1_OA1 | I2C_OAR1_OA1MODE, addr);
 321              		.loc 1 88 2 discriminator 4
 322 0022 7B68     		ldr	r3, [r7, #4]
 323 0024 9A68     		ldr	r2, [r3, #8]
 324 0026 064B     		ldr	r3, .L10
 325 0028 1340     		ands	r3, r3, r2
 326 002a 3A68     		ldr	r2, [r7]
 327 002c 1A43     		orrs	r2, r2, r3
 328 002e 7B68     		ldr	r3, [r7, #4]
 329 0030 9A60     		str	r2, [r3, #8]
  89:./Src/stm32f767zi_i2c.c **** }
 330              		.loc 1 89 1 discriminator 4
 331 0032 00BF     		nop
 332 0034 0C37     		adds	r7, r7, #12
 333              	.LCFI9:
 334              		.cfi_def_cfa_offset 4
 335 0036 BD46     		mov	sp, r7
 336              	.LCFI10:
 337              		.cfi_def_cfa_register 13
 338              		@ sp needed
 339 0038 5DF8047B 		ldr	r7, [sp], #4
 340              	.LCFI11:
 341              		.cfi_restore 7
 342              		.cfi_def_cfa_offset 0
 343 003c 7047     		bx	lr
 344              	.L11:
 345 003e 00BF     		.align	2
 346              	.L10:
 347 0040 01FAFFFF 		.word	-1535
 348              		.cfi_endproc
 349              	.LFE2:
 351              		.section	.text.i2c_get_addr_matchcode,"ax",%progbits
 352              		.align	1
 353              		.global	i2c_get_addr_matchcode
 354              		.syntax unified
 355              		.thumb
 356              		.thumb_func
 358              	i2c_get_addr_matchcode:
 359              	.LFB3:
  90:./Src/stm32f767zi_i2c.c **** 
  91:./Src/stm32f767zi_i2c.c **** uint32_t i2c_get_addr_matchcode(I2C_reg_t *I2Cx)
  92:./Src/stm32f767zi_i2c.c **** {
 360              		.loc 1 92 1
 361              		.cfi_startproc
 362              		@ args = 0, pretend = 0, frame = 8
 363              		@ frame_needed = 1, uses_anonymous_args = 0
 364              		@ link register save eliminated.
 365 0000 80B4     		push	{r7}
 366              	.LCFI12:
 367              		.cfi_def_cfa_offset 4
 368              		.cfi_offset 7, -4
 369 0002 83B0     		sub	sp, sp, #12
 370              	.LCFI13:
 371              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 9


 372 0004 00AF     		add	r7, sp, #0
 373              	.LCFI14:
 374              		.cfi_def_cfa_register 7
 375 0006 7860     		str	r0, [r7, #4]
  93:./Src/stm32f767zi_i2c.c **** 	return (uint32_t)((I2Cx->ISR & I2C_ISR_ADDCODE) >> I2C_ISR_ADDCODE_POS);
 376              		.loc 1 93 25
 377 0008 7B68     		ldr	r3, [r7, #4]
 378 000a 9B69     		ldr	r3, [r3, #24]
 379              		.loc 1 93 9
 380 000c 5B0C     		lsrs	r3, r3, #17
 381 000e 03F07F03 		and	r3, r3, #127
  94:./Src/stm32f767zi_i2c.c **** }
 382              		.loc 1 94 1
 383 0012 1846     		mov	r0, r3
 384 0014 0C37     		adds	r7, r7, #12
 385              	.LCFI15:
 386              		.cfi_def_cfa_offset 4
 387 0016 BD46     		mov	sp, r7
 388              	.LCFI16:
 389              		.cfi_def_cfa_register 13
 390              		@ sp needed
 391 0018 5DF8047B 		ldr	r7, [sp], #4
 392              	.LCFI17:
 393              		.cfi_restore 7
 394              		.cfi_def_cfa_offset 0
 395 001c 7047     		bx	lr
 396              		.cfi_endproc
 397              	.LFE3:
 399              		.section	.text.i2c_write_reg,"ax",%progbits
 400              		.align	1
 401              		.global	i2c_write_reg
 402              		.syntax unified
 403              		.thumb
 404              		.thumb_func
 406              	i2c_write_reg:
 407              	.LFB4:
  95:./Src/stm32f767zi_i2c.c **** 
  96:./Src/stm32f767zi_i2c.c **** void i2c_write_reg(I2C_reg_t *I2Cx, const uint16_t addr, const uint8_t reg,
  97:./Src/stm32f767zi_i2c.c **** 		   const uint8_t size, uint8_t *data)
  98:./Src/stm32f767zi_i2c.c **** {
 408              		.loc 1 98 1
 409              		.cfi_startproc
 410              		@ args = 4, pretend = 0, frame = 8
 411              		@ frame_needed = 1, uses_anonymous_args = 0
 412              		@ link register save eliminated.
 413 0000 80B4     		push	{r7}
 414              	.LCFI18:
 415              		.cfi_def_cfa_offset 4
 416              		.cfi_offset 7, -4
 417 0002 83B0     		sub	sp, sp, #12
 418              	.LCFI19:
 419              		.cfi_def_cfa_offset 16
 420 0004 00AF     		add	r7, sp, #0
 421              	.LCFI20:
 422              		.cfi_def_cfa_register 7
 423 0006 7860     		str	r0, [r7, #4]
 424 0008 0846     		mov	r0, r1
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 10


 425 000a 1146     		mov	r1, r2
 426 000c 1A46     		mov	r2, r3
 427 000e 0346     		mov	r3, r0	@ movhi
 428 0010 7B80     		strh	r3, [r7, #2]	@ movhi
 429 0012 0B46     		mov	r3, r1
 430 0014 7B70     		strb	r3, [r7, #1]
 431 0016 1346     		mov	r3, r2
 432 0018 3B70     		strb	r3, [r7]
  99:./Src/stm32f767zi_i2c.c **** 	// Clear CR2
 100:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 &= 0U;
 433              		.loc 1 100 12
 434 001a 7B68     		ldr	r3, [r7, #4]
 435 001c 5B68     		ldr	r3, [r3, #4]
 436 001e 7B68     		ldr	r3, [r7, #4]
 437 0020 0022     		movs	r2, #0
 438 0022 5A60     		str	r2, [r3, #4]
 101:./Src/stm32f767zi_i2c.c **** 	// Set slave address
 102:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= (addr & ~0x7FU) ? (addr | I2C_CR2_ADD10) : (addr << 1);
 439              		.loc 1 102 12
 440 0024 7B68     		ldr	r3, [r7, #4]
 441 0026 5B68     		ldr	r3, [r3, #4]
 442              		.loc 1 102 21
 443 0028 7A88     		ldrh	r2, [r7, #2]
 444 002a 22F07F02 		bic	r2, r2, #127
 445              		.loc 1 102 56
 446 002e 002A     		cmp	r2, #0
 447 0030 04D0     		beq	.L15
 448              		.loc 1 102 56 is_stmt 0 discriminator 1
 449 0032 7A88     		ldrh	r2, [r7, #2]	@ movhi
 450 0034 42F40062 		orr	r2, r2, #2048
 451 0038 92B2     		uxth	r2, r2
 452 003a 01E0     		b	.L16
 453              	.L15:
 454              		.loc 1 102 64 is_stmt 1 discriminator 2
 455 003c 7A88     		ldrh	r2, [r7, #2]
 456 003e 5200     		lsls	r2, r2, #1
 457              	.L16:
 458              		.loc 1 102 12 discriminator 4
 459 0040 1A43     		orrs	r2, r2, r3
 460 0042 7B68     		ldr	r3, [r7, #4]
 461 0044 5A60     		str	r2, [r3, #4]
 103:./Src/stm32f767zi_i2c.c **** 	// Set transfer size
 104:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= (1 + (uint8_t)size) << I2C_CR2_NBYTES_POS;
 462              		.loc 1 104 12 discriminator 4
 463 0046 7B68     		ldr	r3, [r7, #4]
 464 0048 5B68     		ldr	r3, [r3, #4]
 465              		.loc 1 104 20 discriminator 4
 466 004a 3A78     		ldrb	r2, [r7]	@ zero_extendqisi2
 467              		.loc 1 104 18 discriminator 4
 468 004c 0132     		adds	r2, r2, #1
 469              		.loc 1 104 35 discriminator 4
 470 004e 1204     		lsls	r2, r2, #16
 471              		.loc 1 104 12 discriminator 4
 472 0050 1A43     		orrs	r2, r2, r3
 473 0052 7B68     		ldr	r3, [r7, #4]
 474 0054 5A60     		str	r2, [r3, #4]
 105:./Src/stm32f767zi_i2c.c **** 	// Set automatic end mode
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 11


 106:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= I2C_CR2_AUTOEND;
 475              		.loc 1 106 12 discriminator 4
 476 0056 7B68     		ldr	r3, [r7, #4]
 477 0058 5B68     		ldr	r3, [r3, #4]
 478 005a 43F00072 		orr	r2, r3, #33554432
 479 005e 7B68     		ldr	r3, [r7, #4]
 480 0060 5A60     		str	r2, [r3, #4]
 107:./Src/stm32f767zi_i2c.c **** 	// Set data transmit register before start
 108:./Src/stm32f767zi_i2c.c **** 	I2Cx->TXDR = reg;
 481              		.loc 1 108 13 discriminator 4
 482 0062 7A78     		ldrb	r2, [r7, #1]	@ zero_extendqisi2
 483 0064 7B68     		ldr	r3, [r7, #4]
 484 0066 9A62     		str	r2, [r3, #40]
 109:./Src/stm32f767zi_i2c.c **** 	// Generate start condition
 110:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= I2C_CR2_START;
 485              		.loc 1 110 12 discriminator 4
 486 0068 7B68     		ldr	r3, [r7, #4]
 487 006a 5B68     		ldr	r3, [r3, #4]
 488 006c 43F40052 		orr	r2, r3, #8192
 489 0070 7B68     		ldr	r3, [r7, #4]
 490 0072 5A60     		str	r2, [r3, #4]
 111:./Src/stm32f767zi_i2c.c **** 	// Loop until STOP flag is raised
 112:./Src/stm32f767zi_i2c.c **** 	while (!(I2Cx->ISR & I2C_ISR_STOPF)) {
 491              		.loc 1 112 8 discriminator 4
 492 0074 0CE0     		b	.L17
 493              	.L18:
 113:./Src/stm32f767zi_i2c.c **** 		// check TXIS flag value in ISR register
 114:./Src/stm32f767zi_i2c.c **** 		if (I2Cx->ISR & I2C_ISR_TXIS)
 494              		.loc 1 114 11
 495 0076 7B68     		ldr	r3, [r7, #4]
 496 0078 9B69     		ldr	r3, [r3, #24]
 497              		.loc 1 114 17
 498 007a 03F00203 		and	r3, r3, #2
 499              		.loc 1 114 6
 500 007e 002B     		cmp	r3, #0
 501 0080 06D0     		beq	.L17
 115:./Src/stm32f767zi_i2c.c **** 			I2Cx->TXDR = *(data++);
 502              		.loc 1 115 23
 503 0082 3B69     		ldr	r3, [r7, #16]
 504 0084 5A1C     		adds	r2, r3, #1
 505 0086 3A61     		str	r2, [r7, #16]
 506              		.loc 1 115 17
 507 0088 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 508 008a 1A46     		mov	r2, r3
 509              		.loc 1 115 15
 510 008c 7B68     		ldr	r3, [r7, #4]
 511 008e 9A62     		str	r2, [r3, #40]
 512              	.L17:
 112:./Src/stm32f767zi_i2c.c **** 		// check TXIS flag value in ISR register
 513              		.loc 1 112 15
 514 0090 7B68     		ldr	r3, [r7, #4]
 515 0092 9B69     		ldr	r3, [r3, #24]
 112:./Src/stm32f767zi_i2c.c **** 		// check TXIS flag value in ISR register
 516              		.loc 1 112 21
 517 0094 03F02003 		and	r3, r3, #32
 112:./Src/stm32f767zi_i2c.c **** 		// check TXIS flag value in ISR register
 518              		.loc 1 112 8
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 12


 519 0098 002B     		cmp	r3, #0
 520 009a ECD0     		beq	.L18
 116:./Src/stm32f767zi_i2c.c **** 	}
 117:./Src/stm32f767zi_i2c.c **** 	// Clear stop flag
 118:./Src/stm32f767zi_i2c.c **** 	I2C1->ICR |= I2C_ICR_STOPCF;
 521              		.loc 1 118 12
 522 009c 054B     		ldr	r3, .L19
 523 009e DB69     		ldr	r3, [r3, #28]
 524 00a0 044A     		ldr	r2, .L19
 525 00a2 43F02003 		orr	r3, r3, #32
 526 00a6 D361     		str	r3, [r2, #28]
 119:./Src/stm32f767zi_i2c.c **** }
 527              		.loc 1 119 1
 528 00a8 00BF     		nop
 529 00aa 0C37     		adds	r7, r7, #12
 530              	.LCFI21:
 531              		.cfi_def_cfa_offset 4
 532 00ac BD46     		mov	sp, r7
 533              	.LCFI22:
 534              		.cfi_def_cfa_register 13
 535              		@ sp needed
 536 00ae 5DF8047B 		ldr	r7, [sp], #4
 537              	.LCFI23:
 538              		.cfi_restore 7
 539              		.cfi_def_cfa_offset 0
 540 00b2 7047     		bx	lr
 541              	.L20:
 542              		.align	2
 543              	.L19:
 544 00b4 00540040 		.word	1073763328
 545              		.cfi_endproc
 546              	.LFE4:
 548              		.section	.text.i2c_read_reg,"ax",%progbits
 549              		.align	1
 550              		.global	i2c_read_reg
 551              		.syntax unified
 552              		.thumb
 553              		.thumb_func
 555              	i2c_read_reg:
 556              	.LFB5:
 120:./Src/stm32f767zi_i2c.c **** 
 121:./Src/stm32f767zi_i2c.c **** void i2c_read_reg(I2C_reg_t *I2Cx, const uint16_t addr, const uint8_t reg,
 122:./Src/stm32f767zi_i2c.c **** 		  const uint8_t size, uint8_t *data)
 123:./Src/stm32f767zi_i2c.c **** {
 557              		.loc 1 123 1
 558              		.cfi_startproc
 559              		@ args = 4, pretend = 0, frame = 8
 560              		@ frame_needed = 1, uses_anonymous_args = 0
 561              		@ link register save eliminated.
 562 0000 80B4     		push	{r7}
 563              	.LCFI24:
 564              		.cfi_def_cfa_offset 4
 565              		.cfi_offset 7, -4
 566 0002 83B0     		sub	sp, sp, #12
 567              	.LCFI25:
 568              		.cfi_def_cfa_offset 16
 569 0004 00AF     		add	r7, sp, #0
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 13


 570              	.LCFI26:
 571              		.cfi_def_cfa_register 7
 572 0006 7860     		str	r0, [r7, #4]
 573 0008 0846     		mov	r0, r1
 574 000a 1146     		mov	r1, r2
 575 000c 1A46     		mov	r2, r3
 576 000e 0346     		mov	r3, r0	@ movhi
 577 0010 7B80     		strh	r3, [r7, #2]	@ movhi
 578 0012 0B46     		mov	r3, r1
 579 0014 7B70     		strb	r3, [r7, #1]
 580 0016 1346     		mov	r3, r2
 581 0018 3B70     		strb	r3, [r7]
 124:./Src/stm32f767zi_i2c.c **** 	// Clear CR2
 125:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 &= 0U;
 582              		.loc 1 125 12
 583 001a 7B68     		ldr	r3, [r7, #4]
 584 001c 5B68     		ldr	r3, [r3, #4]
 585 001e 7B68     		ldr	r3, [r7, #4]
 586 0020 0022     		movs	r2, #0
 587 0022 5A60     		str	r2, [r3, #4]
 126:./Src/stm32f767zi_i2c.c **** 	// Set slave address
 127:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= (addr & ~0x7FU) ? (addr | I2C_CR2_ADD10) : (addr << 1);
 588              		.loc 1 127 12
 589 0024 7B68     		ldr	r3, [r7, #4]
 590 0026 5B68     		ldr	r3, [r3, #4]
 591              		.loc 1 127 21
 592 0028 7A88     		ldrh	r2, [r7, #2]
 593 002a 22F07F02 		bic	r2, r2, #127
 594              		.loc 1 127 56
 595 002e 002A     		cmp	r2, #0
 596 0030 04D0     		beq	.L22
 597              		.loc 1 127 56 is_stmt 0 discriminator 1
 598 0032 7A88     		ldrh	r2, [r7, #2]	@ movhi
 599 0034 42F40062 		orr	r2, r2, #2048
 600 0038 92B2     		uxth	r2, r2
 601 003a 01E0     		b	.L23
 602              	.L22:
 603              		.loc 1 127 64 is_stmt 1 discriminator 2
 604 003c 7A88     		ldrh	r2, [r7, #2]
 605 003e 5200     		lsls	r2, r2, #1
 606              	.L23:
 607              		.loc 1 127 12 discriminator 4
 608 0040 1A43     		orrs	r2, r2, r3
 609 0042 7B68     		ldr	r3, [r7, #4]
 610 0044 5A60     		str	r2, [r3, #4]
 128:./Src/stm32f767zi_i2c.c **** 
 129:./Src/stm32f767zi_i2c.c **** 	/*        Transmit register address        */
 130:./Src/stm32f767zi_i2c.c **** 
 131:./Src/stm32f767zi_i2c.c **** 	// Set transfer size (first transmit only register address)
 132:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= 1 << I2C_CR2_NBYTES_POS;
 611              		.loc 1 132 12 discriminator 4
 612 0046 7B68     		ldr	r3, [r7, #4]
 613 0048 5B68     		ldr	r3, [r3, #4]
 614 004a 43F48032 		orr	r2, r3, #65536
 615 004e 7B68     		ldr	r3, [r7, #4]
 616 0050 5A60     		str	r2, [r3, #4]
 133:./Src/stm32f767zi_i2c.c **** 	// Set data transmit register before start
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 14


 134:./Src/stm32f767zi_i2c.c **** 	I2Cx->TXDR = reg;
 617              		.loc 1 134 13 discriminator 4
 618 0052 7A78     		ldrb	r2, [r7, #1]	@ zero_extendqisi2
 619 0054 7B68     		ldr	r3, [r7, #4]
 620 0056 9A62     		str	r2, [r3, #40]
 135:./Src/stm32f767zi_i2c.c **** 	// Generate start condition
 136:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= I2C_CR2_START;
 621              		.loc 1 136 12 discriminator 4
 622 0058 7B68     		ldr	r3, [r7, #4]
 623 005a 5B68     		ldr	r3, [r3, #4]
 624 005c 43F40052 		orr	r2, r3, #8192
 625 0060 7B68     		ldr	r3, [r7, #4]
 626 0062 5A60     		str	r2, [r3, #4]
 137:./Src/stm32f767zi_i2c.c **** 	// Loop until TC flag is raised
 138:./Src/stm32f767zi_i2c.c **** 	while (!(I2Cx->ISR & I2C_ISR_TC))
 627              		.loc 1 138 8 discriminator 4
 628 0064 00BF     		nop
 629              	.L24:
 630              		.loc 1 138 15 discriminator 1
 631 0066 7B68     		ldr	r3, [r7, #4]
 632 0068 9B69     		ldr	r3, [r3, #24]
 633              		.loc 1 138 21 discriminator 1
 634 006a 03F04003 		and	r3, r3, #64
 635              		.loc 1 138 8 discriminator 1
 636 006e 002B     		cmp	r3, #0
 637 0070 F9D0     		beq	.L24
 139:./Src/stm32f767zi_i2c.c **** 		;
 140:./Src/stm32f767zi_i2c.c **** 
 141:./Src/stm32f767zi_i2c.c **** 	/*        Receive data        */
 142:./Src/stm32f767zi_i2c.c **** 
 143:./Src/stm32f767zi_i2c.c **** 	// Set transfer direction to read
 144:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= I2C_CR2_RD_WRN;
 638              		.loc 1 144 12
 639 0072 7B68     		ldr	r3, [r7, #4]
 640 0074 5B68     		ldr	r3, [r3, #4]
 641 0076 43F48062 		orr	r2, r3, #1024
 642 007a 7B68     		ldr	r3, [r7, #4]
 643 007c 5A60     		str	r2, [r3, #4]
 145:./Src/stm32f767zi_i2c.c **** 	// Set receive size
 146:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 &= ~I2C_CR2_NBYTES_MASK;
 644              		.loc 1 146 12
 645 007e 7B68     		ldr	r3, [r7, #4]
 646 0080 5B68     		ldr	r3, [r3, #4]
 647 0082 23F47022 		bic	r2, r3, #983040
 648 0086 7B68     		ldr	r3, [r7, #4]
 649 0088 5A60     		str	r2, [r3, #4]
 147:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= (uint8_t)size << I2C_CR2_NBYTES_POS;
 650              		.loc 1 147 12
 651 008a 7B68     		ldr	r3, [r7, #4]
 652 008c 5B68     		ldr	r3, [r3, #4]
 653              		.loc 1 147 15
 654 008e 3A78     		ldrb	r2, [r7]	@ zero_extendqisi2
 655              		.loc 1 147 29
 656 0090 1204     		lsls	r2, r2, #16
 657              		.loc 1 147 12
 658 0092 1A43     		orrs	r2, r2, r3
 659 0094 7B68     		ldr	r3, [r7, #4]
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 15


 660 0096 5A60     		str	r2, [r3, #4]
 148:./Src/stm32f767zi_i2c.c **** 	// Generate start condition
 149:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= I2C_CR2_START;
 661              		.loc 1 149 12
 662 0098 7B68     		ldr	r3, [r7, #4]
 663 009a 5B68     		ldr	r3, [r3, #4]
 664 009c 43F40052 		orr	r2, r3, #8192
 665 00a0 7B68     		ldr	r3, [r7, #4]
 666 00a2 5A60     		str	r2, [r3, #4]
 150:./Src/stm32f767zi_i2c.c **** 	while (!(I2Cx->ISR & I2C_ISR_TC)) {
 667              		.loc 1 150 8
 668 00a4 0CE0     		b	.L25
 669              	.L26:
 151:./Src/stm32f767zi_i2c.c **** 		if (I2Cx->ISR & I2C_ISR_RXNE)
 670              		.loc 1 151 11
 671 00a6 7B68     		ldr	r3, [r7, #4]
 672 00a8 9B69     		ldr	r3, [r3, #24]
 673              		.loc 1 151 17
 674 00aa 03F00403 		and	r3, r3, #4
 675              		.loc 1 151 6
 676 00ae 002B     		cmp	r3, #0
 677 00b0 06D0     		beq	.L25
 152:./Src/stm32f767zi_i2c.c **** 			*(data++) = I2Cx->RXDR;
 678              		.loc 1 152 20
 679 00b2 7B68     		ldr	r3, [r7, #4]
 680 00b4 596A     		ldr	r1, [r3, #36]
 681              		.loc 1 152 10
 682 00b6 3B69     		ldr	r3, [r7, #16]
 683 00b8 5A1C     		adds	r2, r3, #1
 684 00ba 3A61     		str	r2, [r7, #16]
 685              		.loc 1 152 14
 686 00bc CAB2     		uxtb	r2, r1
 687 00be 1A70     		strb	r2, [r3]
 688              	.L25:
 150:./Src/stm32f767zi_i2c.c **** 	while (!(I2Cx->ISR & I2C_ISR_TC)) {
 689              		.loc 1 150 15
 690 00c0 7B68     		ldr	r3, [r7, #4]
 691 00c2 9B69     		ldr	r3, [r3, #24]
 150:./Src/stm32f767zi_i2c.c **** 	while (!(I2Cx->ISR & I2C_ISR_TC)) {
 692              		.loc 1 150 21
 693 00c4 03F04003 		and	r3, r3, #64
 150:./Src/stm32f767zi_i2c.c **** 	while (!(I2Cx->ISR & I2C_ISR_TC)) {
 694              		.loc 1 150 8
 695 00c8 002B     		cmp	r3, #0
 696 00ca ECD0     		beq	.L26
 153:./Src/stm32f767zi_i2c.c **** 	}
 154:./Src/stm32f767zi_i2c.c **** 	// Set stop condition
 155:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= I2C_CR2_STOP;
 697              		.loc 1 155 12
 698 00cc 7B68     		ldr	r3, [r7, #4]
 699 00ce 5B68     		ldr	r3, [r3, #4]
 700 00d0 43F48042 		orr	r2, r3, #16384
 701 00d4 7B68     		ldr	r3, [r7, #4]
 702 00d6 5A60     		str	r2, [r3, #4]
 156:./Src/stm32f767zi_i2c.c **** 	// Clear stop flag
 157:./Src/stm32f767zi_i2c.c **** 	I2C1->ICR |= I2C_ICR_STOPCF;
 703              		.loc 1 157 12
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 16


 704 00d8 054B     		ldr	r3, .L27
 705 00da DB69     		ldr	r3, [r3, #28]
 706 00dc 044A     		ldr	r2, .L27
 707 00de 43F02003 		orr	r3, r3, #32
 708 00e2 D361     		str	r3, [r2, #28]
 158:./Src/stm32f767zi_i2c.c **** }...
 709              		.loc 1 158 1
 710 00e4 00BF     		nop
 711 00e6 0C37     		adds	r7, r7, #12
 712              	.LCFI27:
 713              		.cfi_def_cfa_offset 4
 714 00e8 BD46     		mov	sp, r7
 715              	.LCFI28:
 716              		.cfi_def_cfa_register 13
 717              		@ sp needed
 718 00ea 5DF8047B 		ldr	r7, [sp], #4
 719              	.LCFI29:
 720              		.cfi_restore 7
 721              		.cfi_def_cfa_offset 0
 722 00ee 7047     		bx	lr
 723              	.L28:
 724              		.align	2
 725              	.L27:
 726 00f0 00540040 		.word	1073763328
 727              		.cfi_endproc
 728              	.LFE5:
 730              		.text
 731              	.Letext0:
 732              		.file 2 "d:\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_default_types.h"
 733              		.file 3 "d:\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 734              		.file 4 "./Inc/stm32f767zi_hal.h"
ARM GAS  C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s 			page 17


DEFINED SYMBOLS
                            *ABS*:00000000 stm32f767zi_i2c.c
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:19     .text.i2c1_master_default_init:00000000 $t
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:25     .text.i2c1_master_default_init:00000000 i2c1_master_default_init
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:133    .text.i2c1_master_default_init:000000ac $d
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:141    .text.i2c2_slave_default_init:00000000 $t
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:147    .text.i2c2_slave_default_init:00000000 i2c2_slave_default_init
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:285    .text.i2c_set_ownAddress1:00000000 i2c_set_ownAddress1
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:272    .text.i2c2_slave_default_init:000000d8 $d
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:280    .text.i2c_set_ownAddress1:00000000 $t
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:347    .text.i2c_set_ownAddress1:00000040 $d
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:352    .text.i2c_get_addr_matchcode:00000000 $t
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:358    .text.i2c_get_addr_matchcode:00000000 i2c_get_addr_matchcode
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:400    .text.i2c_write_reg:00000000 $t
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:406    .text.i2c_write_reg:00000000 i2c_write_reg
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:544    .text.i2c_write_reg:000000b4 $d
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:549    .text.i2c_read_reg:00000000 $t
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:555    .text.i2c_read_reg:00000000 i2c_read_reg
C:\Users\LINZHE~1\AppData\Local\Temp\cc6cfEtz.s:726    .text.i2c_read_reg:000000f0 $d

NO UNDEFINED SYMBOLS
