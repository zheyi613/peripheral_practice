ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"stm32f767zi_i2c.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.i2c1_master_default_init,"ax",%progbits
  18              		.align	1
  19              		.global	i2c1_master_default_init
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	i2c1_master_default_init:
  25              	.LFB0:
  26              		.file 1 "./Src/stm32f767zi_i2c.c"
   1:./Src/stm32f767zi_i2c.c **** /**
   2:./Src/stm32f767zi_i2c.c ****  * @file stm32f767zi_i2c.c
   3:./Src/stm32f767zi_i2c.c ****  * @author ufo880613@gmail.com (ufo880613@gmail.com)
   4:./Src/stm32f767zi_i2c.c ****  * @brief Inter-intergrated circuit
   5:./Src/stm32f767zi_i2c.c ****  * @date 2022-08-20
   6:./Src/stm32f767zi_i2c.c ****  */
   7:./Src/stm32f767zi_i2c.c **** 
   8:./Src/stm32f767zi_i2c.c **** #include "stm32f767zi_i2c.h"
   9:./Src/stm32f767zi_i2c.c **** 
  10:./Src/stm32f767zi_i2c.c **** static void i2c_set_ownAddress1(I2C_reg_t *I2Cx, uint32_t address);
  11:./Src/stm32f767zi_i2c.c **** 
  12:./Src/stm32f767zi_i2c.c **** void i2c1_master_default_init(void)
  13:./Src/stm32f767zi_i2c.c **** {
  27              		.loc 1 13 1
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 1, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32 0000 80B4     		push	{r7}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 4
  35              		.cfi_offset 7, -4
  36 0002 00AF     		add	r7, sp, #0
  37              	.LCFI1:
  38              		.cfi_def_cfa_register 7
  14:./Src/stm32f767zi_i2c.c **** 	/*      Configure SCL/SDA line        */
  15:./Src/stm32f767zi_i2c.c **** 
  16:./Src/stm32f767zi_i2c.c **** 	// Enable clock for GPIOB
  17:./Src/stm32f767zi_i2c.c **** 	RCC->AHB1ENR |= GPIOB_CLK_EN;
  39              		.loc 1 17 15
  40 0004 284B     		ldr	r3, .L2
  41 0006 1B6B     		ldr	r3, [r3, #48]
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 2


  42 0008 274A     		ldr	r2, .L2
  43 000a 43F00203 		orr	r3, r3, #2
  44 000e 1363     		str	r3, [r2, #48]
  18:./Src/stm32f767zi_i2c.c **** 	// Configure PB6(SCL) and PB9(SDA) mode to alternative function
  19:./Src/stm32f767zi_i2c.c **** 	GPIOB->MODER |= GPIO_MODE_ALTFN << (2 * I2C1_SCL_POS);
  45              		.loc 1 19 15
  46 0010 264B     		ldr	r3, .L2+4
  47 0012 1B68     		ldr	r3, [r3]
  48 0014 254A     		ldr	r2, .L2+4
  49 0016 43F40053 		orr	r3, r3, #8192
  50 001a 1360     		str	r3, [r2]
  20:./Src/stm32f767zi_i2c.c **** 	GPIOB->MODER |= GPIO_MODE_ALTFN << (2 * I2C1_SDA_POS);
  51              		.loc 1 20 15
  52 001c 234B     		ldr	r3, .L2+4
  53 001e 1B68     		ldr	r3, [r3]
  54 0020 224A     		ldr	r2, .L2+4
  55 0022 43F40023 		orr	r3, r3, #524288
  56 0026 1360     		str	r3, [r2]
  21:./Src/stm32f767zi_i2c.c **** 	// Select alternate function type as AF4 (I2C1_SCL/I2C1_SDA)
  22:./Src/stm32f767zi_i2c.c **** 	GPIOB->AFR[I2C1_SCL_POS >> 3] |= I2C_AF << (4 * (I2C1_SCL_POS & 0x7U));
  57              		.loc 1 22 32
  58 0028 204B     		ldr	r3, .L2+4
  59 002a 1B6A     		ldr	r3, [r3, #32]
  60 002c 1F4A     		ldr	r2, .L2+4
  61 002e 43F08063 		orr	r3, r3, #67108864
  62 0032 1362     		str	r3, [r2, #32]
  23:./Src/stm32f767zi_i2c.c **** 	GPIOB->AFR[I2C1_SDA_POS >> 3] |= I2C_AF << (4 * (I2C1_SDA_POS & 0x7U));
  63              		.loc 1 23 32
  64 0034 1D4B     		ldr	r3, .L2+4
  65 0036 5B6A     		ldr	r3, [r3, #36]
  66 0038 1C4A     		ldr	r2, .L2+4
  67 003a 43F04003 		orr	r3, r3, #64
  68 003e 5362     		str	r3, [r2, #36]
  24:./Src/stm32f767zi_i2c.c **** 	// Set pin output type to open-drain
  25:./Src/stm32f767zi_i2c.c **** 	GPIOB->OTYPER |= GPIO_OTYPER_OPEN_DRAIN << I2C1_SCL_POS;
  69              		.loc 1 25 16
  70 0040 1A4B     		ldr	r3, .L2+4
  71 0042 5B68     		ldr	r3, [r3, #4]
  72 0044 194A     		ldr	r2, .L2+4
  73 0046 43F04003 		orr	r3, r3, #64
  74 004a 5360     		str	r3, [r2, #4]
  26:./Src/stm32f767zi_i2c.c **** 	GPIOB->OTYPER |= GPIO_OTYPER_OPEN_DRAIN << I2C1_SDA_POS;
  75              		.loc 1 26 16
  76 004c 174B     		ldr	r3, .L2+4
  77 004e 5B68     		ldr	r3, [r3, #4]
  78 0050 164A     		ldr	r2, .L2+4
  79 0052 43F40073 		orr	r3, r3, #512
  80 0056 5360     		str	r3, [r2, #4]
  27:./Src/stm32f767zi_i2c.c **** 	// Enable internal pull-up register
  28:./Src/stm32f767zi_i2c.c **** 	GPIOB->PUPDR |= GPIO_PUPDR_PULL_UP << (2 * I2C1_SCL_POS);
  81              		.loc 1 28 15
  82 0058 144B     		ldr	r3, .L2+4
  83 005a DB68     		ldr	r3, [r3, #12]
  84 005c 134A     		ldr	r2, .L2+4
  85 005e 43F48053 		orr	r3, r3, #4096
  86 0062 D360     		str	r3, [r2, #12]
  29:./Src/stm32f767zi_i2c.c **** 	GPIOB->PUPDR |= GPIO_PUPDR_PULL_UP << (2 * I2C1_SDA_POS);
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 3


  87              		.loc 1 29 15
  88 0064 114B     		ldr	r3, .L2+4
  89 0066 DB68     		ldr	r3, [r3, #12]
  90 0068 104A     		ldr	r2, .L2+4
  91 006a 43F48023 		orr	r3, r3, #262144
  92 006e D360     		str	r3, [r2, #12]
  30:./Src/stm32f767zi_i2c.c **** 
  31:./Src/stm32f767zi_i2c.c **** 	/*        Configure I2C parameters        */
  32:./Src/stm32f767zi_i2c.c **** 
  33:./Src/stm32f767zi_i2c.c **** 	// Enable clock access to the I2C module
  34:./Src/stm32f767zi_i2c.c **** 	RCC->APB1ENR |= I2C1_CLK_EN;
  93              		.loc 1 34 15
  94 0070 0D4B     		ldr	r3, .L2
  95 0072 1B6C     		ldr	r3, [r3, #64]
  96 0074 0C4A     		ldr	r2, .L2
  97 0076 43F40013 		orr	r3, r3, #2097152
  98 007a 1364     		str	r3, [r2, #64]
  35:./Src/stm32f767zi_i2c.c **** 	// Disable I2C module
  36:./Src/stm32f767zi_i2c.c **** 	I2C1->CR1 &= ~I2C_CR1_PE;
  99              		.loc 1 36 12
 100 007c 0C4B     		ldr	r3, .L2+8
 101 007e 1B68     		ldr	r3, [r3]
 102 0080 0B4A     		ldr	r2, .L2+8
 103 0082 23F00103 		bic	r3, r3, #1
 104 0086 1360     		str	r3, [r2]
  37:./Src/stm32f767zi_i2c.c **** 	// Set timing
  38:./Src/stm32f767zi_i2c.c **** 	I2C1->TIMINGR |= I2C_TIMING;
 105              		.loc 1 38 16
 106 0088 094B     		ldr	r3, .L2+8
 107 008a 1A69     		ldr	r2, [r3, #16]
 108 008c 0849     		ldr	r1, .L2+8
 109 008e 094B     		ldr	r3, .L2+12
 110 0090 1343     		orrs	r3, r3, r2
 111 0092 0B61     		str	r3, [r1, #16]
  39:./Src/stm32f767zi_i2c.c **** 	// Enable I2C module
  40:./Src/stm32f767zi_i2c.c **** 	I2C1->CR1 |= I2C_CR1_PE;
 112              		.loc 1 40 12
 113 0094 064B     		ldr	r3, .L2+8
 114 0096 1B68     		ldr	r3, [r3]
 115 0098 054A     		ldr	r2, .L2+8
 116 009a 43F00103 		orr	r3, r3, #1
 117 009e 1360     		str	r3, [r2]
  41:./Src/stm32f767zi_i2c.c **** }
 118              		.loc 1 41 1
 119 00a0 00BF     		nop
 120 00a2 BD46     		mov	sp, r7
 121              	.LCFI2:
 122              		.cfi_def_cfa_register 13
 123              		@ sp needed
 124 00a4 80BC     		pop	{r7}
 125              	.LCFI3:
 126              		.cfi_restore 7
 127              		.cfi_def_cfa_offset 0
 128 00a6 7047     		bx	lr
 129              	.L3:
 130              		.align	2
 131              	.L2:
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 4


 132 00a8 00380240 		.word	1073887232
 133 00ac 00040240 		.word	1073873920
 134 00b0 00540040 		.word	1073763328
 135 00b4 5B3D3000 		.word	3161435
 136              		.cfi_endproc
 137              	.LFE0:
 139              		.section	.text.i2c2_slave_default_init,"ax",%progbits
 140              		.align	1
 141              		.global	i2c2_slave_default_init
 142              		.syntax unified
 143              		.thumb
 144              		.thumb_func
 146              	i2c2_slave_default_init:
 147              	.LFB1:
  42:./Src/stm32f767zi_i2c.c **** 
  43:./Src/stm32f767zi_i2c.c **** void i2c2_slave_default_init(void)
  44:./Src/stm32f767zi_i2c.c **** {
 148              		.loc 1 44 1
 149              		.cfi_startproc
 150              		@ args = 0, pretend = 0, frame = 0
 151              		@ frame_needed = 1, uses_anonymous_args = 0
 152 0000 80B5     		push	{r7, lr}
 153              	.LCFI4:
 154              		.cfi_def_cfa_offset 8
 155              		.cfi_offset 7, -8
 156              		.cfi_offset 14, -4
 157 0002 00AF     		add	r7, sp, #0
 158              	.LCFI5:
 159              		.cfi_def_cfa_register 7
  45:./Src/stm32f767zi_i2c.c **** 	/*        Configure SCL/SDA line        */
  46:./Src/stm32f767zi_i2c.c **** 
  47:./Src/stm32f767zi_i2c.c **** 	// Enable clock for GPIOB
  48:./Src/stm32f767zi_i2c.c **** 	RCC->AHB1ENR |= GPIOB_CLK_EN;
 160              		.loc 1 48 15
 161 0004 344B     		ldr	r3, .L5
 162 0006 1B6B     		ldr	r3, [r3, #48]
 163 0008 334A     		ldr	r2, .L5
 164 000a 43F00203 		orr	r3, r3, #2
 165 000e 1363     		str	r3, [r2, #48]
  49:./Src/stm32f767zi_i2c.c **** 	// Configure PB10(SCL) and PB11(SDA) mode to alternative function
  50:./Src/stm32f767zi_i2c.c **** 	GPIOB->MODER |= GPIO_MODE_ALTFN << (2 * I2C2_SCL_POS);
 166              		.loc 1 50 15
 167 0010 324B     		ldr	r3, .L5+4
 168 0012 1B68     		ldr	r3, [r3]
 169 0014 314A     		ldr	r2, .L5+4
 170 0016 43F40013 		orr	r3, r3, #2097152
 171 001a 1360     		str	r3, [r2]
  51:./Src/stm32f767zi_i2c.c **** 	GPIOB->MODER |= GPIO_MODE_ALTFN << (2 * I2C2_SDA_POS);
 172              		.loc 1 51 15
 173 001c 2F4B     		ldr	r3, .L5+4
 174 001e 1B68     		ldr	r3, [r3]
 175 0020 2E4A     		ldr	r2, .L5+4
 176 0022 43F40003 		orr	r3, r3, #8388608
 177 0026 1360     		str	r3, [r2]
  52:./Src/stm32f767zi_i2c.c **** 	// Select alternate function type as AF4 (I2C2_SCL/I2C_SDA)
  53:./Src/stm32f767zi_i2c.c **** 	GPIOB->AFR[I2C2_SCL_POS >> 3] |= I2C_AF << (4 * (I2C2_SCL_POS & 0x7U));
 178              		.loc 1 53 32
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 5


 179 0028 2C4B     		ldr	r3, .L5+4
 180 002a 5B6A     		ldr	r3, [r3, #36]
 181 002c 2B4A     		ldr	r2, .L5+4
 182 002e 43F48063 		orr	r3, r3, #1024
 183 0032 5362     		str	r3, [r2, #36]
  54:./Src/stm32f767zi_i2c.c **** 	GPIOB->AFR[I2C2_SDA_POS >> 3] |= I2C_AF << (4 * (I2C2_SDA_POS & 0x7U));
 184              		.loc 1 54 32
 185 0034 294B     		ldr	r3, .L5+4
 186 0036 5B6A     		ldr	r3, [r3, #36]
 187 0038 284A     		ldr	r2, .L5+4
 188 003a 43F48043 		orr	r3, r3, #16384
 189 003e 5362     		str	r3, [r2, #36]
  55:./Src/stm32f767zi_i2c.c **** 	// Set pin output type to open-drain
  56:./Src/stm32f767zi_i2c.c **** 	GPIOB->OTYPER |= GPIO_OTYPER_OPEN_DRAIN << I2C2_SCL_POS;
 190              		.loc 1 56 16
 191 0040 264B     		ldr	r3, .L5+4
 192 0042 5B68     		ldr	r3, [r3, #4]
 193 0044 254A     		ldr	r2, .L5+4
 194 0046 43F48063 		orr	r3, r3, #1024
 195 004a 5360     		str	r3, [r2, #4]
  57:./Src/stm32f767zi_i2c.c **** 	GPIOB->OTYPER |= GPIO_OTYPER_OPEN_DRAIN << I2C2_SDA_POS;
 196              		.loc 1 57 16
 197 004c 234B     		ldr	r3, .L5+4
 198 004e 5B68     		ldr	r3, [r3, #4]
 199 0050 224A     		ldr	r2, .L5+4
 200 0052 43F40063 		orr	r3, r3, #2048
 201 0056 5360     		str	r3, [r2, #4]
  58:./Src/stm32f767zi_i2c.c **** 	// Enable internal pull-up register
  59:./Src/stm32f767zi_i2c.c **** 	GPIOB->PUPDR |= GPIO_PUPDR_PULL_UP << (2 * I2C2_SCL_POS);
 202              		.loc 1 59 15
 203 0058 204B     		ldr	r3, .L5+4
 204 005a DB68     		ldr	r3, [r3, #12]
 205 005c 1F4A     		ldr	r2, .L5+4
 206 005e 43F48013 		orr	r3, r3, #1048576
 207 0062 D360     		str	r3, [r2, #12]
  60:./Src/stm32f767zi_i2c.c **** 	GPIOB->PUPDR |= GPIO_PUPDR_PULL_UP << (2 * I2C2_SDA_POS);
 208              		.loc 1 60 15
 209 0064 1D4B     		ldr	r3, .L5+4
 210 0066 DB68     		ldr	r3, [r3, #12]
 211 0068 1C4A     		ldr	r2, .L5+4
 212 006a 43F48003 		orr	r3, r3, #4194304
 213 006e D360     		str	r3, [r2, #12]
  61:./Src/stm32f767zi_i2c.c **** 
  62:./Src/stm32f767zi_i2c.c **** 	/*        Configure I2C parameters        */
  63:./Src/stm32f767zi_i2c.c **** 
  64:./Src/stm32f767zi_i2c.c **** 	// Enable clock access to the I2C module
  65:./Src/stm32f767zi_i2c.c **** 	RCC->APB1ENR |= I2C2_CLK_EN;
 214              		.loc 1 65 15
 215 0070 194B     		ldr	r3, .L5
 216 0072 1B6C     		ldr	r3, [r3, #64]
 217 0074 184A     		ldr	r2, .L5
 218 0076 43F48003 		orr	r3, r3, #4194304
 219 007a 1364     		str	r3, [r2, #64]
  66:./Src/stm32f767zi_i2c.c **** 	// Enable I2c interrupt in the NVIC
  67:./Src/stm32f767zi_i2c.c **** 	NVIC->ISER[(((uint32_t)I2C2_EV_IRQn) >> 5UL)] = (uint32_t)(1UL << (((uint32_t)I2C2_EV_IRQn) & 0x1F
 220              		.loc 1 67 6
 221 007c 184B     		ldr	r3, .L5+8
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 6


 222              		.loc 1 67 48
 223 007e 0222     		movs	r2, #2
 224 0080 5A60     		str	r2, [r3, #4]
  68:./Src/stm32f767zi_i2c.c **** 	// Disable I2C module
  69:./Src/stm32f767zi_i2c.c **** 	I2C2->CR1 &= ~I2C_CR1_PE;
 225              		.loc 1 69 12
 226 0082 184B     		ldr	r3, .L5+12
 227 0084 1B68     		ldr	r3, [r3]
 228 0086 174A     		ldr	r2, .L5+12
 229 0088 23F00103 		bic	r3, r3, #1
 230 008c 1360     		str	r3, [r2]
  70:./Src/stm32f767zi_i2c.c **** 	// Set device address
  71:./Src/stm32f767zi_i2c.c **** 	i2c_set_ownAddress1(I2C2, I2C_SLAVE_OWN_ADDRESS);
 231              		.loc 1 71 2
 232 008e 2D21     		movs	r1, #45
 233 0090 1448     		ldr	r0, .L5+12
 234 0092 FFF7FEFF 		bl	i2c_set_ownAddress1
  72:./Src/stm32f767zi_i2c.c **** 	// Enable own address 1
  73:./Src/stm32f767zi_i2c.c **** 	I2C2->OAR1 |= I2C_OAR1_OA1EN;
 235              		.loc 1 73 13
 236 0096 134B     		ldr	r3, .L5+12
 237 0098 9B68     		ldr	r3, [r3, #8]
 238 009a 124A     		ldr	r2, .L5+12
 239 009c 43F40043 		orr	r3, r3, #32768
 240 00a0 9360     		str	r3, [r2, #8]
  74:./Src/stm32f767zi_i2c.c **** 	// Enable ADDR interrupt
  75:./Src/stm32f767zi_i2c.c **** 	I2C2->CR1 |= I2C_CR1_ADDRIE;
 241              		.loc 1 75 12
 242 00a2 104B     		ldr	r3, .L5+12
 243 00a4 1B68     		ldr	r3, [r3]
 244 00a6 0F4A     		ldr	r2, .L5+12
 245 00a8 43F00803 		orr	r3, r3, #8
 246 00ac 1360     		str	r3, [r2]
  76:./Src/stm32f767zi_i2c.c **** 	// Enable NACK interrupt
  77:./Src/stm32f767zi_i2c.c **** 	I2C2->CR1 |= I2C_CR1_NACKIE;
 247              		.loc 1 77 12
 248 00ae 0D4B     		ldr	r3, .L5+12
 249 00b0 1B68     		ldr	r3, [r3]
 250 00b2 0C4A     		ldr	r2, .L5+12
 251 00b4 43F01003 		orr	r3, r3, #16
 252 00b8 1360     		str	r3, [r2]
  78:./Src/stm32f767zi_i2c.c **** 	// Enable STOP interrupt
  79:./Src/stm32f767zi_i2c.c **** 	I2C2->CR1 |= I2C_CR1_STOPIE;
 253              		.loc 1 79 12
 254 00ba 0A4B     		ldr	r3, .L5+12
 255 00bc 1B68     		ldr	r3, [r3]
 256 00be 094A     		ldr	r2, .L5+12
 257 00c0 43F02003 		orr	r3, r3, #32
 258 00c4 1360     		str	r3, [r2]
  80:./Src/stm32f767zi_i2c.c **** 	// Enable I2C module
  81:./Src/stm32f767zi_i2c.c **** 	I2C2->CR1 |= I2C_CR1_PE;
 259              		.loc 1 81 12
 260 00c6 074B     		ldr	r3, .L5+12
 261 00c8 1B68     		ldr	r3, [r3]
 262 00ca 064A     		ldr	r2, .L5+12
 263 00cc 43F00103 		orr	r3, r3, #1
 264 00d0 1360     		str	r3, [r2]
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 7


  82:./Src/stm32f767zi_i2c.c **** }
 265              		.loc 1 82 1
 266 00d2 00BF     		nop
 267 00d4 80BD     		pop	{r7, pc}
 268              	.L6:
 269 00d6 00BF     		.align	2
 270              	.L5:
 271 00d8 00380240 		.word	1073887232
 272 00dc 00040240 		.word	1073873920
 273 00e0 00E100E0 		.word	-536813312
 274 00e4 00580040 		.word	1073764352
 275              		.cfi_endproc
 276              	.LFE1:
 278              		.section	.text.i2c_set_ownAddress1,"ax",%progbits
 279              		.align	1
 280              		.syntax unified
 281              		.thumb
 282              		.thumb_func
 284              	i2c_set_ownAddress1:
 285              	.LFB2:
  83:./Src/stm32f767zi_i2c.c **** 
  84:./Src/stm32f767zi_i2c.c **** static void i2c_set_ownAddress1(I2C_reg_t *I2Cx, uint32_t address)
  85:./Src/stm32f767zi_i2c.c **** {
 286              		.loc 1 85 1
 287              		.cfi_startproc
 288              		@ args = 0, pretend = 0, frame = 8
 289              		@ frame_needed = 1, uses_anonymous_args = 0
 290              		@ link register save eliminated.
 291 0000 80B4     		push	{r7}
 292              	.LCFI6:
 293              		.cfi_def_cfa_offset 4
 294              		.cfi_offset 7, -4
 295 0002 83B0     		sub	sp, sp, #12
 296              	.LCFI7:
 297              		.cfi_def_cfa_offset 16
 298 0004 00AF     		add	r7, sp, #0
 299              	.LCFI8:
 300              		.cfi_def_cfa_register 7
 301 0006 7860     		str	r0, [r7, #4]
 302 0008 3960     		str	r1, [r7]
  86:./Src/stm32f767zi_i2c.c **** 	address = (address & ~0x7FU) ? (address | I2C_OAR1_OA1MODE) : (address << 1);
 303              		.loc 1 86 21
 304 000a 3B68     		ldr	r3, [r7]
 305 000c 23F07F03 		bic	r3, r3, #127
 306              		.loc 1 86 62
 307 0010 002B     		cmp	r3, #0
 308 0012 03D0     		beq	.L8
 309              		.loc 1 86 62 is_stmt 0 discriminator 1
 310 0014 3B68     		ldr	r3, [r7]
 311 0016 43F48063 		orr	r3, r3, #1024
 312 001a 01E0     		b	.L9
 313              	.L8:
 314              		.loc 1 86 62 discriminator 2
 315 001c 3B68     		ldr	r3, [r7]
 316 001e 5B00     		lsls	r3, r3, #1
 317              	.L9:
 318              		.loc 1 86 10 is_stmt 1 discriminator 4
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 8


 319 0020 3B60     		str	r3, [r7]
  87:./Src/stm32f767zi_i2c.c **** 	MODIFY_REG(I2Cx->OAR1, I2C_OAR1_OA1 | I2C_OAR1_OA1MODE, address);
 320              		.loc 1 87 2 discriminator 4
 321 0022 7B68     		ldr	r3, [r7, #4]
 322 0024 9A68     		ldr	r2, [r3, #8]
 323 0026 054B     		ldr	r3, .L10
 324 0028 1340     		ands	r3, r3, r2
 325 002a 3A68     		ldr	r2, [r7]
 326 002c 1A43     		orrs	r2, r2, r3
 327 002e 7B68     		ldr	r3, [r7, #4]
 328 0030 9A60     		str	r2, [r3, #8]
  88:./Src/stm32f767zi_i2c.c **** }
 329              		.loc 1 88 1 discriminator 4
 330 0032 00BF     		nop
 331 0034 0C37     		adds	r7, r7, #12
 332              	.LCFI9:
 333              		.cfi_def_cfa_offset 4
 334 0036 BD46     		mov	sp, r7
 335              	.LCFI10:
 336              		.cfi_def_cfa_register 13
 337              		@ sp needed
 338 0038 80BC     		pop	{r7}
 339              	.LCFI11:
 340              		.cfi_restore 7
 341              		.cfi_def_cfa_offset 0
 342 003a 7047     		bx	lr
 343              	.L11:
 344              		.align	2
 345              	.L10:
 346 003c 01FAFFFF 		.word	-1535
 347              		.cfi_endproc
 348              	.LFE2:
 350              		.section	.text.i2c_get_address_matchcode,"ax",%progbits
 351              		.align	1
 352              		.global	i2c_get_address_matchcode
 353              		.syntax unified
 354              		.thumb
 355              		.thumb_func
 357              	i2c_get_address_matchcode:
 358              	.LFB3:
  89:./Src/stm32f767zi_i2c.c **** 
  90:./Src/stm32f767zi_i2c.c **** uint32_t i2c_get_address_matchcode(I2C_reg_t *I2Cx)
  91:./Src/stm32f767zi_i2c.c **** {
 359              		.loc 1 91 1
 360              		.cfi_startproc
 361              		@ args = 0, pretend = 0, frame = 8
 362              		@ frame_needed = 1, uses_anonymous_args = 0
 363              		@ link register save eliminated.
 364 0000 80B4     		push	{r7}
 365              	.LCFI12:
 366              		.cfi_def_cfa_offset 4
 367              		.cfi_offset 7, -4
 368 0002 83B0     		sub	sp, sp, #12
 369              	.LCFI13:
 370              		.cfi_def_cfa_offset 16
 371 0004 00AF     		add	r7, sp, #0
 372              	.LCFI14:
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 9


 373              		.cfi_def_cfa_register 7
 374 0006 7860     		str	r0, [r7, #4]
  92:./Src/stm32f767zi_i2c.c **** 	return (uint32_t)((I2Cx->ISR & I2C_ISR_ADDCODE) >> I2C_ISR_ADDCODE_POS);
 375              		.loc 1 92 25
 376 0008 7B68     		ldr	r3, [r7, #4]
 377 000a 9B69     		ldr	r3, [r3, #24]
 378              		.loc 1 92 9
 379 000c 5B0C     		lsrs	r3, r3, #17
 380 000e 03F07F03 		and	r3, r3, #127
  93:./Src/stm32f767zi_i2c.c **** }
 381              		.loc 1 93 1
 382 0012 1846     		mov	r0, r3
 383 0014 0C37     		adds	r7, r7, #12
 384              	.LCFI15:
 385              		.cfi_def_cfa_offset 4
 386 0016 BD46     		mov	sp, r7
 387              	.LCFI16:
 388              		.cfi_def_cfa_register 13
 389              		@ sp needed
 390 0018 80BC     		pop	{r7}
 391              	.LCFI17:
 392              		.cfi_restore 7
 393              		.cfi_def_cfa_offset 0
 394 001a 7047     		bx	lr
 395              		.cfi_endproc
 396              	.LFE3:
 398              		.section	.text.i2c_transmit,"ax",%progbits
 399              		.align	1
 400              		.global	i2c_transmit
 401              		.syntax unified
 402              		.thumb
 403              		.thumb_func
 405              	i2c_transmit:
 406              	.LFB4:
  94:./Src/stm32f767zi_i2c.c **** 
  95:./Src/stm32f767zi_i2c.c **** void i2c_transmit(I2C_reg_t *I2Cx, const uint16_t address, const uint8_t reg, const uint8_t size, u
  96:./Src/stm32f767zi_i2c.c **** {
 407              		.loc 1 96 1
 408              		.cfi_startproc
 409              		@ args = 4, pretend = 0, frame = 8
 410              		@ frame_needed = 1, uses_anonymous_args = 0
 411              		@ link register save eliminated.
 412 0000 80B4     		push	{r7}
 413              	.LCFI18:
 414              		.cfi_def_cfa_offset 4
 415              		.cfi_offset 7, -4
 416 0002 83B0     		sub	sp, sp, #12
 417              	.LCFI19:
 418              		.cfi_def_cfa_offset 16
 419 0004 00AF     		add	r7, sp, #0
 420              	.LCFI20:
 421              		.cfi_def_cfa_register 7
 422 0006 7860     		str	r0, [r7, #4]
 423 0008 0846     		mov	r0, r1
 424 000a 1146     		mov	r1, r2
 425 000c 1A46     		mov	r2, r3
 426 000e 0346     		mov	r3, r0	@ movhi
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 10


 427 0010 7B80     		strh	r3, [r7, #2]	@ movhi
 428 0012 0B46     		mov	r3, r1
 429 0014 7B70     		strb	r3, [r7, #1]
 430 0016 1346     		mov	r3, r2
 431 0018 3B70     		strb	r3, [r7]
  97:./Src/stm32f767zi_i2c.c **** 	// Clear CR2
  98:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 &= 0U;
 432              		.loc 1 98 12
 433 001a 7B68     		ldr	r3, [r7, #4]
 434 001c 5B68     		ldr	r3, [r3, #4]
 435 001e 7B68     		ldr	r3, [r7, #4]
 436 0020 0022     		movs	r2, #0
 437 0022 5A60     		str	r2, [r3, #4]
  99:./Src/stm32f767zi_i2c.c **** 	// Set slave address
 100:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= (address & ~0x7FU) ? (address | I2C_CR2_ADD10) : (address << 1);
 438              		.loc 1 100 12
 439 0024 7B68     		ldr	r3, [r7, #4]
 440 0026 5B68     		ldr	r3, [r3, #4]
 441              		.loc 1 100 24
 442 0028 7A88     		ldrh	r2, [r7, #2]
 443 002a 22F07F02 		bic	r2, r2, #127
 444              		.loc 1 100 62
 445 002e 002A     		cmp	r2, #0
 446 0030 04D0     		beq	.L15
 447              		.loc 1 100 62 is_stmt 0 discriminator 1
 448 0032 7A88     		ldrh	r2, [r7, #2]	@ movhi
 449 0034 42F40062 		orr	r2, r2, #2048
 450 0038 92B2     		uxth	r2, r2
 451 003a 01E0     		b	.L16
 452              	.L15:
 453              		.loc 1 100 73 is_stmt 1 discriminator 2
 454 003c 7A88     		ldrh	r2, [r7, #2]
 455 003e 5200     		lsls	r2, r2, #1
 456              	.L16:
 457              		.loc 1 100 12 discriminator 4
 458 0040 1A43     		orrs	r2, r2, r3
 459 0042 7B68     		ldr	r3, [r7, #4]
 460 0044 5A60     		str	r2, [r3, #4]
 101:./Src/stm32f767zi_i2c.c **** 	// Set transfer size
 102:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= (1 + (uint8_t)size) << I2C_CR2_NBYTES_POS;
 461              		.loc 1 102 12 discriminator 4
 462 0046 7B68     		ldr	r3, [r7, #4]
 463 0048 5B68     		ldr	r3, [r3, #4]
 464              		.loc 1 102 20 discriminator 4
 465 004a 3A78     		ldrb	r2, [r7]	@ zero_extendqisi2
 466              		.loc 1 102 18 discriminator 4
 467 004c 0132     		adds	r2, r2, #1
 468              		.loc 1 102 35 discriminator 4
 469 004e 1204     		lsls	r2, r2, #16
 470              		.loc 1 102 12 discriminator 4
 471 0050 1A43     		orrs	r2, r2, r3
 472 0052 7B68     		ldr	r3, [r7, #4]
 473 0054 5A60     		str	r2, [r3, #4]
 103:./Src/stm32f767zi_i2c.c **** 	// Set automatic end mode
 104:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= I2C_CR2_AUTOEND;
 474              		.loc 1 104 12 discriminator 4
 475 0056 7B68     		ldr	r3, [r7, #4]
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 11


 476 0058 5B68     		ldr	r3, [r3, #4]
 477 005a 43F00072 		orr	r2, r3, #33554432
 478 005e 7B68     		ldr	r3, [r7, #4]
 479 0060 5A60     		str	r2, [r3, #4]
 105:./Src/stm32f767zi_i2c.c **** 	// Set data transmit register before start
 106:./Src/stm32f767zi_i2c.c **** 	I2Cx->TXDR = reg;
 480              		.loc 1 106 13 discriminator 4
 481 0062 7A78     		ldrb	r2, [r7, #1]	@ zero_extendqisi2
 482 0064 7B68     		ldr	r3, [r7, #4]
 483 0066 9A62     		str	r2, [r3, #40]
 107:./Src/stm32f767zi_i2c.c **** 	// Generate start condition
 108:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= I2C_CR2_START;
 484              		.loc 1 108 12 discriminator 4
 485 0068 7B68     		ldr	r3, [r7, #4]
 486 006a 5B68     		ldr	r3, [r3, #4]
 487 006c 43F40052 		orr	r2, r3, #8192
 488 0070 7B68     		ldr	r3, [r7, #4]
 489 0072 5A60     		str	r2, [r3, #4]
 109:./Src/stm32f767zi_i2c.c **** 	// Loop until STOP flag is raised
 110:./Src/stm32f767zi_i2c.c **** 	while (!(I2Cx->ISR & I2C_ISR_STOPF)) {
 490              		.loc 1 110 8 discriminator 4
 491 0074 0CE0     		b	.L17
 492              	.L18:
 111:./Src/stm32f767zi_i2c.c **** 		// check TXIS flag value in ISR register
 112:./Src/stm32f767zi_i2c.c **** 		if (I2Cx->ISR & I2C_ISR_TXIS)
 493              		.loc 1 112 11
 494 0076 7B68     		ldr	r3, [r7, #4]
 495 0078 9B69     		ldr	r3, [r3, #24]
 496              		.loc 1 112 17
 497 007a 03F00203 		and	r3, r3, #2
 498              		.loc 1 112 6
 499 007e 002B     		cmp	r3, #0
 500 0080 06D0     		beq	.L17
 113:./Src/stm32f767zi_i2c.c **** 			I2Cx->TXDR = (*data++);
 501              		.loc 1 113 23
 502 0082 3B69     		ldr	r3, [r7, #16]
 503 0084 5A1C     		adds	r2, r3, #1
 504 0086 3A61     		str	r2, [r7, #16]
 505              		.loc 1 113 18
 506 0088 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 507 008a 1A46     		mov	r2, r3
 508              		.loc 1 113 15
 509 008c 7B68     		ldr	r3, [r7, #4]
 510 008e 9A62     		str	r2, [r3, #40]
 511              	.L17:
 110:./Src/stm32f767zi_i2c.c **** 		// check TXIS flag value in ISR register
 512              		.loc 1 110 15
 513 0090 7B68     		ldr	r3, [r7, #4]
 514 0092 9B69     		ldr	r3, [r3, #24]
 110:./Src/stm32f767zi_i2c.c **** 		// check TXIS flag value in ISR register
 515              		.loc 1 110 21
 516 0094 03F02003 		and	r3, r3, #32
 110:./Src/stm32f767zi_i2c.c **** 		// check TXIS flag value in ISR register
 517              		.loc 1 110 8
 518 0098 002B     		cmp	r3, #0
 519 009a ECD0     		beq	.L18
 114:./Src/stm32f767zi_i2c.c **** 	}
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 12


 115:./Src/stm32f767zi_i2c.c **** 	// Clear stop flag
 116:./Src/stm32f767zi_i2c.c **** 	I2C1->ICR |= I2C_ICR_STOPCF;
 520              		.loc 1 116 12
 521 009c 054B     		ldr	r3, .L19
 522 009e DB69     		ldr	r3, [r3, #28]
 523 00a0 044A     		ldr	r2, .L19
 524 00a2 43F02003 		orr	r3, r3, #32
 525 00a6 D361     		str	r3, [r2, #28]
 117:./Src/stm32f767zi_i2c.c **** }
 526              		.loc 1 117 1
 527 00a8 00BF     		nop
 528 00aa 0C37     		adds	r7, r7, #12
 529              	.LCFI21:
 530              		.cfi_def_cfa_offset 4
 531 00ac BD46     		mov	sp, r7
 532              	.LCFI22:
 533              		.cfi_def_cfa_register 13
 534              		@ sp needed
 535 00ae 80BC     		pop	{r7}
 536              	.LCFI23:
 537              		.cfi_restore 7
 538              		.cfi_def_cfa_offset 0
 539 00b0 7047     		bx	lr
 540              	.L20:
 541 00b2 00BF     		.align	2
 542              	.L19:
 543 00b4 00540040 		.word	1073763328
 544              		.cfi_endproc
 545              	.LFE4:
 547              		.section	.text.i2c_receive,"ax",%progbits
 548              		.align	1
 549              		.global	i2c_receive
 550              		.syntax unified
 551              		.thumb
 552              		.thumb_func
 554              	i2c_receive:
 555              	.LFB5:
 118:./Src/stm32f767zi_i2c.c **** 
 119:./Src/stm32f767zi_i2c.c **** void i2c_receive(I2C_reg_t *I2Cx, const uint16_t address, const uint8_t reg, const uint8_t size, ui
 120:./Src/stm32f767zi_i2c.c **** {
 556              		.loc 1 120 1
 557              		.cfi_startproc
 558              		@ args = 4, pretend = 0, frame = 8
 559              		@ frame_needed = 1, uses_anonymous_args = 0
 560              		@ link register save eliminated.
 561 0000 80B4     		push	{r7}
 562              	.LCFI24:
 563              		.cfi_def_cfa_offset 4
 564              		.cfi_offset 7, -4
 565 0002 83B0     		sub	sp, sp, #12
 566              	.LCFI25:
 567              		.cfi_def_cfa_offset 16
 568 0004 00AF     		add	r7, sp, #0
 569              	.LCFI26:
 570              		.cfi_def_cfa_register 7
 571 0006 7860     		str	r0, [r7, #4]
 572 0008 0846     		mov	r0, r1
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 13


 573 000a 1146     		mov	r1, r2
 574 000c 1A46     		mov	r2, r3
 575 000e 0346     		mov	r3, r0	@ movhi
 576 0010 7B80     		strh	r3, [r7, #2]	@ movhi
 577 0012 0B46     		mov	r3, r1
 578 0014 7B70     		strb	r3, [r7, #1]
 579 0016 1346     		mov	r3, r2
 580 0018 3B70     		strb	r3, [r7]
 121:./Src/stm32f767zi_i2c.c **** 	// Clear CR2
 122:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 &= 0U;
 581              		.loc 1 122 12
 582 001a 7B68     		ldr	r3, [r7, #4]
 583 001c 5B68     		ldr	r3, [r3, #4]
 584 001e 7B68     		ldr	r3, [r7, #4]
 585 0020 0022     		movs	r2, #0
 586 0022 5A60     		str	r2, [r3, #4]
 123:./Src/stm32f767zi_i2c.c ****         // Set slave address
 124:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= (address & ~0x7FU) ? (address | I2C_CR2_ADD10) : (address << 1);
 587              		.loc 1 124 12
 588 0024 7B68     		ldr	r3, [r7, #4]
 589 0026 5B68     		ldr	r3, [r3, #4]
 590              		.loc 1 124 24
 591 0028 7A88     		ldrh	r2, [r7, #2]
 592 002a 22F07F02 		bic	r2, r2, #127
 593              		.loc 1 124 62
 594 002e 002A     		cmp	r2, #0
 595 0030 04D0     		beq	.L22
 596              		.loc 1 124 62 is_stmt 0 discriminator 1
 597 0032 7A88     		ldrh	r2, [r7, #2]	@ movhi
 598 0034 42F40062 		orr	r2, r2, #2048
 599 0038 92B2     		uxth	r2, r2
 600 003a 01E0     		b	.L23
 601              	.L22:
 602              		.loc 1 124 73 is_stmt 1 discriminator 2
 603 003c 7A88     		ldrh	r2, [r7, #2]
 604 003e 5200     		lsls	r2, r2, #1
 605              	.L23:
 606              		.loc 1 124 12 discriminator 4
 607 0040 1A43     		orrs	r2, r2, r3
 608 0042 7B68     		ldr	r3, [r7, #4]
 609 0044 5A60     		str	r2, [r3, #4]
 125:./Src/stm32f767zi_i2c.c **** 
 126:./Src/stm32f767zi_i2c.c **** 	/*        Transmit register address        */
 127:./Src/stm32f767zi_i2c.c ****         
 128:./Src/stm32f767zi_i2c.c **** 	// Set transfer size (first transmit only register address)
 129:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= 1 << I2C_CR2_NBYTES_POS;
 610              		.loc 1 129 12 discriminator 4
 611 0046 7B68     		ldr	r3, [r7, #4]
 612 0048 5B68     		ldr	r3, [r3, #4]
 613 004a 43F48032 		orr	r2, r3, #65536
 614 004e 7B68     		ldr	r3, [r7, #4]
 615 0050 5A60     		str	r2, [r3, #4]
 130:./Src/stm32f767zi_i2c.c **** 	// Set data transmit register before start
 131:./Src/stm32f767zi_i2c.c **** 	I2Cx->TXDR = reg;
 616              		.loc 1 131 13 discriminator 4
 617 0052 7A78     		ldrb	r2, [r7, #1]	@ zero_extendqisi2
 618 0054 7B68     		ldr	r3, [r7, #4]
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 14


 619 0056 9A62     		str	r2, [r3, #40]
 132:./Src/stm32f767zi_i2c.c **** 	// Generate start condition
 133:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= I2C_CR2_START;
 620              		.loc 1 133 12 discriminator 4
 621 0058 7B68     		ldr	r3, [r7, #4]
 622 005a 5B68     		ldr	r3, [r3, #4]
 623 005c 43F40052 		orr	r2, r3, #8192
 624 0060 7B68     		ldr	r3, [r7, #4]
 625 0062 5A60     		str	r2, [r3, #4]
 134:./Src/stm32f767zi_i2c.c **** 	// Loop until TC flag is raised
 135:./Src/stm32f767zi_i2c.c **** 	while (!(I2Cx->ISR & I2C_ISR_TC))
 626              		.loc 1 135 8 discriminator 4
 627 0064 00BF     		nop
 628              	.L24:
 629              		.loc 1 135 15 discriminator 1
 630 0066 7B68     		ldr	r3, [r7, #4]
 631 0068 9B69     		ldr	r3, [r3, #24]
 632              		.loc 1 135 21 discriminator 1
 633 006a 03F04003 		and	r3, r3, #64
 634              		.loc 1 135 8 discriminator 1
 635 006e 002B     		cmp	r3, #0
 636 0070 F9D0     		beq	.L24
 136:./Src/stm32f767zi_i2c.c **** 		;
 137:./Src/stm32f767zi_i2c.c **** 
 138:./Src/stm32f767zi_i2c.c **** 	/*        Receive data        */
 139:./Src/stm32f767zi_i2c.c **** 
 140:./Src/stm32f767zi_i2c.c **** 	// Set transfer direction
 141:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= I2C_CR2_RD_WRN;
 637              		.loc 1 141 12
 638 0072 7B68     		ldr	r3, [r7, #4]
 639 0074 5B68     		ldr	r3, [r3, #4]
 640 0076 43F48062 		orr	r2, r3, #1024
 641 007a 7B68     		ldr	r3, [r7, #4]
 642 007c 5A60     		str	r2, [r3, #4]
 142:./Src/stm32f767zi_i2c.c **** 	// Set receive size
 143:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 &= ~I2C_CR2_NBYTES_MASK;
 643              		.loc 1 143 12
 644 007e 7B68     		ldr	r3, [r7, #4]
 645 0080 5B68     		ldr	r3, [r3, #4]
 646 0082 23F47022 		bic	r2, r3, #983040
 647 0086 7B68     		ldr	r3, [r7, #4]
 648 0088 5A60     		str	r2, [r3, #4]
 144:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= (uint8_t)size << I2C_CR2_NBYTES_POS;
 649              		.loc 1 144 12
 650 008a 7B68     		ldr	r3, [r7, #4]
 651 008c 5B68     		ldr	r3, [r3, #4]
 652              		.loc 1 144 15
 653 008e 3A78     		ldrb	r2, [r7]	@ zero_extendqisi2
 654              		.loc 1 144 29
 655 0090 1204     		lsls	r2, r2, #16
 656              		.loc 1 144 12
 657 0092 1A43     		orrs	r2, r2, r3
 658 0094 7B68     		ldr	r3, [r7, #4]
 659 0096 5A60     		str	r2, [r3, #4]
 145:./Src/stm32f767zi_i2c.c **** 	// Set automatic end mode
 146:./Src/stm32f767zi_i2c.c **** 	//I2Cx->CR2 |= I2C_CR2_AUTOEND;
 147:./Src/stm32f767zi_i2c.c **** 	// Generate start condition
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 15


 148:./Src/stm32f767zi_i2c.c **** 	I2Cx->CR2 |= I2C_CR2_START;
 660              		.loc 1 148 12
 661 0098 7B68     		ldr	r3, [r7, #4]
 662 009a 5B68     		ldr	r3, [r3, #4]
 663 009c 43F40052 		orr	r2, r3, #8192
 664 00a0 7B68     		ldr	r3, [r7, #4]
 665 00a2 5A60     		str	r2, [r3, #4]
 149:./Src/stm32f767zi_i2c.c **** 	while (!(I2Cx->ISR & I2C_ISR_TC)) {
 666              		.loc 1 149 8
 667 00a4 0CE0     		b	.L25
 668              	.L26:
 150:./Src/stm32f767zi_i2c.c **** 		if (I2Cx->ISR & I2C_ISR_RXNE)
 669              		.loc 1 150 11
 670 00a6 7B68     		ldr	r3, [r7, #4]
 671 00a8 9B69     		ldr	r3, [r3, #24]
 672              		.loc 1 150 17
 673 00aa 03F00403 		and	r3, r3, #4
 674              		.loc 1 150 6
 675 00ae 002B     		cmp	r3, #0
 676 00b0 06D0     		beq	.L25
 151:./Src/stm32f767zi_i2c.c **** 			(*data++) = I2Cx->RXDR;
 677              		.loc 1 151 20
 678 00b2 7B68     		ldr	r3, [r7, #4]
 679 00b4 596A     		ldr	r1, [r3, #36]
 680              		.loc 1 151 10
 681 00b6 3B69     		ldr	r3, [r7, #16]
 682 00b8 5A1C     		adds	r2, r3, #1
 683 00ba 3A61     		str	r2, [r7, #16]
 684              		.loc 1 151 14
 685 00bc CAB2     		uxtb	r2, r1
 686 00be 1A70     		strb	r2, [r3]
 687              	.L25:
 149:./Src/stm32f767zi_i2c.c **** 	while (!(I2Cx->ISR & I2C_ISR_TC)) {
 688              		.loc 1 149 15
 689 00c0 7B68     		ldr	r3, [r7, #4]
 690 00c2 9B69     		ldr	r3, [r3, #24]
 149:./Src/stm32f767zi_i2c.c **** 	while (!(I2Cx->ISR & I2C_ISR_TC)) {
 691              		.loc 1 149 21
 692 00c4 03F04003 		and	r3, r3, #64
 149:./Src/stm32f767zi_i2c.c **** 	while (!(I2Cx->ISR & I2C_ISR_TC)) {
 693              		.loc 1 149 8
 694 00c8 002B     		cmp	r3, #0
 695 00ca ECD0     		beq	.L26
 152:./Src/stm32f767zi_i2c.c **** 	}
 153:./Src/stm32f767zi_i2c.c ****         // Set stop condition
 154:./Src/stm32f767zi_i2c.c ****         I2Cx->CR2 |= I2C_CR2_STOP;
 696              		.loc 1 154 19
 697 00cc 7B68     		ldr	r3, [r7, #4]
 698 00ce 5B68     		ldr	r3, [r3, #4]
 699 00d0 43F48042 		orr	r2, r3, #16384
 700 00d4 7B68     		ldr	r3, [r7, #4]
 701 00d6 5A60     		str	r2, [r3, #4]
 155:./Src/stm32f767zi_i2c.c **** 	// Clear stop flag
 156:./Src/stm32f767zi_i2c.c **** 	I2C1->ICR |= I2C_ICR_STOPCF;
 702              		.loc 1 156 12
 703 00d8 054B     		ldr	r3, .L27
 704 00da DB69     		ldr	r3, [r3, #28]
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 16


 705 00dc 044A     		ldr	r2, .L27
 706 00de 43F02003 		orr	r3, r3, #32
 707 00e2 D361     		str	r3, [r2, #28]
 157:./Src/stm32f767zi_i2c.c **** }...
 708              		.loc 1 157 1
 709 00e4 00BF     		nop
 710 00e6 0C37     		adds	r7, r7, #12
 711              	.LCFI27:
 712              		.cfi_def_cfa_offset 4
 713 00e8 BD46     		mov	sp, r7
 714              	.LCFI28:
 715              		.cfi_def_cfa_register 13
 716              		@ sp needed
 717 00ea 80BC     		pop	{r7}
 718              	.LCFI29:
 719              		.cfi_restore 7
 720              		.cfi_def_cfa_offset 0
 721 00ec 7047     		bx	lr
 722              	.L28:
 723 00ee 00BF     		.align	2
 724              	.L27:
 725 00f0 00540040 		.word	1073763328
 726              		.cfi_endproc
 727              	.LFE5:
 729              		.text
 730              	.Letext0:
 731              		.file 2 "e:\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_default_types.h"
 732              		.file 3 "e:\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 733              		.file 4 "./Inc/stm32f767zi_hal.h"
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s 			page 17


DEFINED SYMBOLS
                            *ABS*:00000000 stm32f767zi_i2c.c
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:18     .text.i2c1_master_default_init:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:24     .text.i2c1_master_default_init:00000000 i2c1_master_default_init
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:132    .text.i2c1_master_default_init:000000a8 $d
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:140    .text.i2c2_slave_default_init:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:146    .text.i2c2_slave_default_init:00000000 i2c2_slave_default_init
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:284    .text.i2c_set_ownAddress1:00000000 i2c_set_ownAddress1
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:271    .text.i2c2_slave_default_init:000000d8 $d
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:279    .text.i2c_set_ownAddress1:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:346    .text.i2c_set_ownAddress1:0000003c $d
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:351    .text.i2c_get_address_matchcode:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:357    .text.i2c_get_address_matchcode:00000000 i2c_get_address_matchcode
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:399    .text.i2c_transmit:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:405    .text.i2c_transmit:00000000 i2c_transmit
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:543    .text.i2c_transmit:000000b4 $d
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:548    .text.i2c_receive:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:554    .text.i2c_receive:00000000 i2c_receive
C:\Users\DCS_LAB\AppData\Local\Temp\ccYsGm58.s:725    .text.i2c_receive:000000f0 $d

NO UNDEFINED SYMBOLS
