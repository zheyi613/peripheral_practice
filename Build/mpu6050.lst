ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"mpu6050.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.bss.gyro_unit,"aw",%nobits
  19              		.align	2
  22              	gyro_unit:
  23 0000 00000000 		.space	4
  24              		.section	.bss.accel_unit,"aw",%nobits
  25              		.align	2
  28              	accel_unit:
  29 0000 00000000 		.space	4
  30              		.section	.bss.offset,"aw",%nobits
  31              		.align	2
  34              	offset:
  35 0000 00000000 		.space	12
  35      00000000 
  35      00000000 
  36              		.section	.text.mpu6050_power_on,"ax",%progbits
  37              		.align	1
  38              		.global	mpu6050_power_on
  39              		.syntax unified
  40              		.thumb
  41              		.thumb_func
  43              	mpu6050_power_on:
  44              	.LFB0:
  45              		.file 1 "./Src/mpu6050.c"
   1:./Src/mpu6050.c **** /**
   2:./Src/mpu6050.c ****  * @file mpu6050.c
   3:./Src/mpu6050.c ****  * @author zheyi613 (zheyi880613@gmail.com)
   4:./Src/mpu6050.c ****  * @brief MPU6050 library for stm32f767zi
   5:./Src/mpu6050.c ****  * @date 2022-08-24
   6:./Src/mpu6050.c ****  */
   7:./Src/mpu6050.c **** 
   8:./Src/mpu6050.c **** #include "mpu6050.h"
   9:./Src/mpu6050.c **** 
  10:./Src/mpu6050.c **** static float gyro_unit = 0;
  11:./Src/mpu6050.c **** static float accel_unit = 0;
  12:./Src/mpu6050.c **** static int16_t offset[6] = {0};
  13:./Src/mpu6050.c **** 
  14:./Src/mpu6050.c **** static void mpu6050_calibration(uint8_t div);
  15:./Src/mpu6050.c **** 
  16:./Src/mpu6050.c **** /* Use PG2 as Vdd of MPU6050 */
  17:./Src/mpu6050.c **** void mpu6050_power_on(void)
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 2


  18:./Src/mpu6050.c **** {
  46              		.loc 1 18 1
  47              		.cfi_startproc
  48              		@ args = 0, pretend = 0, frame = 0
  49              		@ frame_needed = 1, uses_anonymous_args = 0
  50 0000 80B5     		push	{r7, lr}
  51              	.LCFI0:
  52              		.cfi_def_cfa_offset 8
  53              		.cfi_offset 7, -8
  54              		.cfi_offset 14, -4
  55 0002 00AF     		add	r7, sp, #0
  56              	.LCFI1:
  57              		.cfi_def_cfa_register 7
  19:./Src/mpu6050.c **** 	RCC->AHB1ENR |= GPIOG_CLK_EN;
  58              		.loc 1 19 15
  59 0004 0B4B     		ldr	r3, .L2
  60 0006 1B6B     		ldr	r3, [r3, #48]
  61 0008 0A4A     		ldr	r2, .L2
  62 000a 43F04003 		orr	r3, r3, #64
  63 000e 1363     		str	r3, [r2, #48]
  20:./Src/mpu6050.c **** 	GPIOG->MODER |= GPIO_MODE_OUTPUT << 4;
  64              		.loc 1 20 15
  65 0010 094B     		ldr	r3, .L2+4
  66 0012 1B68     		ldr	r3, [r3]
  67 0014 084A     		ldr	r2, .L2+4
  68 0016 43F01003 		orr	r3, r3, #16
  69 001a 1360     		str	r3, [r2]
  21:./Src/mpu6050.c **** 	GPIOG->BSRR |= (1U << 2);
  70              		.loc 1 21 14
  71 001c 064B     		ldr	r3, .L2+4
  72 001e 9B69     		ldr	r3, [r3, #24]
  73 0020 054A     		ldr	r2, .L2+4
  74 0022 43F00403 		orr	r3, r3, #4
  75 0026 9361     		str	r3, [r2, #24]
  22:./Src/mpu6050.c **** 
  23:./Src/mpu6050.c **** 	systick_delay_ms(100);
  76              		.loc 1 23 2
  77 0028 6420     		movs	r0, #100
  78 002a FFF7FEFF 		bl	systick_delay_ms
  24:./Src/mpu6050.c **** }
  79              		.loc 1 24 1
  80 002e 00BF     		nop
  81 0030 80BD     		pop	{r7, pc}
  82              	.L3:
  83 0032 00BF     		.align	2
  84              	.L2:
  85 0034 00380240 		.word	1073887232
  86 0038 00180240 		.word	1073879040
  87              		.cfi_endproc
  88              	.LFE0:
  90              		.section	.text.mpu6050_default_init,"ax",%progbits
  91              		.align	1
  92              		.global	mpu6050_default_init
  93              		.syntax unified
  94              		.thumb
  95              		.thumb_func
  97              	mpu6050_default_init:
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 3


  98              	.LFB1:
  25:./Src/mpu6050.c **** 
  26:./Src/mpu6050.c **** /*
  27:./Src/mpu6050.c ****  * Default setting:
  28:./Src/mpu6050.c ****  * Clock source: PLL with X axis gyroscope reference
  29:./Src/mpu6050.c ****  * Sampling rate: 1000
  30:./Src/mpu6050.c ****  * Gyroscope full scale range: 250dps
  31:./Src/mpu6050.c ****  * Accelerometer full scale range: 2g
  32:./Src/mpu6050.c ****  *
  33:./Src/mpu6050.c ****  * note: no calibration
  34:./Src/mpu6050.c ****  */
  35:./Src/mpu6050.c **** void mpu6050_default_init(void)
  36:./Src/mpu6050.c **** {
  99              		.loc 1 36 1
 100              		.cfi_startproc
 101              		@ args = 0, pretend = 0, frame = 8
 102              		@ frame_needed = 1, uses_anonymous_args = 0
 103 0000 80B5     		push	{r7, lr}
 104              	.LCFI2:
 105              		.cfi_def_cfa_offset 8
 106              		.cfi_offset 7, -8
 107              		.cfi_offset 14, -4
 108 0002 84B0     		sub	sp, sp, #16
 109              	.LCFI3:
 110              		.cfi_def_cfa_offset 24
 111 0004 02AF     		add	r7, sp, #8
 112              	.LCFI4:
 113              		.cfi_def_cfa 7, 16
  37:./Src/mpu6050.c **** 	uint8_t tmp = MPU6050_DEVICE_RESET;
 114              		.loc 1 37 10
 115 0006 8023     		movs	r3, #128
 116 0008 FB71     		strb	r3, [r7, #7]
  38:./Src/mpu6050.c **** 	// Reset MPU6050
  39:./Src/mpu6050.c **** 	i2c_write_reg(I2C1, MPU6050_ADDRESS, MPU6050_PWR_MGMT_1, 1, &tmp);
 117              		.loc 1 39 2
 118 000a FB1D     		adds	r3, r7, #7
 119 000c 0093     		str	r3, [sp]
 120 000e 0123     		movs	r3, #1
 121 0010 6B22     		movs	r2, #107
 122 0012 6821     		movs	r1, #104
 123 0014 1348     		ldr	r0, .L5
 124 0016 FFF7FEFF 		bl	i2c_write_reg
  40:./Src/mpu6050.c **** 	systick_delay_ms(100);
 125              		.loc 1 40 2
 126 001a 6420     		movs	r0, #100
 127 001c FFF7FEFF 		bl	systick_delay_ms
  41:./Src/mpu6050.c **** 	// Wake up and use PLL with X axis gyroscope reference as clock source
  42:./Src/mpu6050.c **** 	tmp = MPU6050_CLK_X_GYRO;
 128              		.loc 1 42 6
 129 0020 0123     		movs	r3, #1
 130 0022 FB71     		strb	r3, [r7, #7]
  43:./Src/mpu6050.c **** 	i2c_write_reg(I2C1, MPU6050_ADDRESS, MPU6050_PWR_MGMT_1, 1, &tmp);
 131              		.loc 1 43 2
 132 0024 FB1D     		adds	r3, r7, #7
 133 0026 0093     		str	r3, [sp]
 134 0028 0123     		movs	r3, #1
 135 002a 6B22     		movs	r2, #107
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 4


 136 002c 6821     		movs	r1, #104
 137 002e 0D48     		ldr	r0, .L5
 138 0030 FFF7FEFF 		bl	i2c_write_reg
  44:./Src/mpu6050.c **** 	systick_delay_ms(100);
 139              		.loc 1 44 2
 140 0034 6420     		movs	r0, #100
 141 0036 FFF7FEFF 		bl	systick_delay_ms
  45:./Src/mpu6050.c **** 	// Set sample rate to 1kHz
  46:./Src/mpu6050.c **** 	tmp = 1;
 142              		.loc 1 46 6
 143 003a 0123     		movs	r3, #1
 144 003c FB71     		strb	r3, [r7, #7]
  47:./Src/mpu6050.c **** 	i2c_write_reg(I2C1, MPU6050_ADDRESS, MPU6050_CONFIG, 1, &tmp);
 145              		.loc 1 47 2
 146 003e FB1D     		adds	r3, r7, #7
 147 0040 0093     		str	r3, [sp]
 148 0042 0123     		movs	r3, #1
 149 0044 1A22     		movs	r2, #26
 150 0046 6821     		movs	r1, #104
 151 0048 0648     		ldr	r0, .L5
 152 004a FFF7FEFF 		bl	i2c_write_reg
  48:./Src/mpu6050.c **** 	// initial gyroscope and accelorometer unit
  49:./Src/mpu6050.c **** 	gyro_unit = MPU6050_GYRO_UNIT;
 153              		.loc 1 49 12
 154 004e 064B     		ldr	r3, .L5+4
 155 0050 064A     		ldr	r2, .L5+8
 156 0052 1A60     		str	r2, [r3]	@ float
  50:./Src/mpu6050.c **** 	accel_unit = MPU6050_ACCEL_UNIT;
 157              		.loc 1 50 13
 158 0054 064B     		ldr	r3, .L5+12
 159 0056 074A     		ldr	r2, .L5+16
 160 0058 1A60     		str	r2, [r3]	@ float
  51:./Src/mpu6050.c **** }
 161              		.loc 1 51 1
 162 005a 00BF     		nop
 163 005c 0837     		adds	r7, r7, #8
 164              	.LCFI5:
 165              		.cfi_def_cfa_offset 8
 166 005e BD46     		mov	sp, r7
 167              	.LCFI6:
 168              		.cfi_def_cfa_register 13
 169              		@ sp needed
 170 0060 80BD     		pop	{r7, pc}
 171              	.L6:
 172 0062 00BF     		.align	2
 173              	.L5:
 174 0064 00540040 		.word	1073763328
 175 0068 00000000 		.word	gyro_unit
 176 006c FA00FA3B 		.word	1006239994
 177 0070 00000000 		.word	accel_unit
 178 0074 80008038 		.word	947912832
 179              		.cfi_endproc
 180              	.LFE1:
 182              		.section	.text.mpu6050_init,"ax",%progbits
 183              		.align	1
 184              		.global	mpu6050_init
 185              		.syntax unified
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 5


 186              		.thumb
 187              		.thumb_func
 189              	mpu6050_init:
 190              	.LFB2:
  52:./Src/mpu6050.c **** 
  53:./Src/mpu6050.c **** /**
  54:./Src/mpu6050.c ****  * @brief Initial mpu6050 with user selecting sample rate,
  55:./Src/mpu6050.c ****  *        gyro full scale range, accel full scale range.
  56:./Src/mpu6050.c ****  *        Set proper low pass filter and calibrate mpu6050.
  57:./Src/mpu6050.c ****  *
  58:./Src/mpu6050.c ****  * @param sample_rate (Hz)
  59:./Src/mpu6050.c ****  * @param gyro_range  (dps)
  60:./Src/mpu6050.c ****  * @param accel_range (g)
  61:./Src/mpu6050.c ****  */
  62:./Src/mpu6050.c **** void mpu6050_init(uint16_t sample_rate, uint8_t accel_range,
  63:./Src/mpu6050.c **** 		  uint16_t gyro_range)
  64:./Src/mpu6050.c **** {
 191              		.loc 1 64 1
 192              		.cfi_startproc
 193              		@ args = 0, pretend = 0, frame = 16
 194              		@ frame_needed = 1, uses_anonymous_args = 0
 195 0000 80B5     		push	{r7, lr}
 196              	.LCFI7:
 197              		.cfi_def_cfa_offset 8
 198              		.cfi_offset 7, -8
 199              		.cfi_offset 14, -4
 200 0002 86B0     		sub	sp, sp, #24
 201              	.LCFI8:
 202              		.cfi_def_cfa_offset 32
 203 0004 02AF     		add	r7, sp, #8
 204              	.LCFI9:
 205              		.cfi_def_cfa 7, 24
 206 0006 0346     		mov	r3, r0
 207 0008 FB80     		strh	r3, [r7, #6]	@ movhi
 208 000a 0B46     		mov	r3, r1
 209 000c 7B71     		strb	r3, [r7, #5]
 210 000e 1346     		mov	r3, r2	@ movhi
 211 0010 7B80     		strh	r3, [r7, #2]	@ movhi
  65:./Src/mpu6050.c **** 	uint8_t div = (uint8_t)(1000 / sample_rate - 1);
 212              		.loc 1 65 31
 213 0012 FB88     		ldrh	r3, [r7, #6]
 214 0014 4FF47A72 		mov	r2, #1000
 215 0018 92FBF3F3 		sdiv	r3, r2, r3
 216              		.loc 1 65 16
 217 001c DBB2     		uxtb	r3, r3
 218 001e 013B     		subs	r3, r3, #1
 219 0020 DBB2     		uxtb	r3, r3
 220              		.loc 1 65 10
 221 0022 FB73     		strb	r3, [r7, #15]
  66:./Src/mpu6050.c **** 	uint8_t low_pass_cfg = 0;
 222              		.loc 1 66 10
 223 0024 0023     		movs	r3, #0
 224 0026 BB73     		strb	r3, [r7, #14]
  67:./Src/mpu6050.c **** 	uint16_t tmp = sample_rate;
 225              		.loc 1 67 11
 226 0028 FB88     		ldrh	r3, [r7, #6]	@ movhi
 227 002a BB81     		strh	r3, [r7, #12]	@ movhi
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 6


  68:./Src/mpu6050.c **** 
  69:./Src/mpu6050.c **** 	mpu6050_default_init();
 228              		.loc 1 69 2
 229 002c FFF7FEFF 		bl	mpu6050_default_init
  70:./Src/mpu6050.c **** 
  71:./Src/mpu6050.c **** 	i2c_write_reg(I2C1, MPU6050_ADDRESS, MPU6050_SMPLRT_DIV, 1, &div);
 230              		.loc 1 71 2
 231 0030 07F10F03 		add	r3, r7, #15
 232 0034 0093     		str	r3, [sp]
 233 0036 0123     		movs	r3, #1
 234 0038 1922     		movs	r2, #25
 235 003a 6821     		movs	r1, #104
 236 003c 2F48     		ldr	r0, .L14
 237 003e FFF7FEFF 		bl	i2c_write_reg
  72:./Src/mpu6050.c **** 	// Set low pass filter
  73:./Src/mpu6050.c **** 	while (1000 > tmp) {
 238              		.loc 1 73 8
 239 0042 07E0     		b	.L8
 240              	.L9:
  74:./Src/mpu6050.c **** 		tmp <<= 1;
 241              		.loc 1 74 7
 242 0044 BB89     		ldrh	r3, [r7, #12]
 243 0046 5B00     		lsls	r3, r3, #1
 244 0048 9BB2     		uxth	r3, r3
 245 004a BB81     		strh	r3, [r7, #12]	@ movhi
  75:./Src/mpu6050.c **** 		low_pass_cfg++;
 246              		.loc 1 75 15
 247 004c BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 248 004e 0133     		adds	r3, r3, #1
 249 0050 DBB2     		uxtb	r3, r3
 250 0052 BB73     		strb	r3, [r7, #14]
 251              	.L8:
  73:./Src/mpu6050.c **** 		tmp <<= 1;
 252              		.loc 1 73 14
 253 0054 BB89     		ldrh	r3, [r7, #12]
  73:./Src/mpu6050.c **** 		tmp <<= 1;
 254              		.loc 1 73 8
 255 0056 B3F57A7F 		cmp	r3, #1000
 256 005a F3D3     		bcc	.L9
  76:./Src/mpu6050.c **** 	}
  77:./Src/mpu6050.c **** 
  78:./Src/mpu6050.c **** 	i2c_write_reg(I2C1, MPU6050_ADDRESS, MPU6050_CONFIG, 1, &low_pass_cfg);
 257              		.loc 1 78 2
 258 005c 07F10E03 		add	r3, r7, #14
 259 0060 0093     		str	r3, [sp]
 260 0062 0123     		movs	r3, #1
 261 0064 1A22     		movs	r2, #26
 262 0066 6821     		movs	r1, #104
 263 0068 2448     		ldr	r0, .L14
 264 006a FFF7FEFF 		bl	i2c_write_reg
  79:./Src/mpu6050.c **** 	// Set gyroscope and accelerometer full scale range
  80:./Src/mpu6050.c **** 	tmp = 0;
 265              		.loc 1 80 6
 266 006e 0023     		movs	r3, #0
 267 0070 BB81     		strh	r3, [r7, #12]	@ movhi
  81:./Src/mpu6050.c **** 	accel_range /= 4;
 268              		.loc 1 81 14
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 7


 269 0072 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 270 0074 9B08     		lsrs	r3, r3, #2
 271 0076 7B71     		strb	r3, [r7, #5]
  82:./Src/mpu6050.c **** 
  83:./Src/mpu6050.c **** 	while (accel_range) {
 272              		.loc 1 83 8
 273 0078 0AE0     		b	.L10
 274              	.L11:
  84:./Src/mpu6050.c **** 		accel_range >>= 1;
 275              		.loc 1 84 15
 276 007a 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 277 007c 5B08     		lsrs	r3, r3, #1
 278 007e 7B71     		strb	r3, [r7, #5]
  85:./Src/mpu6050.c **** 		accel_unit *= 2;
 279              		.loc 1 85 14
 280 0080 1F4B     		ldr	r3, .L14+4
 281 0082 D3ED007A 		vldr.32	s15, [r3]
 282 0086 77EEA77A 		vadd.f32	s15, s15, s15
 283 008a 1D4B     		ldr	r3, .L14+4
 284 008c C3ED007A 		vstr.32	s15, [r3]
 285              	.L10:
  83:./Src/mpu6050.c **** 		accel_range >>= 1;
 286              		.loc 1 83 8
 287 0090 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 288 0092 002B     		cmp	r3, #0
 289 0094 F1D1     		bne	.L11
  86:./Src/mpu6050.c **** 	}
  87:./Src/mpu6050.c **** 
  88:./Src/mpu6050.c **** 	tmp <<= 8;
 290              		.loc 1 88 6
 291 0096 BB89     		ldrh	r3, [r7, #12]
 292 0098 1B02     		lsls	r3, r3, #8
 293 009a 9BB2     		uxth	r3, r3
 294 009c BB81     		strh	r3, [r7, #12]	@ movhi
  89:./Src/mpu6050.c **** 	gyro_range /= 500;
 295              		.loc 1 89 13
 296 009e 7B88     		ldrh	r3, [r7, #2]
 297 00a0 184A     		ldr	r2, .L14+8
 298 00a2 A2FB0323 		umull	r2, r3, r2, r3
 299 00a6 5B09     		lsrs	r3, r3, #5
 300 00a8 7B80     		strh	r3, [r7, #2]	@ movhi
  90:./Src/mpu6050.c **** 
  91:./Src/mpu6050.c **** 	while (gyro_range) {
 301              		.loc 1 91 8
 302 00aa 0EE0     		b	.L12
 303              	.L13:
  92:./Src/mpu6050.c **** 		gyro_range >>= 1;
 304              		.loc 1 92 14
 305 00ac 7B88     		ldrh	r3, [r7, #2]
 306 00ae 5B08     		lsrs	r3, r3, #1
 307 00b0 7B80     		strh	r3, [r7, #2]	@ movhi
  93:./Src/mpu6050.c **** 		gyro_unit *= 2;
 308              		.loc 1 93 13
 309 00b2 154B     		ldr	r3, .L14+12
 310 00b4 D3ED007A 		vldr.32	s15, [r3]
 311 00b8 77EEA77A 		vadd.f32	s15, s15, s15
 312 00bc 124B     		ldr	r3, .L14+12
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 8


 313 00be C3ED007A 		vstr.32	s15, [r3]
  94:./Src/mpu6050.c **** 		tmp++;
 314              		.loc 1 94 6
 315 00c2 BB89     		ldrh	r3, [r7, #12]
 316 00c4 0133     		adds	r3, r3, #1
 317 00c6 9BB2     		uxth	r3, r3
 318 00c8 BB81     		strh	r3, [r7, #12]	@ movhi
 319              	.L12:
  91:./Src/mpu6050.c **** 		gyro_range >>= 1;
 320              		.loc 1 91 8
 321 00ca 7B88     		ldrh	r3, [r7, #2]
 322 00cc 002B     		cmp	r3, #0
 323 00ce EDD1     		bne	.L13
  95:./Src/mpu6050.c **** 	}
  96:./Src/mpu6050.c **** 
  97:./Src/mpu6050.c **** 	tmp <<= 3;
 324              		.loc 1 97 6
 325 00d0 BB89     		ldrh	r3, [r7, #12]
 326 00d2 DB00     		lsls	r3, r3, #3
 327 00d4 9BB2     		uxth	r3, r3
 328 00d6 BB81     		strh	r3, [r7, #12]	@ movhi
  98:./Src/mpu6050.c **** 	i2c_write_reg(I2C1, MPU6050_ADDRESS, MPU6050_GYRO_CONFIG, 2,
 329              		.loc 1 98 2
 330 00d8 07F10C03 		add	r3, r7, #12
 331 00dc 0093     		str	r3, [sp]
 332 00de 0223     		movs	r3, #2
 333 00e0 1B22     		movs	r2, #27
 334 00e2 6821     		movs	r1, #104
 335 00e4 0548     		ldr	r0, .L14
 336 00e6 FFF7FEFF 		bl	i2c_write_reg
  99:./Src/mpu6050.c **** 		      (uint8_t *)&tmp);
 100:./Src/mpu6050.c **** 
 101:./Src/mpu6050.c **** 	mpu6050_calibration(div);
 337              		.loc 1 101 2
 338 00ea FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 339 00ec 1846     		mov	r0, r3
 340 00ee FFF7FEFF 		bl	mpu6050_calibration
 102:./Src/mpu6050.c **** }
 341              		.loc 1 102 1
 342 00f2 00BF     		nop
 343 00f4 1037     		adds	r7, r7, #16
 344              	.LCFI10:
 345              		.cfi_def_cfa_offset 8
 346 00f6 BD46     		mov	sp, r7
 347              	.LCFI11:
 348              		.cfi_def_cfa_register 13
 349              		@ sp needed
 350 00f8 80BD     		pop	{r7, pc}
 351              	.L15:
 352 00fa 00BF     		.align	2
 353              	.L14:
 354 00fc 00540040 		.word	1073763328
 355 0100 00000000 		.word	accel_unit
 356 0104 D34D6210 		.word	274877907
 357 0108 00000000 		.word	gyro_unit
 358              		.cfi_endproc
 359              	.LFE2:
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 9


 361              		.section	.text.mpu6050_calibration,"ax",%progbits
 362              		.align	1
 363              		.syntax unified
 364              		.thumb
 365              		.thumb_func
 367              	mpu6050_calibration:
 368              	.LFB3:
 103:./Src/mpu6050.c **** 
 104:./Src/mpu6050.c **** static void mpu6050_calibration(uint8_t div)
 105:./Src/mpu6050.c **** {
 369              		.loc 1 105 1
 370              		.cfi_startproc
 371              		@ args = 0, pretend = 0, frame = 64
 372              		@ frame_needed = 1, uses_anonymous_args = 0
 373 0000 80B5     		push	{r7, lr}
 374              	.LCFI12:
 375              		.cfi_def_cfa_offset 8
 376              		.cfi_offset 7, -8
 377              		.cfi_offset 14, -4
 378 0002 92B0     		sub	sp, sp, #72
 379              	.LCFI13:
 380              		.cfi_def_cfa_offset 80
 381 0004 02AF     		add	r7, sp, #8
 382              	.LCFI14:
 383              		.cfi_def_cfa 7, 72
 384 0006 0346     		mov	r3, r0
 385 0008 FB71     		strb	r3, [r7, #7]
 106:./Src/mpu6050.c **** 	int16_t data[6] = {0};
 386              		.loc 1 106 10
 387 000a 07F12403 		add	r3, r7, #36
 388 000e 0022     		movs	r2, #0
 389 0010 1A60     		str	r2, [r3]
 390 0012 5A60     		str	r2, [r3, #4]
 391 0014 9A60     		str	r2, [r3, #8]
 107:./Src/mpu6050.c **** 	int32_t sum[6] = {0};
 392              		.loc 1 107 10
 393 0016 07F10C03 		add	r3, r7, #12
 394 001a 0022     		movs	r2, #0
 395 001c 1A60     		str	r2, [r3]
 396 001e 5A60     		str	r2, [r3, #4]
 397 0020 9A60     		str	r2, [r3, #8]
 398 0022 DA60     		str	r2, [r3, #12]
 399 0024 1A61     		str	r2, [r3, #16]
 400 0026 5A61     		str	r2, [r3, #20]
 108:./Src/mpu6050.c **** 	uint16_t fifo_count = 0;
 401              		.loc 1 108 11
 402 0028 0023     		movs	r3, #0
 403 002a 7B81     		strh	r3, [r7, #10]	@ movhi
 109:./Src/mpu6050.c **** 	uint16_t packet_count = 0;
 404              		.loc 1 109 11
 405 002c 0023     		movs	r3, #0
 406 002e 7B86     		strh	r3, [r7, #50]	@ movhi
 110:./Src/mpu6050.c **** 	uint8_t tmp = MPU6050_USER_CTRL_FIFO_EN;
 407              		.loc 1 110 10
 408 0030 4023     		movs	r3, #64
 409 0032 7B72     		strb	r3, [r7, #9]
 111:./Src/mpu6050.c **** 
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 10


 112:./Src/mpu6050.c **** 	// Enable FIFO
 113:./Src/mpu6050.c **** 	i2c_write_reg(I2C1, MPU6050_ADDRESS, MPU6050_USER_CTRL, 1, &tmp);
 410              		.loc 1 113 2
 411 0034 07F10903 		add	r3, r7, #9
 412 0038 0093     		str	r3, [sp]
 413 003a 0123     		movs	r3, #1
 414 003c 6A22     		movs	r2, #106
 415 003e 6821     		movs	r1, #104
 416 0040 4F48     		ldr	r0, .L23
 417 0042 FFF7FEFF 		bl	i2c_write_reg
 114:./Src/mpu6050.c **** 	// Enable gyro and accel FIFO
 115:./Src/mpu6050.c **** 	tmp = 0x78;
 418              		.loc 1 115 6
 419 0046 7823     		movs	r3, #120
 420 0048 7B72     		strb	r3, [r7, #9]
 116:./Src/mpu6050.c **** 	i2c_write_reg(I2C1, MPU6050_ADDRESS, MPU6050_FIFO_EN, 1, &tmp);
 421              		.loc 1 116 2
 422 004a 07F10903 		add	r3, r7, #9
 423 004e 0093     		str	r3, [sp]
 424 0050 0123     		movs	r3, #1
 425 0052 2322     		movs	r2, #35
 426 0054 6821     		movs	r1, #104
 427 0056 4A48     		ldr	r0, .L23
 428 0058 FFF7FEFF 		bl	i2c_write_reg
 117:./Src/mpu6050.c **** 	// According to sample division to delay time
 118:./Src/mpu6050.c **** 	systick_delay_ms(40 * div);
 429              		.loc 1 118 2
 430 005c FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 431 005e 1346     		mov	r3, r2
 432 0060 9B00     		lsls	r3, r3, #2
 433 0062 1344     		add	r3, r3, r2
 434 0064 DB00     		lsls	r3, r3, #3
 435 0066 1846     		mov	r0, r3
 436 0068 FFF7FEFF 		bl	systick_delay_ms
 119:./Src/mpu6050.c **** 	// Disable accel and gyro FIFO
 120:./Src/mpu6050.c **** 	tmp = 0;
 437              		.loc 1 120 6
 438 006c 0023     		movs	r3, #0
 439 006e 7B72     		strb	r3, [r7, #9]
 121:./Src/mpu6050.c **** 	i2c_write_reg(I2C1, MPU6050_ADDRESS, MPU6050_FIFO_EN, 1, &tmp);
 440              		.loc 1 121 2
 441 0070 07F10903 		add	r3, r7, #9
 442 0074 0093     		str	r3, [sp]
 443 0076 0123     		movs	r3, #1
 444 0078 2322     		movs	r2, #35
 445 007a 6821     		movs	r1, #104
 446 007c 4048     		ldr	r0, .L23
 447 007e FFF7FEFF 		bl	i2c_write_reg
 122:./Src/mpu6050.c **** 	// Read FIFO sample count
 123:./Src/mpu6050.c **** 	i2c_read_reg(I2C1, MPU6050_ADDRESS, MPU6050_FIFO_COUNTH, 2,
 448              		.loc 1 123 2
 449 0082 07F10A03 		add	r3, r7, #10
 450 0086 0093     		str	r3, [sp]
 451 0088 0223     		movs	r3, #2
 452 008a 7222     		movs	r2, #114
 453 008c 6821     		movs	r1, #104
 454 008e 3C48     		ldr	r0, .L23
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 11


 455 0090 FFF7FEFF 		bl	i2c_read_reg
 124:./Src/mpu6050.c **** 		     (uint8_t *)&fifo_count);
 125:./Src/mpu6050.c **** 	fifo_count = (fifo_count << 8) | (fifo_count >> 8);
 456              		.loc 1 125 27
 457 0094 7B89     		ldrh	r3, [r7, #10]
 458 0096 1B02     		lsls	r3, r3, #8
 459              		.loc 1 125 33
 460 0098 1AB2     		sxth	r2, r3
 461 009a 7B89     		ldrh	r3, [r7, #10]
 462 009c 1B0A     		lsrs	r3, r3, #8
 463 009e 9BB2     		uxth	r3, r3
 464 00a0 1BB2     		sxth	r3, r3
 465 00a2 1343     		orrs	r3, r3, r2
 466 00a4 1BB2     		sxth	r3, r3
 467 00a6 9BB2     		uxth	r3, r3
 468              		.loc 1 125 13
 469 00a8 7B81     		strh	r3, [r7, #10]	@ movhi
 126:./Src/mpu6050.c **** 	packet_count = fifo_count / 12;
 470              		.loc 1 126 15
 471 00aa 7B89     		ldrh	r3, [r7, #10]
 472 00ac 354A     		ldr	r2, .L23+4
 473 00ae A2FB0323 		umull	r2, r3, r2, r3
 474 00b2 DB08     		lsrs	r3, r3, #3
 475 00b4 7B86     		strh	r3, [r7, #50]	@ movhi
 476              	.LBB2:
 127:./Src/mpu6050.c **** 	// Read FIFO data and calculate offset
 128:./Src/mpu6050.c **** 	for (int i = 0; i < packet_count; i++) {
 477              		.loc 1 128 11
 478 00b6 0023     		movs	r3, #0
 479 00b8 FB63     		str	r3, [r7, #60]
 480              		.loc 1 128 2
 481 00ba 41E0     		b	.L17
 482              	.L20:
 129:./Src/mpu6050.c **** 		i2c_read_reg(I2C1, MPU6050_ADDRESS, MPU6050_FIFO_R_W, 12,
 483              		.loc 1 129 3
 484 00bc 07F12403 		add	r3, r7, #36
 485 00c0 0093     		str	r3, [sp]
 486 00c2 0C23     		movs	r3, #12
 487 00c4 7422     		movs	r2, #116
 488 00c6 6821     		movs	r1, #104
 489 00c8 2D48     		ldr	r0, .L23
 490 00ca FFF7FEFF 		bl	i2c_read_reg
 491              	.LBB3:
 130:./Src/mpu6050.c **** 			     (uint8_t *)data);
 131:./Src/mpu6050.c **** 
 132:./Src/mpu6050.c **** 		for (int j = 0; j < 6; j++) {
 492              		.loc 1 132 12
 493 00ce 0023     		movs	r3, #0
 494 00d0 BB63     		str	r3, [r7, #56]
 495              		.loc 1 132 3
 496 00d2 2FE0     		b	.L18
 497              	.L19:
 133:./Src/mpu6050.c **** 			data[j] = (data[j] << 8) | ((data[j] >> 8) & 0xFF);
 498              		.loc 1 133 19 discriminator 3
 499 00d4 BB6B     		ldr	r3, [r7, #56]
 500 00d6 5B00     		lsls	r3, r3, #1
 501 00d8 4033     		adds	r3, r3, #64
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 12


 502 00da 3B44     		add	r3, r3, r7
 503 00dc 33F91C3C 		ldrsh	r3, [r3, #-28]
 504              		.loc 1 133 23 discriminator 3
 505 00e0 1B02     		lsls	r3, r3, #8
 506              		.loc 1 133 29 discriminator 3
 507 00e2 1AB2     		sxth	r2, r3
 508              		.loc 1 133 37 discriminator 3
 509 00e4 BB6B     		ldr	r3, [r7, #56]
 510 00e6 5B00     		lsls	r3, r3, #1
 511 00e8 4033     		adds	r3, r3, #64
 512 00ea 3B44     		add	r3, r3, r7
 513 00ec 33F91C3C 		ldrsh	r3, [r3, #-28]
 514              		.loc 1 133 47 discriminator 3
 515 00f0 9BB2     		uxth	r3, r3
 516 00f2 1B0A     		lsrs	r3, r3, #8
 517 00f4 9BB2     		uxth	r3, r3
 518 00f6 1BB2     		sxth	r3, r3
 519              		.loc 1 133 29 discriminator 3
 520 00f8 1343     		orrs	r3, r3, r2
 521 00fa 1AB2     		sxth	r2, r3
 522              		.loc 1 133 12 discriminator 3
 523 00fc BB6B     		ldr	r3, [r7, #56]
 524 00fe 5B00     		lsls	r3, r3, #1
 525 0100 4033     		adds	r3, r3, #64
 526 0102 3B44     		add	r3, r3, r7
 527 0104 23F81C2C 		strh	r2, [r3, #-28]	@ movhi
 134:./Src/mpu6050.c **** 			sum[j] += (int32_t)data[j];
 528              		.loc 1 134 11 discriminator 3
 529 0108 BB6B     		ldr	r3, [r7, #56]
 530 010a 9B00     		lsls	r3, r3, #2
 531 010c 4033     		adds	r3, r3, #64
 532 010e 3B44     		add	r3, r3, r7
 533 0110 53F8342C 		ldr	r2, [r3, #-52]
 534              		.loc 1 134 27 discriminator 3
 535 0114 BB6B     		ldr	r3, [r7, #56]
 536 0116 5B00     		lsls	r3, r3, #1
 537 0118 4033     		adds	r3, r3, #64
 538 011a 3B44     		add	r3, r3, r7
 539 011c 33F91C3C 		ldrsh	r3, [r3, #-28]
 540              		.loc 1 134 11 discriminator 3
 541 0120 1A44     		add	r2, r2, r3
 542 0122 BB6B     		ldr	r3, [r7, #56]
 543 0124 9B00     		lsls	r3, r3, #2
 544 0126 4033     		adds	r3, r3, #64
 545 0128 3B44     		add	r3, r3, r7
 546 012a 43F8342C 		str	r2, [r3, #-52]
 132:./Src/mpu6050.c **** 			data[j] = (data[j] << 8) | ((data[j] >> 8) & 0xFF);
 547              		.loc 1 132 27 discriminator 3
 548 012e BB6B     		ldr	r3, [r7, #56]
 549 0130 0133     		adds	r3, r3, #1
 550 0132 BB63     		str	r3, [r7, #56]
 551              	.L18:
 132:./Src/mpu6050.c **** 			data[j] = (data[j] << 8) | ((data[j] >> 8) & 0xFF);
 552              		.loc 1 132 3 discriminator 1
 553 0134 BB6B     		ldr	r3, [r7, #56]
 554 0136 052B     		cmp	r3, #5
 555 0138 CCDD     		ble	.L19
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 13


 556              	.LBE3:
 128:./Src/mpu6050.c **** 		i2c_read_reg(I2C1, MPU6050_ADDRESS, MPU6050_FIFO_R_W, 12,
 557              		.loc 1 128 37 discriminator 2
 558 013a FB6B     		ldr	r3, [r7, #60]
 559 013c 0133     		adds	r3, r3, #1
 560 013e FB63     		str	r3, [r7, #60]
 561              	.L17:
 128:./Src/mpu6050.c **** 		i2c_read_reg(I2C1, MPU6050_ADDRESS, MPU6050_FIFO_R_W, 12,
 562              		.loc 1 128 20 discriminator 1
 563 0140 7B8E     		ldrh	r3, [r7, #50]
 128:./Src/mpu6050.c **** 		i2c_read_reg(I2C1, MPU6050_ADDRESS, MPU6050_FIFO_R_W, 12,
 564              		.loc 1 128 2 discriminator 1
 565 0142 FA6B     		ldr	r2, [r7, #60]
 566 0144 9A42     		cmp	r2, r3
 567 0146 B9DB     		blt	.L20
 568              	.LBE2:
 569              	.LBB4:
 135:./Src/mpu6050.c **** 		}
 136:./Src/mpu6050.c **** 	}
 137:./Src/mpu6050.c **** 
 138:./Src/mpu6050.c **** 	for (int i = 0; i < 6; i++) {
 570              		.loc 1 138 11
 571 0148 0023     		movs	r3, #0
 572 014a 7B63     		str	r3, [r7, #52]
 573              		.loc 1 138 2
 574 014c 10E0     		b	.L21
 575              	.L22:
 139:./Src/mpu6050.c **** 		offset[i] = (int16_t)(sum[i] / packet_count);
 576              		.loc 1 139 28 discriminator 3
 577 014e 7B6B     		ldr	r3, [r7, #52]
 578 0150 9B00     		lsls	r3, r3, #2
 579 0152 4033     		adds	r3, r3, #64
 580 0154 3B44     		add	r3, r3, r7
 581 0156 53F8342C 		ldr	r2, [r3, #-52]
 582              		.loc 1 139 32 discriminator 3
 583 015a 7B8E     		ldrh	r3, [r7, #50]
 584 015c 92FBF3F3 		sdiv	r3, r2, r3
 585              		.loc 1 139 15 discriminator 3
 586 0160 19B2     		sxth	r1, r3
 587              		.loc 1 139 13 discriminator 3
 588 0162 094A     		ldr	r2, .L23+8
 589 0164 7B6B     		ldr	r3, [r7, #52]
 590 0166 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 138:./Src/mpu6050.c **** 		offset[i] = (int16_t)(sum[i] / packet_count);
 591              		.loc 1 138 26 discriminator 3
 592 016a 7B6B     		ldr	r3, [r7, #52]
 593 016c 0133     		adds	r3, r3, #1
 594 016e 7B63     		str	r3, [r7, #52]
 595              	.L21:
 138:./Src/mpu6050.c **** 		offset[i] = (int16_t)(sum[i] / packet_count);
 596              		.loc 1 138 2 discriminator 1
 597 0170 7B6B     		ldr	r3, [r7, #52]
 598 0172 052B     		cmp	r3, #5
 599 0174 EBDD     		ble	.L22
 600              	.LBE4:
 140:./Src/mpu6050.c **** 	}
 141:./Src/mpu6050.c **** }
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 14


 601              		.loc 1 141 1
 602 0176 00BF     		nop
 603 0178 00BF     		nop
 604 017a 4037     		adds	r7, r7, #64
 605              	.LCFI15:
 606              		.cfi_def_cfa_offset 8
 607 017c BD46     		mov	sp, r7
 608              	.LCFI16:
 609              		.cfi_def_cfa_register 13
 610              		@ sp needed
 611 017e 80BD     		pop	{r7, pc}
 612              	.L24:
 613              		.align	2
 614              	.L23:
 615 0180 00540040 		.word	1073763328
 616 0184 ABAAAAAA 		.word	-1431655765
 617 0188 00000000 		.word	offset
 618              		.cfi_endproc
 619              	.LFE3:
 621              		.section	.text.mpu6050_get_all,"ax",%progbits
 622              		.align	1
 623              		.global	mpu6050_get_all
 624              		.syntax unified
 625              		.thumb
 626              		.thumb_func
 628              	mpu6050_get_all:
 629              	.LFB4:
 142:./Src/mpu6050.c **** 
 143:./Src/mpu6050.c **** /**
 144:./Src/mpu6050.c ****  * @brief data from i2c read function: X_H > X_L > Y_H > Y_L > Z_H > Z_L
 145:./Src/mpu6050.c ****  * 	  reverse order: X_L > X_H > Y_L > Y_H > Z_L > Z_H
 146:./Src/mpu6050.c ****  * 	  int16 data order: X > Y > Z
 147:./Src/mpu6050.c ****  *
 148:./Src/mpu6050.c ****  * @param data
 149:./Src/mpu6050.c ****  * 	  accelerometer: [0:2]
 150:./Src/mpu6050.c ****  * 	  temperature: [3]
 151:./Src/mpu6050.c ****  * 	  gyroscope: [4:6]
 152:./Src/mpu6050.c ****  */
 153:./Src/mpu6050.c **** void mpu6050_get_all(float *data)
 154:./Src/mpu6050.c **** {
 630              		.loc 1 154 1
 631              		.cfi_startproc
 632              		@ args = 0, pretend = 0, frame = 32
 633              		@ frame_needed = 1, uses_anonymous_args = 0
 634 0000 80B5     		push	{r7, lr}
 635              	.LCFI17:
 636              		.cfi_def_cfa_offset 8
 637              		.cfi_offset 7, -8
 638              		.cfi_offset 14, -4
 639 0002 8AB0     		sub	sp, sp, #40
 640              	.LCFI18:
 641              		.cfi_def_cfa_offset 48
 642 0004 02AF     		add	r7, sp, #8
 643              	.LCFI19:
 644              		.cfi_def_cfa 7, 40
 645 0006 7860     		str	r0, [r7, #4]
 155:./Src/mpu6050.c **** 	int16_t tmp[7] = {0};
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 15


 646              		.loc 1 155 10
 647 0008 07F10C03 		add	r3, r7, #12
 648 000c 0022     		movs	r2, #0
 649 000e 1A60     		str	r2, [r3]
 650 0010 5A60     		str	r2, [r3, #4]
 651 0012 9A60     		str	r2, [r3, #8]
 652 0014 9A81     		strh	r2, [r3, #12]	@ movhi
 156:./Src/mpu6050.c **** 
 157:./Src/mpu6050.c **** 	i2c_read_reg(I2C1, MPU6050_ADDRESS, MPU6050_ACCEL_XOUTH, 14,
 653              		.loc 1 157 2
 654 0016 07F10C03 		add	r3, r7, #12
 655 001a 0093     		str	r3, [sp]
 656 001c 0E23     		movs	r3, #14
 657 001e 3B22     		movs	r2, #59
 658 0020 6821     		movs	r1, #104
 659 0022 5548     		ldr	r0, .L31+8
 660 0024 FFF7FEFF 		bl	i2c_read_reg
 661              	.LBB5:
 158:./Src/mpu6050.c **** 		     (uint8_t *)tmp);
 159:./Src/mpu6050.c **** 
 160:./Src/mpu6050.c **** 	for (int i = 0; i < 7; i++) {
 662              		.loc 1 160 11
 663 0028 0023     		movs	r3, #0
 664 002a FB61     		str	r3, [r7, #28]
 665              		.loc 1 160 2
 666 002c 95E0     		b	.L26
 667              	.L30:
 161:./Src/mpu6050.c **** 		tmp[i] = (tmp[i] << 8) | ((tmp[i] >> 8) & 0xFF);
 668              		.loc 1 161 16
 669 002e FB69     		ldr	r3, [r7, #28]
 670 0030 5B00     		lsls	r3, r3, #1
 671 0032 2033     		adds	r3, r3, #32
 672 0034 3B44     		add	r3, r3, r7
 673 0036 33F9143C 		ldrsh	r3, [r3, #-20]
 674              		.loc 1 161 20
 675 003a 1B02     		lsls	r3, r3, #8
 676              		.loc 1 161 26
 677 003c 1AB2     		sxth	r2, r3
 678              		.loc 1 161 33
 679 003e FB69     		ldr	r3, [r7, #28]
 680 0040 5B00     		lsls	r3, r3, #1
 681 0042 2033     		adds	r3, r3, #32
 682 0044 3B44     		add	r3, r3, r7
 683 0046 33F9143C 		ldrsh	r3, [r3, #-20]
 684              		.loc 1 161 43
 685 004a 9BB2     		uxth	r3, r3
 686 004c 1B0A     		lsrs	r3, r3, #8
 687 004e 9BB2     		uxth	r3, r3
 688 0050 1BB2     		sxth	r3, r3
 689              		.loc 1 161 26
 690 0052 1343     		orrs	r3, r3, r2
 691 0054 1AB2     		sxth	r2, r3
 692              		.loc 1 161 10
 693 0056 FB69     		ldr	r3, [r7, #28]
 694 0058 5B00     		lsls	r3, r3, #1
 695 005a 2033     		adds	r3, r3, #32
 696 005c 3B44     		add	r3, r3, r7
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 16


 697 005e 23F8142C 		strh	r2, [r3, #-20]	@ movhi
 162:./Src/mpu6050.c **** 
 163:./Src/mpu6050.c **** 		if (i < 3) {
 698              		.loc 1 163 6
 699 0062 FB69     		ldr	r3, [r7, #28]
 700 0064 022B     		cmp	r3, #2
 701 0066 2ADC     		bgt	.L27
 164:./Src/mpu6050.c **** 			tmp[i] -= offset[i];
 702              		.loc 1 164 11
 703 0068 FB69     		ldr	r3, [r7, #28]
 704 006a 5B00     		lsls	r3, r3, #1
 705 006c 2033     		adds	r3, r3, #32
 706 006e 3B44     		add	r3, r3, r7
 707 0070 33F9143C 		ldrsh	r3, [r3, #-20]
 708 0074 9AB2     		uxth	r2, r3
 709              		.loc 1 164 20
 710 0076 4149     		ldr	r1, .L31+12
 711 0078 FB69     		ldr	r3, [r7, #28]
 712 007a 31F91330 		ldrsh	r3, [r1, r3, lsl #1]
 713 007e 9BB2     		uxth	r3, r3
 714              		.loc 1 164 11
 715 0080 D31A     		subs	r3, r2, r3
 716 0082 9BB2     		uxth	r3, r3
 717 0084 1AB2     		sxth	r2, r3
 718 0086 FB69     		ldr	r3, [r7, #28]
 719 0088 5B00     		lsls	r3, r3, #1
 720 008a 2033     		adds	r3, r3, #32
 721 008c 3B44     		add	r3, r3, r7
 722 008e 23F8142C 		strh	r2, [r3, #-20]	@ movhi
 165:./Src/mpu6050.c **** 			data[i] = (float)tmp[i] * accel_unit;
 723              		.loc 1 165 24
 724 0092 FB69     		ldr	r3, [r7, #28]
 725 0094 5B00     		lsls	r3, r3, #1
 726 0096 2033     		adds	r3, r3, #32
 727 0098 3B44     		add	r3, r3, r7
 728 009a 33F9143C 		ldrsh	r3, [r3, #-20]
 729              		.loc 1 165 14
 730 009e 07EE903A 		vmov	s15, r3	@ int
 731 00a2 B8EEE77A 		vcvt.f32.s32	s14, s15
 732              		.loc 1 165 28
 733 00a6 364B     		ldr	r3, .L31+16
 734 00a8 D3ED007A 		vldr.32	s15, [r3]
 735              		.loc 1 165 8
 736 00ac FB69     		ldr	r3, [r7, #28]
 737 00ae 9B00     		lsls	r3, r3, #2
 738 00b0 7A68     		ldr	r2, [r7, #4]
 739 00b2 1344     		add	r3, r3, r2
 740              		.loc 1 165 28
 741 00b4 67EE277A 		vmul.f32	s15, s14, s15
 742              		.loc 1 165 12
 743 00b8 C3ED007A 		vstr.32	s15, [r3]
 744 00bc 4AE0     		b	.L28
 745              	.L27:
 166:./Src/mpu6050.c **** 		} else if (i == 3) {
 746              		.loc 1 166 13
 747 00be FB69     		ldr	r3, [r7, #28]
 748 00c0 032B     		cmp	r3, #3
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 17


 749 00c2 1CD1     		bne	.L29
 167:./Src/mpu6050.c **** 			data[i] = (float)tmp[i] * 0.00294117647F + 36.53;
 750              		.loc 1 167 24
 751 00c4 FB69     		ldr	r3, [r7, #28]
 752 00c6 5B00     		lsls	r3, r3, #1
 753 00c8 2033     		adds	r3, r3, #32
 754 00ca 3B44     		add	r3, r3, r7
 755 00cc 33F9143C 		ldrsh	r3, [r3, #-20]
 756              		.loc 1 167 14
 757 00d0 07EE903A 		vmov	s15, r3	@ int
 758 00d4 F8EEE77A 		vcvt.f32.s32	s15, s15
 759              		.loc 1 167 28
 760 00d8 9FED2A7A 		vldr.32	s14, .L31+20
 761 00dc 67EE877A 		vmul.f32	s15, s15, s14
 762 00e0 B7EEE77A 		vcvt.f64.f32	d7, s15
 763              		.loc 1 167 45
 764 00e4 9FED226B 		vldr.64	d6, .L31
 765 00e8 37EE067B 		vadd.f64	d7, d7, d6
 766              		.loc 1 167 8
 767 00ec FB69     		ldr	r3, [r7, #28]
 768 00ee 9B00     		lsls	r3, r3, #2
 769 00f0 7A68     		ldr	r2, [r7, #4]
 770 00f2 1344     		add	r3, r3, r2
 771              		.loc 1 167 45
 772 00f4 F7EEC77B 		vcvt.f32.f64	s15, d7
 773              		.loc 1 167 12
 774 00f8 C3ED007A 		vstr.32	s15, [r3]
 775 00fc 2AE0     		b	.L28
 776              	.L29:
 168:./Src/mpu6050.c **** 		} else {
 169:./Src/mpu6050.c **** 			tmp[i] -= offset[i - 1];
 777              		.loc 1 169 11
 778 00fe FB69     		ldr	r3, [r7, #28]
 779 0100 5B00     		lsls	r3, r3, #1
 780 0102 2033     		adds	r3, r3, #32
 781 0104 3B44     		add	r3, r3, r7
 782 0106 33F9143C 		ldrsh	r3, [r3, #-20]
 783 010a 9AB2     		uxth	r2, r3
 784              		.loc 1 169 23
 785 010c FB69     		ldr	r3, [r7, #28]
 786 010e 013B     		subs	r3, r3, #1
 787              		.loc 1 169 20
 788 0110 1A49     		ldr	r1, .L31+12
 789 0112 31F91330 		ldrsh	r3, [r1, r3, lsl #1]
 790 0116 9BB2     		uxth	r3, r3
 791              		.loc 1 169 11
 792 0118 D31A     		subs	r3, r2, r3
 793 011a 9BB2     		uxth	r3, r3
 794 011c 1AB2     		sxth	r2, r3
 795 011e FB69     		ldr	r3, [r7, #28]
 796 0120 5B00     		lsls	r3, r3, #1
 797 0122 2033     		adds	r3, r3, #32
 798 0124 3B44     		add	r3, r3, r7
 799 0126 23F8142C 		strh	r2, [r3, #-20]	@ movhi
 170:./Src/mpu6050.c **** 			data[i] = (float)tmp[i] * gyro_unit;
 800              		.loc 1 170 24
 801 012a FB69     		ldr	r3, [r7, #28]
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 18


 802 012c 5B00     		lsls	r3, r3, #1
 803 012e 2033     		adds	r3, r3, #32
 804 0130 3B44     		add	r3, r3, r7
 805 0132 33F9143C 		ldrsh	r3, [r3, #-20]
 806              		.loc 1 170 14
 807 0136 07EE903A 		vmov	s15, r3	@ int
 808 013a B8EEE77A 		vcvt.f32.s32	s14, s15
 809              		.loc 1 170 28
 810 013e 124B     		ldr	r3, .L31+24
 811 0140 D3ED007A 		vldr.32	s15, [r3]
 812              		.loc 1 170 8
 813 0144 FB69     		ldr	r3, [r7, #28]
 814 0146 9B00     		lsls	r3, r3, #2
 815 0148 7A68     		ldr	r2, [r7, #4]
 816 014a 1344     		add	r3, r3, r2
 817              		.loc 1 170 28
 818 014c 67EE277A 		vmul.f32	s15, s14, s15
 819              		.loc 1 170 12
 820 0150 C3ED007A 		vstr.32	s15, [r3]
 821              	.L28:
 160:./Src/mpu6050.c **** 		tmp[i] = (tmp[i] << 8) | ((tmp[i] >> 8) & 0xFF);
 822              		.loc 1 160 26 discriminator 2
 823 0154 FB69     		ldr	r3, [r7, #28]
 824 0156 0133     		adds	r3, r3, #1
 825 0158 FB61     		str	r3, [r7, #28]
 826              	.L26:
 160:./Src/mpu6050.c **** 		tmp[i] = (tmp[i] << 8) | ((tmp[i] >> 8) & 0xFF);
 827              		.loc 1 160 2 discriminator 1
 828 015a FB69     		ldr	r3, [r7, #28]
 829 015c 062B     		cmp	r3, #6
 830 015e 7FF766AF 		ble	.L30
 831              	.LBE5:
 171:./Src/mpu6050.c **** 		}
 172:./Src/mpu6050.c **** 	}
 173:./Src/mpu6050.c **** }
 832              		.loc 1 173 1
 833 0162 00BF     		nop
 834 0164 00BF     		nop
 835 0166 2037     		adds	r7, r7, #32
 836              	.LCFI20:
 837              		.cfi_def_cfa_offset 8
 838 0168 BD46     		mov	sp, r7
 839              	.LCFI21:
 840              		.cfi_def_cfa_register 13
 841              		@ sp needed
 842 016a 80BD     		pop	{r7, pc}
 843              	.L32:
 844 016c AFF30080 		.align	3
 845              	.L31:
 846 0170 A4703D0A 		.word	171798692
 847 0174 D7434240 		.word	1078084567
 848 0178 00540040 		.word	1073763328
 849 017c 00000000 		.word	offset
 850 0180 00000000 		.word	accel_unit
 851 0184 C1C0403B 		.word	994099393
 852 0188 00000000 		.word	gyro_unit
 853              		.cfi_endproc
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 19


 854              	.LFE4:
 856              		.section	.text.mpu6050_get_accel,"ax",%progbits
 857              		.align	1
 858              		.global	mpu6050_get_accel
 859              		.syntax unified
 860              		.thumb
 861              		.thumb_func
 863              	mpu6050_get_accel:
 864              	.LFB5:
 174:./Src/mpu6050.c **** 
 175:./Src/mpu6050.c **** void mpu6050_get_accel(float *data)
 176:./Src/mpu6050.c **** {
 865              		.loc 1 176 1
 866              		.cfi_startproc
 867              		@ args = 0, pretend = 0, frame = 24
 868              		@ frame_needed = 1, uses_anonymous_args = 0
 869 0000 80B5     		push	{r7, lr}
 870              	.LCFI22:
 871              		.cfi_def_cfa_offset 8
 872              		.cfi_offset 7, -8
 873              		.cfi_offset 14, -4
 874 0002 88B0     		sub	sp, sp, #32
 875              	.LCFI23:
 876              		.cfi_def_cfa_offset 40
 877 0004 02AF     		add	r7, sp, #8
 878              	.LCFI24:
 879              		.cfi_def_cfa 7, 32
 880 0006 7860     		str	r0, [r7, #4]
 177:./Src/mpu6050.c **** 	int16_t tmp[3] = {0};
 881              		.loc 1 177 10
 882 0008 07F10C03 		add	r3, r7, #12
 883 000c 0022     		movs	r2, #0
 884 000e 1A60     		str	r2, [r3]
 885 0010 9A80     		strh	r2, [r3, #4]	@ movhi
 178:./Src/mpu6050.c **** 
 179:./Src/mpu6050.c **** 	i2c_read_reg(I2C1, MPU6050_ADDRESS, MPU6050_ACCEL_XOUTH, 6,
 886              		.loc 1 179 2
 887 0012 07F10C03 		add	r3, r7, #12
 888 0016 0093     		str	r3, [sp]
 889 0018 0623     		movs	r3, #6
 890 001a 3B22     		movs	r2, #59
 891 001c 6821     		movs	r1, #104
 892 001e 2A48     		ldr	r0, .L36
 893 0020 FFF7FEFF 		bl	i2c_read_reg
 894              	.LBB6:
 180:./Src/mpu6050.c **** 		     (uint8_t *)tmp);
 181:./Src/mpu6050.c **** 
 182:./Src/mpu6050.c **** 	for (int i = 0; i < 3; i++) {
 895              		.loc 1 182 11
 896 0024 0023     		movs	r3, #0
 897 0026 7B61     		str	r3, [r7, #20]
 898              		.loc 1 182 2
 899 0028 46E0     		b	.L34
 900              	.L35:
 183:./Src/mpu6050.c **** 		tmp[i] = (tmp[i] << 8) | ((tmp[i] >> 8) & 0xFF);
 901              		.loc 1 183 16 discriminator 3
 902 002a 7B69     		ldr	r3, [r7, #20]
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 20


 903 002c 5B00     		lsls	r3, r3, #1
 904 002e 1833     		adds	r3, r3, #24
 905 0030 3B44     		add	r3, r3, r7
 906 0032 33F90C3C 		ldrsh	r3, [r3, #-12]
 907              		.loc 1 183 20 discriminator 3
 908 0036 1B02     		lsls	r3, r3, #8
 909              		.loc 1 183 26 discriminator 3
 910 0038 1AB2     		sxth	r2, r3
 911              		.loc 1 183 33 discriminator 3
 912 003a 7B69     		ldr	r3, [r7, #20]
 913 003c 5B00     		lsls	r3, r3, #1
 914 003e 1833     		adds	r3, r3, #24
 915 0040 3B44     		add	r3, r3, r7
 916 0042 33F90C3C 		ldrsh	r3, [r3, #-12]
 917              		.loc 1 183 43 discriminator 3
 918 0046 9BB2     		uxth	r3, r3
 919 0048 1B0A     		lsrs	r3, r3, #8
 920 004a 9BB2     		uxth	r3, r3
 921 004c 1BB2     		sxth	r3, r3
 922              		.loc 1 183 26 discriminator 3
 923 004e 1343     		orrs	r3, r3, r2
 924 0050 1AB2     		sxth	r2, r3
 925              		.loc 1 183 10 discriminator 3
 926 0052 7B69     		ldr	r3, [r7, #20]
 927 0054 5B00     		lsls	r3, r3, #1
 928 0056 1833     		adds	r3, r3, #24
 929 0058 3B44     		add	r3, r3, r7
 930 005a 23F80C2C 		strh	r2, [r3, #-12]	@ movhi
 184:./Src/mpu6050.c **** 		tmp[i] -= offset[i];
 931              		.loc 1 184 10 discriminator 3
 932 005e 7B69     		ldr	r3, [r7, #20]
 933 0060 5B00     		lsls	r3, r3, #1
 934 0062 1833     		adds	r3, r3, #24
 935 0064 3B44     		add	r3, r3, r7
 936 0066 33F90C3C 		ldrsh	r3, [r3, #-12]
 937 006a 9AB2     		uxth	r2, r3
 938              		.loc 1 184 19 discriminator 3
 939 006c 1749     		ldr	r1, .L36+4
 940 006e 7B69     		ldr	r3, [r7, #20]
 941 0070 31F91330 		ldrsh	r3, [r1, r3, lsl #1]
 942 0074 9BB2     		uxth	r3, r3
 943              		.loc 1 184 10 discriminator 3
 944 0076 D31A     		subs	r3, r2, r3
 945 0078 9BB2     		uxth	r3, r3
 946 007a 1AB2     		sxth	r2, r3
 947 007c 7B69     		ldr	r3, [r7, #20]
 948 007e 5B00     		lsls	r3, r3, #1
 949 0080 1833     		adds	r3, r3, #24
 950 0082 3B44     		add	r3, r3, r7
 951 0084 23F80C2C 		strh	r2, [r3, #-12]	@ movhi
 185:./Src/mpu6050.c **** 		data[i] = (float)tmp[i] * accel_unit;
 952              		.loc 1 185 23 discriminator 3
 953 0088 7B69     		ldr	r3, [r7, #20]
 954 008a 5B00     		lsls	r3, r3, #1
 955 008c 1833     		adds	r3, r3, #24
 956 008e 3B44     		add	r3, r3, r7
 957 0090 33F90C3C 		ldrsh	r3, [r3, #-12]
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 21


 958              		.loc 1 185 13 discriminator 3
 959 0094 07EE903A 		vmov	s15, r3	@ int
 960 0098 B8EEE77A 		vcvt.f32.s32	s14, s15
 961              		.loc 1 185 27 discriminator 3
 962 009c 0C4B     		ldr	r3, .L36+8
 963 009e D3ED007A 		vldr.32	s15, [r3]
 964              		.loc 1 185 7 discriminator 3
 965 00a2 7B69     		ldr	r3, [r7, #20]
 966 00a4 9B00     		lsls	r3, r3, #2
 967 00a6 7A68     		ldr	r2, [r7, #4]
 968 00a8 1344     		add	r3, r3, r2
 969              		.loc 1 185 27 discriminator 3
 970 00aa 67EE277A 		vmul.f32	s15, s14, s15
 971              		.loc 1 185 11 discriminator 3
 972 00ae C3ED007A 		vstr.32	s15, [r3]
 182:./Src/mpu6050.c **** 		tmp[i] = (tmp[i] << 8) | ((tmp[i] >> 8) & 0xFF);
 973              		.loc 1 182 26 discriminator 3
 974 00b2 7B69     		ldr	r3, [r7, #20]
 975 00b4 0133     		adds	r3, r3, #1
 976 00b6 7B61     		str	r3, [r7, #20]
 977              	.L34:
 182:./Src/mpu6050.c **** 		tmp[i] = (tmp[i] << 8) | ((tmp[i] >> 8) & 0xFF);
 978              		.loc 1 182 2 discriminator 1
 979 00b8 7B69     		ldr	r3, [r7, #20]
 980 00ba 022B     		cmp	r3, #2
 981 00bc B5DD     		ble	.L35
 982              	.LBE6:
 186:./Src/mpu6050.c **** 	}
 187:./Src/mpu6050.c **** }
 983              		.loc 1 187 1
 984 00be 00BF     		nop
 985 00c0 00BF     		nop
 986 00c2 1837     		adds	r7, r7, #24
 987              	.LCFI25:
 988              		.cfi_def_cfa_offset 8
 989 00c4 BD46     		mov	sp, r7
 990              	.LCFI26:
 991              		.cfi_def_cfa_register 13
 992              		@ sp needed
 993 00c6 80BD     		pop	{r7, pc}
 994              	.L37:
 995              		.align	2
 996              	.L36:
 997 00c8 00540040 		.word	1073763328
 998 00cc 00000000 		.word	offset
 999 00d0 00000000 		.word	accel_unit
 1000              		.cfi_endproc
 1001              	.LFE5:
 1003              		.section	.text.mpu6050_get_temperature,"ax",%progbits
 1004              		.align	1
 1005              		.global	mpu6050_get_temperature
 1006              		.syntax unified
 1007              		.thumb
 1008              		.thumb_func
 1010              	mpu6050_get_temperature:
 1011              	.LFB6:
 188:./Src/mpu6050.c **** 
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 22


 189:./Src/mpu6050.c **** /*
 190:./Src/mpu6050.c ****  * Temperature in degree C = (TEMP_OUT register value as a signed quantity) /
 191:./Src/mpu6050.c ****  * 340 + 36.53
 192:./Src/mpu6050.c ****  */
 193:./Src/mpu6050.c **** float mpu6050_get_temperature(void)
 194:./Src/mpu6050.c **** {
 1012              		.loc 1 194 1
 1013              		.cfi_startproc
 1014              		@ args = 0, pretend = 0, frame = 8
 1015              		@ frame_needed = 1, uses_anonymous_args = 0
 1016 0000 80B5     		push	{r7, lr}
 1017              	.LCFI27:
 1018              		.cfi_def_cfa_offset 8
 1019              		.cfi_offset 7, -8
 1020              		.cfi_offset 14, -4
 1021 0002 84B0     		sub	sp, sp, #16
 1022              	.LCFI28:
 1023              		.cfi_def_cfa_offset 24
 1024 0004 02AF     		add	r7, sp, #8
 1025              	.LCFI29:
 1026              		.cfi_def_cfa 7, 16
 195:./Src/mpu6050.c **** 	int16_t tmp = 0;
 1027              		.loc 1 195 10
 1028 0006 0023     		movs	r3, #0
 1029 0008 FB80     		strh	r3, [r7, #6]	@ movhi
 196:./Src/mpu6050.c **** 
 197:./Src/mpu6050.c **** 	i2c_read_reg(I2C1, MPU6050_ADDRESS, MPU6050_TEMP_OUTH, 2,
 1030              		.loc 1 197 2
 1031 000a BB1D     		adds	r3, r7, #6
 1032 000c 0093     		str	r3, [sp]
 1033 000e 0223     		movs	r3, #2
 1034 0010 4122     		movs	r2, #65
 1035 0012 6821     		movs	r1, #104
 1036 0014 1148     		ldr	r0, .L40
 1037 0016 FFF7FEFF 		bl	i2c_read_reg
 198:./Src/mpu6050.c **** 		     (uint8_t *)&tmp);
 199:./Src/mpu6050.c **** 	tmp = (tmp << 8) | ((tmp >> 8) & 0xFF);
 1038              		.loc 1 199 13
 1039 001a B7F90630 		ldrsh	r3, [r7, #6]
 1040 001e 1B02     		lsls	r3, r3, #8
 1041              		.loc 1 199 19
 1042 0020 1AB2     		sxth	r2, r3
 1043              		.loc 1 199 33
 1044 0022 B7F90630 		ldrsh	r3, [r7, #6]
 1045 0026 9BB2     		uxth	r3, r3
 1046 0028 1B0A     		lsrs	r3, r3, #8
 1047 002a 9BB2     		uxth	r3, r3
 1048 002c 1BB2     		sxth	r3, r3
 1049              		.loc 1 199 19
 1050 002e 1343     		orrs	r3, r3, r2
 1051 0030 1BB2     		sxth	r3, r3
 1052              		.loc 1 199 6
 1053 0032 FB80     		strh	r3, [r7, #6]	@ movhi
 200:./Src/mpu6050.c **** 	return (float)tmp * 0.00294117647F + 36.53F;
 1054              		.loc 1 200 9
 1055 0034 B7F90630 		ldrsh	r3, [r7, #6]
 1056 0038 07EE903A 		vmov	s15, r3	@ int
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 23


 1057 003c F8EEE77A 		vcvt.f32.s32	s15, s15
 1058              		.loc 1 200 20
 1059 0040 9FED077A 		vldr.32	s14, .L40+4
 1060 0044 67EE877A 		vmul.f32	s15, s15, s14
 1061              		.loc 1 200 37
 1062 0048 9FED067A 		vldr.32	s14, .L40+8
 1063 004c 77EE877A 		vadd.f32	s15, s15, s14
 201:./Src/mpu6050.c **** }
 1064              		.loc 1 201 1
 1065 0050 B0EE670A 		vmov.f32	s0, s15
 1066 0054 0837     		adds	r7, r7, #8
 1067              	.LCFI30:
 1068              		.cfi_def_cfa_offset 8
 1069 0056 BD46     		mov	sp, r7
 1070              	.LCFI31:
 1071              		.cfi_def_cfa_register 13
 1072              		@ sp needed
 1073 0058 80BD     		pop	{r7, pc}
 1074              	.L41:
 1075 005a 00BF     		.align	2
 1076              	.L40:
 1077 005c 00540040 		.word	1073763328
 1078 0060 C1C0403B 		.word	994099393
 1079 0064 B81E1242 		.word	1108483768
 1080              		.cfi_endproc
 1081              	.LFE6:
 1083              		.section	.text.mpu6050_get_gyro,"ax",%progbits
 1084              		.align	1
 1085              		.global	mpu6050_get_gyro
 1086              		.syntax unified
 1087              		.thumb
 1088              		.thumb_func
 1090              	mpu6050_get_gyro:
 1091              	.LFB7:
 202:./Src/mpu6050.c **** 
 203:./Src/mpu6050.c **** void mpu6050_get_gyro(float *data)
 204:./Src/mpu6050.c **** {
 1092              		.loc 1 204 1
 1093              		.cfi_startproc
 1094              		@ args = 0, pretend = 0, frame = 24
 1095              		@ frame_needed = 1, uses_anonymous_args = 0
 1096 0000 80B5     		push	{r7, lr}
 1097              	.LCFI32:
 1098              		.cfi_def_cfa_offset 8
 1099              		.cfi_offset 7, -8
 1100              		.cfi_offset 14, -4
 1101 0002 88B0     		sub	sp, sp, #32
 1102              	.LCFI33:
 1103              		.cfi_def_cfa_offset 40
 1104 0004 02AF     		add	r7, sp, #8
 1105              	.LCFI34:
 1106              		.cfi_def_cfa 7, 32
 1107 0006 7860     		str	r0, [r7, #4]
 205:./Src/mpu6050.c **** 	int16_t tmp[3] = {0};
 1108              		.loc 1 205 10
 1109 0008 07F10C03 		add	r3, r7, #12
 1110 000c 0022     		movs	r2, #0
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 24


 1111 000e 1A60     		str	r2, [r3]
 1112 0010 9A80     		strh	r2, [r3, #4]	@ movhi
 206:./Src/mpu6050.c **** 
 207:./Src/mpu6050.c **** 	i2c_read_reg(I2C1, MPU6050_ADDRESS, MPU6050_GYRO_XOUTH, 6,
 1113              		.loc 1 207 2
 1114 0012 07F10C03 		add	r3, r7, #12
 1115 0016 0093     		str	r3, [sp]
 1116 0018 0623     		movs	r3, #6
 1117 001a 4322     		movs	r2, #67
 1118 001c 6821     		movs	r1, #104
 1119 001e 2B48     		ldr	r0, .L45
 1120 0020 FFF7FEFF 		bl	i2c_read_reg
 1121              	.LBB7:
 208:./Src/mpu6050.c **** 		     (uint8_t *)&tmp);
 209:./Src/mpu6050.c **** 
 210:./Src/mpu6050.c **** 	for (int i = 0; i < 3; i++) {
 1122              		.loc 1 210 11
 1123 0024 0023     		movs	r3, #0
 1124 0026 7B61     		str	r3, [r7, #20]
 1125              		.loc 1 210 2
 1126 0028 47E0     		b	.L43
 1127              	.L44:
 211:./Src/mpu6050.c **** 		tmp[i] = (tmp[i] << 8) | ((tmp[i] >> 8) & 0xFF);
 1128              		.loc 1 211 16 discriminator 3
 1129 002a 7B69     		ldr	r3, [r7, #20]
 1130 002c 5B00     		lsls	r3, r3, #1
 1131 002e 1833     		adds	r3, r3, #24
 1132 0030 3B44     		add	r3, r3, r7
 1133 0032 33F90C3C 		ldrsh	r3, [r3, #-12]
 1134              		.loc 1 211 20 discriminator 3
 1135 0036 1B02     		lsls	r3, r3, #8
 1136              		.loc 1 211 26 discriminator 3
 1137 0038 1AB2     		sxth	r2, r3
 1138              		.loc 1 211 33 discriminator 3
 1139 003a 7B69     		ldr	r3, [r7, #20]
 1140 003c 5B00     		lsls	r3, r3, #1
 1141 003e 1833     		adds	r3, r3, #24
 1142 0040 3B44     		add	r3, r3, r7
 1143 0042 33F90C3C 		ldrsh	r3, [r3, #-12]
 1144              		.loc 1 211 43 discriminator 3
 1145 0046 9BB2     		uxth	r3, r3
 1146 0048 1B0A     		lsrs	r3, r3, #8
 1147 004a 9BB2     		uxth	r3, r3
 1148 004c 1BB2     		sxth	r3, r3
 1149              		.loc 1 211 26 discriminator 3
 1150 004e 1343     		orrs	r3, r3, r2
 1151 0050 1AB2     		sxth	r2, r3
 1152              		.loc 1 211 10 discriminator 3
 1153 0052 7B69     		ldr	r3, [r7, #20]
 1154 0054 5B00     		lsls	r3, r3, #1
 1155 0056 1833     		adds	r3, r3, #24
 1156 0058 3B44     		add	r3, r3, r7
 1157 005a 23F80C2C 		strh	r2, [r3, #-12]	@ movhi
 212:./Src/mpu6050.c **** 		tmp[i] -= offset[3 + i];
 1158              		.loc 1 212 10 discriminator 3
 1159 005e 7B69     		ldr	r3, [r7, #20]
 1160 0060 5B00     		lsls	r3, r3, #1
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 25


 1161 0062 1833     		adds	r3, r3, #24
 1162 0064 3B44     		add	r3, r3, r7
 1163 0066 33F90C3C 		ldrsh	r3, [r3, #-12]
 1164 006a 9AB2     		uxth	r2, r3
 1165              		.loc 1 212 22 discriminator 3
 1166 006c 7B69     		ldr	r3, [r7, #20]
 1167 006e 0333     		adds	r3, r3, #3
 1168              		.loc 1 212 19 discriminator 3
 1169 0070 1749     		ldr	r1, .L45+4
 1170 0072 31F91330 		ldrsh	r3, [r1, r3, lsl #1]
 1171 0076 9BB2     		uxth	r3, r3
 1172              		.loc 1 212 10 discriminator 3
 1173 0078 D31A     		subs	r3, r2, r3
 1174 007a 9BB2     		uxth	r3, r3
 1175 007c 1AB2     		sxth	r2, r3
 1176 007e 7B69     		ldr	r3, [r7, #20]
 1177 0080 5B00     		lsls	r3, r3, #1
 1178 0082 1833     		adds	r3, r3, #24
 1179 0084 3B44     		add	r3, r3, r7
 1180 0086 23F80C2C 		strh	r2, [r3, #-12]	@ movhi
 213:./Src/mpu6050.c **** 		data[i] = (float)tmp[i] * gyro_unit;
 1181              		.loc 1 213 23 discriminator 3
 1182 008a 7B69     		ldr	r3, [r7, #20]
 1183 008c 5B00     		lsls	r3, r3, #1
 1184 008e 1833     		adds	r3, r3, #24
 1185 0090 3B44     		add	r3, r3, r7
 1186 0092 33F90C3C 		ldrsh	r3, [r3, #-12]
 1187              		.loc 1 213 13 discriminator 3
 1188 0096 07EE903A 		vmov	s15, r3	@ int
 1189 009a B8EEE77A 		vcvt.f32.s32	s14, s15
 1190              		.loc 1 213 27 discriminator 3
 1191 009e 0D4B     		ldr	r3, .L45+8
 1192 00a0 D3ED007A 		vldr.32	s15, [r3]
 1193              		.loc 1 213 7 discriminator 3
 1194 00a4 7B69     		ldr	r3, [r7, #20]
 1195 00a6 9B00     		lsls	r3, r3, #2
 1196 00a8 7A68     		ldr	r2, [r7, #4]
 1197 00aa 1344     		add	r3, r3, r2
 1198              		.loc 1 213 27 discriminator 3
 1199 00ac 67EE277A 		vmul.f32	s15, s14, s15
 1200              		.loc 1 213 11 discriminator 3
 1201 00b0 C3ED007A 		vstr.32	s15, [r3]
 210:./Src/mpu6050.c **** 		tmp[i] = (tmp[i] << 8) | ((tmp[i] >> 8) & 0xFF);
 1202              		.loc 1 210 26 discriminator 3
 1203 00b4 7B69     		ldr	r3, [r7, #20]
 1204 00b6 0133     		adds	r3, r3, #1
 1205 00b8 7B61     		str	r3, [r7, #20]
 1206              	.L43:
 210:./Src/mpu6050.c **** 		tmp[i] = (tmp[i] << 8) | ((tmp[i] >> 8) & 0xFF);
 1207              		.loc 1 210 2 discriminator 1
 1208 00ba 7B69     		ldr	r3, [r7, #20]
 1209 00bc 022B     		cmp	r3, #2
 1210 00be B4DD     		ble	.L44
 1211              	.LBE7:
 214:./Src/mpu6050.c **** 	}
 215:./Src/mpu6050.c **** }
 1212              		.loc 1 215 1
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 26


 1213 00c0 00BF     		nop
 1214 00c2 00BF     		nop
 1215 00c4 1837     		adds	r7, r7, #24
 1216              	.LCFI35:
 1217              		.cfi_def_cfa_offset 8
 1218 00c6 BD46     		mov	sp, r7
 1219              	.LCFI36:
 1220              		.cfi_def_cfa_register 13
 1221              		@ sp needed
 1222 00c8 80BD     		pop	{r7, pc}
 1223              	.L46:
 1224 00ca 00BF     		.align	2
 1225              	.L45:
 1226 00cc 00540040 		.word	1073763328
 1227 00d0 00000000 		.word	offset
 1228 00d4 00000000 		.word	gyro_unit
 1229              		.cfi_endproc
 1230              	.LFE7:
 1232              		.section	.text.mpu6050_selftest,"ax",%progbits
 1233              		.align	1
 1234              		.global	mpu6050_selftest
 1235              		.syntax unified
 1236              		.thumb
 1237              		.thumb_func
 1239              	mpu6050_selftest:
 1240              	.LFB8:
 216:./Src/mpu6050.c **** 
 217:./Src/mpu6050.c **** /**
 218:./Src/mpu6050.c ****  * @brief Self-Test to get change from foctory trim of the self-test response.
 219:./Src/mpu6050.c ****  * 	  if |value| < 14, the MPU6050 keep its accuracy, else failed.
 220:./Src/mpu6050.c ****  *
 221:./Src/mpu6050.c ****  * @param err error array of gyro and accel change
 222:./Src/mpu6050.c ****  */
 223:./Src/mpu6050.c **** void mpu6050_selftest(float *err)
 224:./Src/mpu6050.c **** {
 1241              		.loc 1 224 1
 1242              		.cfi_startproc
 1243              		@ args = 0, pretend = 0, frame = 40
 1244              		@ frame_needed = 1, uses_anonymous_args = 0
 1245 0000 80B5     		push	{r7, lr}
 1246              	.LCFI37:
 1247              		.cfi_def_cfa_offset 8
 1248              		.cfi_offset 7, -8
 1249              		.cfi_offset 14, -4
 1250 0002 8CB0     		sub	sp, sp, #48
 1251              	.LCFI38:
 1252              		.cfi_def_cfa_offset 56
 1253 0004 02AF     		add	r7, sp, #8
 1254              	.LCFI39:
 1255              		.cfi_def_cfa 7, 48
 1256 0006 7860     		str	r0, [r7, #4]
 225:./Src/mpu6050.c **** 	float factory_trim = 0;
 1257              		.loc 1 225 8
 1258 0008 4FF00003 		mov	r3, #0
 1259 000c 7B62     		str	r3, [r7, #36]	@ float
 226:./Src/mpu6050.c **** 	uint8_t raw_data[4] = {0};
 1260              		.loc 1 226 10
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 27


 1261 000e 0023     		movs	r3, #0
 1262 0010 BB61     		str	r3, [r7, #24]
 227:./Src/mpu6050.c **** 	uint8_t selftest_data[6] = {0};
 1263              		.loc 1 227 10
 1264 0012 0023     		movs	r3, #0
 1265 0014 3B61     		str	r3, [r7, #16]
 1266 0016 0023     		movs	r3, #0
 1267 0018 BB82     		strh	r3, [r7, #20]	@ movhi
 228:./Src/mpu6050.c **** 	uint8_t tmp = 0xE0;
 1268              		.loc 1 228 10
 1269 001a E023     		movs	r3, #224
 1270 001c FB73     		strb	r3, [r7, #15]
 229:./Src/mpu6050.c **** 
 230:./Src/mpu6050.c **** 	// Configure the accelorometer and gyroscope self test
 231:./Src/mpu6050.c **** 	i2c_write_reg(I2C1, MPU6050_ADDRESS, MPU6050_ACCEL_CONFIG, 1, &tmp);
 1271              		.loc 1 231 2
 1272 001e 07F10F03 		add	r3, r7, #15
 1273 0022 0093     		str	r3, [sp]
 1274 0024 0123     		movs	r3, #1
 1275 0026 1C22     		movs	r2, #28
 1276 0028 6821     		movs	r1, #104
 1277 002a 8F48     		ldr	r0, .L53+24
 1278 002c FFF7FEFF 		bl	i2c_write_reg
 232:./Src/mpu6050.c **** 	i2c_write_reg(I2C1, MPU6050_ADDRESS, MPU6050_GYRO_CONFIG, 1, &tmp);
 1279              		.loc 1 232 2
 1280 0030 07F10F03 		add	r3, r7, #15
 1281 0034 0093     		str	r3, [sp]
 1282 0036 0123     		movs	r3, #1
 1283 0038 1B22     		movs	r2, #27
 1284 003a 6821     		movs	r1, #104
 1285 003c 8A48     		ldr	r0, .L53+24
 1286 003e FFF7FEFF 		bl	i2c_write_reg
 233:./Src/mpu6050.c **** 
 234:./Src/mpu6050.c **** 	systick_delay_ms(250);
 1287              		.loc 1 234 2
 1288 0042 FA20     		movs	r0, #250
 1289 0044 FFF7FEFF 		bl	systick_delay_ms
 235:./Src/mpu6050.c **** 	// Get raw data from self test register
 236:./Src/mpu6050.c **** 	i2c_read_reg(I2C1, MPU6050_ADDRESS, MPU6050_SELF_TEST_X, 4, raw_data);
 1290              		.loc 1 236 2
 1291 0048 07F11803 		add	r3, r7, #24
 1292 004c 0093     		str	r3, [sp]
 1293 004e 0423     		movs	r3, #4
 1294 0050 0D22     		movs	r2, #13
 1295 0052 6821     		movs	r1, #104
 1296 0054 8448     		ldr	r0, .L53+24
 1297 0056 FFF7FEFF 		bl	i2c_read_reg
 1298              	.LBB8:
 237:./Src/mpu6050.c **** 	// Calculate self test data
 238:./Src/mpu6050.c **** 	for (int i = 0; i < 3; i++) {
 1299              		.loc 1 238 11
 1300 005a 0023     		movs	r3, #0
 1301 005c 3B62     		str	r3, [r7, #32]
 1302              		.loc 1 238 2
 1303 005e 3BE0     		b	.L48
 1304              	.L49:
 239:./Src/mpu6050.c **** 		selftest_data[i] = (raw_data[3] >> (2 * (2 - i))) & 0x3;
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 28


 1305              		.loc 1 239 31 discriminator 3
 1306 0060 FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 1307 0062 1A46     		mov	r2, r3
 1308              		.loc 1 239 46 discriminator 3
 1309 0064 3B6A     		ldr	r3, [r7, #32]
 1310 0066 C3F10203 		rsb	r3, r3, #2
 1311              		.loc 1 239 41 discriminator 3
 1312 006a 5B00     		lsls	r3, r3, #1
 1313              		.loc 1 239 35 discriminator 3
 1314 006c 42FA03F3 		asr	r3, r2, r3
 1315              		.loc 1 239 53 discriminator 3
 1316 0070 DBB2     		uxtb	r3, r3
 1317 0072 03F00303 		and	r3, r3, #3
 1318 0076 D9B2     		uxtb	r1, r3
 1319              		.loc 1 239 20 discriminator 3
 1320 0078 07F11002 		add	r2, r7, #16
 1321 007c 3B6A     		ldr	r3, [r7, #32]
 1322 007e 1344     		add	r3, r3, r2
 1323 0080 0A46     		mov	r2, r1
 1324 0082 1A70     		strb	r2, [r3]
 240:./Src/mpu6050.c **** 		selftest_data[i] |= (raw_data[i] & 0xE0) >> 3;
 1325              		.loc 1 240 20 discriminator 3
 1326 0084 07F11002 		add	r2, r7, #16
 1327 0088 3B6A     		ldr	r3, [r7, #32]
 1328 008a 1344     		add	r3, r3, r2
 1329 008c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1330 008e 5AB2     		sxtb	r2, r3
 1331              		.loc 1 240 32 discriminator 3
 1332 0090 07F11801 		add	r1, r7, #24
 1333 0094 3B6A     		ldr	r3, [r7, #32]
 1334 0096 0B44     		add	r3, r3, r1
 1335 0098 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1336              		.loc 1 240 44 discriminator 3
 1337 009a DB10     		asrs	r3, r3, #3
 1338 009c 5BB2     		sxtb	r3, r3
 1339 009e 03F01C03 		and	r3, r3, #28
 1340 00a2 5BB2     		sxtb	r3, r3
 1341              		.loc 1 240 20 discriminator 3
 1342 00a4 1343     		orrs	r3, r3, r2
 1343 00a6 5BB2     		sxtb	r3, r3
 1344 00a8 D9B2     		uxtb	r1, r3
 1345 00aa 07F11002 		add	r2, r7, #16
 1346 00ae 3B6A     		ldr	r3, [r7, #32]
 1347 00b0 1344     		add	r3, r3, r2
 1348 00b2 0A46     		mov	r2, r1
 1349 00b4 1A70     		strb	r2, [r3]
 241:./Src/mpu6050.c **** 		selftest_data[3 + i] = raw_data[i] & 0x1F;
 1350              		.loc 1 241 34 discriminator 3
 1351 00b6 07F11802 		add	r2, r7, #24
 1352 00ba 3B6A     		ldr	r3, [r7, #32]
 1353 00bc 1344     		add	r3, r3, r2
 1354 00be 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1355              		.loc 1 241 19 discriminator 3
 1356 00c0 3B6A     		ldr	r3, [r7, #32]
 1357 00c2 0333     		adds	r3, r3, #3
 1358              		.loc 1 241 38 discriminator 3
 1359 00c4 02F01F02 		and	r2, r2, #31
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 29


 1360 00c8 D2B2     		uxtb	r2, r2
 1361              		.loc 1 241 24 discriminator 3
 1362 00ca 2833     		adds	r3, r3, #40
 1363 00cc 3B44     		add	r3, r3, r7
 1364 00ce 03F8182C 		strb	r2, [r3, #-24]
 238:./Src/mpu6050.c **** 		selftest_data[i] = (raw_data[3] >> (2 * (2 - i))) & 0x3;
 1365              		.loc 1 238 26 discriminator 3
 1366 00d2 3B6A     		ldr	r3, [r7, #32]
 1367 00d4 0133     		adds	r3, r3, #1
 1368 00d6 3B62     		str	r3, [r7, #32]
 1369              	.L48:
 238:./Src/mpu6050.c **** 		selftest_data[i] = (raw_data[3] >> (2 * (2 - i))) & 0x3;
 1370              		.loc 1 238 2 discriminator 1
 1371 00d8 3B6A     		ldr	r3, [r7, #32]
 1372 00da 022B     		cmp	r3, #2
 1373 00dc C0DD     		ble	.L49
 1374              	.LBE8:
 1375              	.LBB9:
 242:./Src/mpu6050.c **** 	}
 243:./Src/mpu6050.c **** 	// Calculate change from factory trim of the Self-Test response
 244:./Src/mpu6050.c **** 	for (int i = 0; i < 3; i++) {
 1376              		.loc 1 244 11
 1377 00de 0023     		movs	r3, #0
 1378 00e0 FB61     		str	r3, [r7, #28]
 1379              		.loc 1 244 2
 1380 00e2 97E0     		b	.L50
 1381              	.L52:
 245:./Src/mpu6050.c **** 		// accelerometer
 246:./Src/mpu6050.c **** 		factory_trim =
 247:./Src/mpu6050.c **** 			4096.0 * 0.34 *
 248:./Src/mpu6050.c **** 			powf(0.92 / 0.34, ((float)selftest_data[i] - 1) / 30.0);
 1382              		.loc 1 248 43
 1383 00e4 07F11002 		add	r2, r7, #16
 1384 00e8 FB69     		ldr	r3, [r7, #28]
 1385 00ea 1344     		add	r3, r3, r2
 1386 00ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1387              		.loc 1 248 23
 1388 00ee 07EE903A 		vmov	s15, r3	@ int
 1389 00f2 F8EE677A 		vcvt.f32.u32	s15, s15
 1390              		.loc 1 248 47
 1391 00f6 B7EE007A 		vmov.f32	s14, #1.0e+0
 1392 00fa 77EEC77A 		vsub.f32	s15, s15, s14
 1393              		.loc 1 248 4
 1394 00fe F3EE0E6A 		vmov.f32	s13, #3.0e+1
 1395 0102 87EEA67A 		vdiv.f32	s14, s15, s13
 1396 0106 F0EE470A 		vmov.f32	s1, s14
 1397 010a 9FED580A 		vldr.32	s0, .L53+28
 1398 010e FFF7FEFF 		bl	powf
 1399 0112 F0EE407A 		vmov.f32	s15, s0
 1400 0116 B7EEE77A 		vcvt.f64.f32	d7, s15
 247:./Src/mpu6050.c **** 			powf(0.92 / 0.34, ((float)selftest_data[i] - 1) / 30.0);
 1401              		.loc 1 247 18
 1402 011a 9FED4D6B 		vldr.64	d6, .L53
 1403 011e 27EE067B 		vmul.f64	d7, d7, d6
 246:./Src/mpu6050.c **** 			4096.0 * 0.34 *
 1404              		.loc 1 246 16
 1405 0122 F7EEC77B 		vcvt.f32.f64	s15, d7
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 30


 1406 0126 C7ED097A 		vstr.32	s15, [r7, #36]
 249:./Src/mpu6050.c **** 		err[i] = 100.0 +
 250:./Src/mpu6050.c **** 			 100.0 * ((float)selftest_data[i] - factory_trim) /
 1407              		.loc 1 250 34
 1408 012a 07F11002 		add	r2, r7, #16
 1409 012e FB69     		ldr	r3, [r7, #28]
 1410 0130 1344     		add	r3, r3, r2
 1411 0132 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1412              		.loc 1 250 14
 1413 0134 07EE903A 		vmov	s15, r3	@ int
 1414 0138 B8EE677A 		vcvt.f32.u32	s14, s15
 1415              		.loc 1 250 38
 1416 013c D7ED097A 		vldr.32	s15, [r7, #36]
 1417 0140 77EE677A 		vsub.f32	s15, s14, s15
 1418 0144 B7EEE77A 		vcvt.f64.f32	d7, s15
 1419              		.loc 1 250 11
 1420 0148 9FED436B 		vldr.64	d6, .L53+8
 1421 014c 27EE065B 		vmul.f64	d5, d7, d6
 1422              		.loc 1 250 54
 1423 0150 D7ED097A 		vldr.32	s15, [r7, #36]
 1424 0154 B7EEE76A 		vcvt.f64.f32	d6, s15
 1425 0158 85EE067B 		vdiv.f64	d7, d5, d6
 249:./Src/mpu6050.c **** 		err[i] = 100.0 +
 1426              		.loc 1 249 18
 1427 015c 9FED3E6B 		vldr.64	d6, .L53+8
 1428 0160 37EE067B 		vadd.f64	d7, d7, d6
 249:./Src/mpu6050.c **** 		err[i] = 100.0 +
 1429              		.loc 1 249 6
 1430 0164 FB69     		ldr	r3, [r7, #28]
 1431 0166 9B00     		lsls	r3, r3, #2
 1432 0168 7A68     		ldr	r2, [r7, #4]
 1433 016a 1344     		add	r3, r3, r2
 249:./Src/mpu6050.c **** 		err[i] = 100.0 +
 1434              		.loc 1 249 18
 1435 016c F7EEC77B 		vcvt.f32.f64	s15, d7
 249:./Src/mpu6050.c **** 		err[i] = 100.0 +
 1436              		.loc 1 249 10
 1437 0170 C3ED007A 		vstr.32	s15, [r3]
 251:./Src/mpu6050.c **** 				 factory_trim;
 252:./Src/mpu6050.c **** 		// gyro factory trim
 253:./Src/mpu6050.c **** 		factory_trim =
 254:./Src/mpu6050.c **** 			25.0 * 131.0 * powf(1.046, selftest_data[3 + i] - 1);
 1438              		.loc 1 254 47
 1439 0174 FB69     		ldr	r3, [r7, #28]
 1440 0176 0333     		adds	r3, r3, #3
 1441              		.loc 1 254 44
 1442 0178 2833     		adds	r3, r3, #40
 1443 017a 3B44     		add	r3, r3, r7
 1444 017c 13F8183C 		ldrb	r3, [r3, #-24]	@ zero_extendqisi2
 1445              		.loc 1 254 52
 1446 0180 013B     		subs	r3, r3, #1
 1447              		.loc 1 254 19
 1448 0182 07EE903A 		vmov	s15, r3	@ int
 1449 0186 F8EEE77A 		vcvt.f32.s32	s15, s15
 1450 018a F0EE670A 		vmov.f32	s1, s15
 1451 018e 9FED380A 		vldr.32	s0, .L53+32
 1452 0192 FFF7FEFF 		bl	powf
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 31


 1453 0196 F0EE407A 		vmov.f32	s15, s0
 1454 019a B7EEE77A 		vcvt.f64.f32	d7, s15
 1455              		.loc 1 254 17
 1456 019e 9FED306B 		vldr.64	d6, .L53+16
 1457 01a2 27EE067B 		vmul.f64	d7, d7, d6
 253:./Src/mpu6050.c **** 			25.0 * 131.0 * powf(1.046, selftest_data[3 + i] - 1);
 1458              		.loc 1 253 16
 1459 01a6 F7EEC77B 		vcvt.f32.f64	s15, d7
 1460 01aa C7ED097A 		vstr.32	s15, [r7, #36]
 255:./Src/mpu6050.c **** 
 256:./Src/mpu6050.c **** 		if (i == 1)
 1461              		.loc 1 256 6
 1462 01ae FB69     		ldr	r3, [r7, #28]
 1463 01b0 012B     		cmp	r3, #1
 1464 01b2 05D1     		bne	.L51
 257:./Src/mpu6050.c **** 			factory_trim *= -1;
 1465              		.loc 1 257 17
 1466 01b4 D7ED097A 		vldr.32	s15, [r7, #36]
 1467 01b8 F1EE677A 		vneg.f32	s15, s15
 1468 01bc C7ED097A 		vstr.32	s15, [r7, #36]
 1469              	.L51:
 258:./Src/mpu6050.c **** 
 259:./Src/mpu6050.c **** 		err[3 + i] =
 260:./Src/mpu6050.c **** 			100 +
 261:./Src/mpu6050.c **** 			100.0 * ((float)selftest_data[3 + i] - factory_trim) /
 1470              		.loc 1 261 36 discriminator 2
 1471 01c0 FB69     		ldr	r3, [r7, #28]
 1472 01c2 0333     		adds	r3, r3, #3
 1473              		.loc 1 261 33 discriminator 2
 1474 01c4 2833     		adds	r3, r3, #40
 1475 01c6 3B44     		add	r3, r3, r7
 1476 01c8 13F8183C 		ldrb	r3, [r3, #-24]	@ zero_extendqisi2
 1477              		.loc 1 261 13 discriminator 2
 1478 01cc 07EE903A 		vmov	s15, r3	@ int
 1479 01d0 B8EE677A 		vcvt.f32.u32	s14, s15
 1480              		.loc 1 261 41 discriminator 2
 1481 01d4 D7ED097A 		vldr.32	s15, [r7, #36]
 1482 01d8 77EE677A 		vsub.f32	s15, s14, s15
 1483 01dc B7EEE77A 		vcvt.f64.f32	d7, s15
 1484              		.loc 1 261 10 discriminator 2
 1485 01e0 9FED1D6B 		vldr.64	d6, .L53+8
 1486 01e4 27EE065B 		vmul.f64	d5, d7, d6
 1487              		.loc 1 261 57 discriminator 2
 1488 01e8 D7ED097A 		vldr.32	s15, [r7, #36]
 1489 01ec B7EEE76A 		vcvt.f64.f32	d6, s15
 1490 01f0 85EE067B 		vdiv.f64	d7, d5, d6
 260:./Src/mpu6050.c **** 			100.0 * ((float)selftest_data[3 + i] - factory_trim) /
 1491              		.loc 1 260 8 discriminator 2
 1492 01f4 9FED186B 		vldr.64	d6, .L53+8
 1493 01f8 37EE067B 		vadd.f64	d7, d7, d6
 259:./Src/mpu6050.c **** 			100 +
 1494              		.loc 1 259 9 discriminator 2
 1495 01fc FB69     		ldr	r3, [r7, #28]
 1496 01fe 0333     		adds	r3, r3, #3
 259:./Src/mpu6050.c **** 			100 +
 1497              		.loc 1 259 6 discriminator 2
 1498 0200 9B00     		lsls	r3, r3, #2
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 32


 1499 0202 7A68     		ldr	r2, [r7, #4]
 1500 0204 1344     		add	r3, r3, r2
 260:./Src/mpu6050.c **** 			100.0 * ((float)selftest_data[3 + i] - factory_trim) /
 1501              		.loc 1 260 8 discriminator 2
 1502 0206 F7EEC77B 		vcvt.f32.f64	s15, d7
 259:./Src/mpu6050.c **** 			100 +
 1503              		.loc 1 259 14 discriminator 2
 1504 020a C3ED007A 		vstr.32	s15, [r3]
 244:./Src/mpu6050.c **** 		// accelerometer
 1505              		.loc 1 244 26 discriminator 2
 1506 020e FB69     		ldr	r3, [r7, #28]
 1507 0210 0133     		adds	r3, r3, #1
 1508 0212 FB61     		str	r3, [r7, #28]
 1509              	.L50:
 244:./Src/mpu6050.c **** 		// accelerometer
 1510              		.loc 1 244 2 discriminator 1
 1511 0214 FB69     		ldr	r3, [r7, #28]
 1512 0216 022B     		cmp	r3, #2
 1513 0218 7FF764AF 		ble	.L52
 1514              	.LBE9:
 262:./Src/mpu6050.c **** 				factory_trim;
 263:./Src/mpu6050.c **** 	}
 264:./Src/mpu6050.c **** 
 265:./Src/mpu6050.c **** 	// Clear configuration of the accelorometer and gyroscope self test
 266:./Src/mpu6050.c **** 	tmp = 0;
 1515              		.loc 1 266 6
 1516 021c 0023     		movs	r3, #0
 1517 021e FB73     		strb	r3, [r7, #15]
 267:./Src/mpu6050.c **** 	i2c_write_reg(I2C1, MPU6050_ADDRESS, MPU6050_ACCEL_CONFIG, 1, &tmp);
 1518              		.loc 1 267 2
 1519 0220 07F10F03 		add	r3, r7, #15
 1520 0224 0093     		str	r3, [sp]
 1521 0226 0123     		movs	r3, #1
 1522 0228 1C22     		movs	r2, #28
 1523 022a 6821     		movs	r1, #104
 1524 022c 0E48     		ldr	r0, .L53+24
 1525 022e FFF7FEFF 		bl	i2c_write_reg
 268:./Src/mpu6050.c **** 	i2c_write_reg(I2C1, MPU6050_ADDRESS, MPU6050_GYRO_CONFIG, 1, &tmp);
 1526              		.loc 1 268 2
 1527 0232 07F10F03 		add	r3, r7, #15
 1528 0236 0093     		str	r3, [sp]
 1529 0238 0123     		movs	r3, #1
 1530 023a 1B22     		movs	r2, #27
 1531 023c 6821     		movs	r1, #104
 1532 023e 0A48     		ldr	r0, .L53+24
 1533 0240 FFF7FEFF 		bl	i2c_write_reg
 269:./Src/mpu6050.c **** }...
 1534              		.loc 1 269 1
 1535 0244 00BF     		nop
 1536 0246 2837     		adds	r7, r7, #40
 1537              	.LCFI40:
 1538              		.cfi_def_cfa_offset 8
 1539 0248 BD46     		mov	sp, r7
 1540              	.LCFI41:
 1541              		.cfi_def_cfa_register 13
 1542              		@ sp needed
 1543 024a 80BD     		pop	{r7, pc}
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 33


 1544              	.L54:
 1545 024c AFF30080 		.align	3
 1546              	.L53:
 1547 0250 C3F5285C 		.word	1546188227
 1548 0254 8FC29540 		.word	1083556495
 1549 0258 00000000 		.word	0
 1550 025c 00005940 		.word	1079574528
 1551 0260 00000000 		.word	0
 1552 0264 0096A940 		.word	1084855808
 1553 0268 00540040 		.word	1073763328
 1554 026c 2D2D2D40 		.word	1076702509
 1555 0270 54E3853F 		.word	1065739092
 1556              		.cfi_endproc
 1557              	.LFE8:
 1559              		.text
 1560              	.Letext0:
 1561              		.file 2 "e:\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_default_types.h"
 1562              		.file 3 "e:\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 1563              		.file 4 "./Inc/stm32f767zi_hal.h"
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s 			page 34


DEFINED SYMBOLS
                            *ABS*:00000000 mpu6050.c
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:19     .bss.gyro_unit:00000000 $d
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:22     .bss.gyro_unit:00000000 gyro_unit
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:25     .bss.accel_unit:00000000 $d
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:28     .bss.accel_unit:00000000 accel_unit
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:31     .bss.offset:00000000 $d
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:34     .bss.offset:00000000 offset
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:37     .text.mpu6050_power_on:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:43     .text.mpu6050_power_on:00000000 mpu6050_power_on
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:85     .text.mpu6050_power_on:00000034 $d
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:91     .text.mpu6050_default_init:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:97     .text.mpu6050_default_init:00000000 mpu6050_default_init
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:174    .text.mpu6050_default_init:00000064 $d
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:183    .text.mpu6050_init:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:189    .text.mpu6050_init:00000000 mpu6050_init
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:367    .text.mpu6050_calibration:00000000 mpu6050_calibration
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:354    .text.mpu6050_init:000000fc $d
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:362    .text.mpu6050_calibration:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:615    .text.mpu6050_calibration:00000180 $d
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:622    .text.mpu6050_get_all:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:628    .text.mpu6050_get_all:00000000 mpu6050_get_all
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:846    .text.mpu6050_get_all:00000170 $d
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:857    .text.mpu6050_get_accel:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:863    .text.mpu6050_get_accel:00000000 mpu6050_get_accel
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:997    .text.mpu6050_get_accel:000000c8 $d
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:1004   .text.mpu6050_get_temperature:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:1010   .text.mpu6050_get_temperature:00000000 mpu6050_get_temperature
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:1077   .text.mpu6050_get_temperature:0000005c $d
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:1084   .text.mpu6050_get_gyro:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:1090   .text.mpu6050_get_gyro:00000000 mpu6050_get_gyro
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:1226   .text.mpu6050_get_gyro:000000cc $d
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:1233   .text.mpu6050_selftest:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:1239   .text.mpu6050_selftest:00000000 mpu6050_selftest
C:\Users\DCS_LAB\AppData\Local\Temp\cc1VsazP.s:1547   .text.mpu6050_selftest:00000250 $d

UNDEFINED SYMBOLS
systick_delay_ms
i2c_write_reg
i2c_read_reg
powf
