ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"main.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.global	ch
  19              		.section	.bss.ch,"aw",%nobits
  22              	ch:
  23 0000 00       		.space	1
  24              		.section	.text.main,"ax",%progbits
  25              		.align	1
  26              		.global	main
  27              		.syntax unified
  28              		.thumb
  29              		.thumb_func
  31              	main:
  32              	.LFB0:
  33              		.file 1 "./Src/main.c"
   1:./Src/main.c  **** /**
   2:./Src/main.c  ****  * @file test_usart_interrupt.c
   3:./Src/main.c  ****  * @author zheyi613 (zheyi880613@gmail.com)
   4:./Src/main.c  ****  * @brief test interrupt of usart
   5:./Src/main.c  ****  * @date 2022-08-18
   6:./Src/main.c  ****  */
   7:./Src/main.c  **** 
   8:./Src/main.c  **** #include "stm32f767zi_hal.h"
   9:./Src/main.c  **** #include "stm32f767zi_gpio.h"
  10:./Src/main.c  **** #include "stm32f767zi_usart.h"
  11:./Src/main.c  **** #include "stm32f767zi_user.h"
  12:./Src/main.c  **** 
  13:./Src/main.c  **** char ch;
  14:./Src/main.c  **** 
  15:./Src/main.c  **** int main(void) {
  34              		.loc 1 15 16
  35              		.cfi_startproc
  36              		@ args = 0, pretend = 0, frame = 0
  37              		@ frame_needed = 1, uses_anonymous_args = 0
  38 0000 80B5     		push	{r7, lr}
  39              	.LCFI0:
  40              		.cfi_def_cfa_offset 8
  41              		.cfi_offset 7, -8
  42              		.cfi_offset 14, -4
  43 0002 00AF     		add	r7, sp, #0
  44              	.LCFI1:
  45              		.cfi_def_cfa_register 7
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s 			page 2


  16:./Src/main.c  ****         led_init();
  46              		.loc 1 16 9
  47 0004 FFF7FEFF 		bl	led_init
  17:./Src/main.c  ****         usart3_interrupt_default_init();
  48              		.loc 1 17 9
  49 0008 FFF7FEFF 		bl	usart3_interrupt_default_init
  50              	.L9:
  18:./Src/main.c  **** 
  19:./Src/main.c  ****         while (1) {
  20:./Src/main.c  ****                 switch (ch)
  51              		.loc 1 20 17
  52 000c 114B     		ldr	r3, .L11
  53 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  54 0010 303B     		subs	r3, r3, #48
  55 0012 032B     		cmp	r3, #3
  56 0014 1CD8     		bhi	.L10
  57 0016 01A2     		adr	r2, .L4
  58 0018 52F823F0 		ldr	pc, [r2, r3, lsl #2]
  59              		.p2align 2
  60              	.L4:
  61 001c 2D000000 		.word	.L7+1
  62 0020 37000000 		.word	.L6+1
  63 0024 3F000000 		.word	.L5+1
  64 0028 47000000 		.word	.L3+1
  65              		.p2align 1
  66              	.L7:
  21:./Src/main.c  ****                 {
  22:./Src/main.c  ****                 case '0':
  23:./Src/main.c  ****                         led_off(USER_LED1 | USER_LED2 | USER_LED3);
  67              		.loc 1 23 25
  68 002c 44F28100 		movw	r0, #16513
  69 0030 FFF7FEFF 		bl	led_off
  24:./Src/main.c  ****                         break;
  70              		.loc 1 24 25
  71 0034 0DE0     		b	.L8
  72              	.L6:
  25:./Src/main.c  ****                 case '1':
  26:./Src/main.c  ****                         led_on(USER_LED1);
  73              		.loc 1 26 25
  74 0036 0120     		movs	r0, #1
  75 0038 FFF7FEFF 		bl	led_on
  27:./Src/main.c  ****                         break;
  76              		.loc 1 27 25
  77 003c 09E0     		b	.L8
  78              	.L5:
  28:./Src/main.c  ****                 case '2':
  29:./Src/main.c  ****                         led_on(USER_LED2);
  79              		.loc 1 29 25
  80 003e 8020     		movs	r0, #128
  81 0040 FFF7FEFF 		bl	led_on
  30:./Src/main.c  ****                         break;
  82              		.loc 1 30 25
  83 0044 05E0     		b	.L8
  84              	.L3:
  31:./Src/main.c  ****                 case '3':
  32:./Src/main.c  ****                         led_on(USER_LED3);
  85              		.loc 1 32 25
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s 			page 3


  86 0046 4FF48040 		mov	r0, #16384
  87 004a FFF7FEFF 		bl	led_on
  33:./Src/main.c  ****                         break;
  88              		.loc 1 33 25
  89 004e 00E0     		b	.L8
  90              	.L10:
  34:./Src/main.c  ****                 default:
  35:./Src/main.c  ****                         break;
  91              		.loc 1 35 25
  92 0050 00BF     		nop
  93              	.L8:
  20:./Src/main.c  ****                 {
  94              		.loc 1 20 17
  95 0052 DBE7     		b	.L9
  96              	.L12:
  97              		.align	2
  98              	.L11:
  99 0054 00000000 		.word	ch
 100              		.cfi_endproc
 101              	.LFE0:
 103              		.section	.text.USART3_IRQHandler,"ax",%progbits
 104              		.align	1
 105              		.global	USART3_IRQHandler
 106              		.syntax unified
 107              		.thumb
 108              		.thumb_func
 110              	USART3_IRQHandler:
 111              	.LFB1:
  36:./Src/main.c  ****                 }
  37:./Src/main.c  ****         }
  38:./Src/main.c  **** 
  39:./Src/main.c  ****         return 0;
  40:./Src/main.c  **** }
  41:./Src/main.c  **** 
  42:./Src/main.c  **** void USART3_IRQHandler(void)
  43:./Src/main.c  **** {
 112              		.loc 1 43 1
 113              		.cfi_startproc
 114              		@ args = 0, pretend = 0, frame = 0
 115              		@ frame_needed = 1, uses_anonymous_args = 0
 116              		@ link register save eliminated.
 117 0000 80B4     		push	{r7}
 118              	.LCFI2:
 119              		.cfi_def_cfa_offset 4
 120              		.cfi_offset 7, -4
 121 0002 00AF     		add	r7, sp, #0
 122              	.LCFI3:
 123              		.cfi_def_cfa_register 7
  44:./Src/main.c  ****         if ((USART3->ISR & USART_ISR_TXE) == USART_ISR_TXE)
 124              		.loc 1 44 20
 125 0004 0C4B     		ldr	r3, .L17
 126 0006 DB69     		ldr	r3, [r3, #28]
 127              		.loc 1 44 26
 128 0008 03F08003 		and	r3, r3, #128
 129              		.loc 1 44 12
 130 000c 802B     		cmp	r3, #128
 131 000e 02D1     		bne	.L14
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s 			page 4


  45:./Src/main.c  ****         {
  46:./Src/main.c  ****                 // transmit a ASCII code
  47:./Src/main.c  ****                 USART3->TDR = 'R';
 132              		.loc 1 47 23
 133 0010 094B     		ldr	r3, .L17
 134              		.loc 1 47 29
 135 0012 5222     		movs	r2, #82
 136 0014 9A62     		str	r2, [r3, #40]
 137              	.L14:
  48:./Src/main.c  ****         }
  49:./Src/main.c  ****         if ((USART3->ISR & USART_ISR_RXNE) == USART_ISR_RXNE)
 138              		.loc 1 49 20
 139 0016 084B     		ldr	r3, .L17
 140 0018 DB69     		ldr	r3, [r3, #28]
 141              		.loc 1 49 26
 142 001a 03F02003 		and	r3, r3, #32
 143              		.loc 1 49 12
 144 001e 202B     		cmp	r3, #32
 145 0020 04D1     		bne	.L16
  50:./Src/main.c  ****         {
  51:./Src/main.c  ****                 // receive a ASCII code
  52:./Src/main.c  ****                 ch = USART3->RDR & 0xFFU;
 146              		.loc 1 52 28
 147 0022 054B     		ldr	r3, .L17
 148 0024 5B6A     		ldr	r3, [r3, #36]
 149              		.loc 1 52 20
 150 0026 DAB2     		uxtb	r2, r3
 151 0028 044B     		ldr	r3, .L17+4
 152 002a 1A70     		strb	r2, [r3]
 153              	.L16:
  53:./Src/main.c  ****         }
  54:./Src/main.c  **** }...
 154              		.loc 1 54 1
 155 002c 00BF     		nop
 156 002e BD46     		mov	sp, r7
 157              	.LCFI4:
 158              		.cfi_def_cfa_register 13
 159              		@ sp needed
 160 0030 5DF8047B 		ldr	r7, [sp], #4
 161              	.LCFI5:
 162              		.cfi_restore 7
 163              		.cfi_def_cfa_offset 0
 164 0034 7047     		bx	lr
 165              	.L18:
 166 0036 00BF     		.align	2
 167              	.L17:
 168 0038 00480040 		.word	1073760256
 169 003c 00000000 		.word	ch
 170              		.cfi_endproc
 171              	.LFE1:
 173              		.text
 174              	.Letext0:
 175              		.file 2 "e:\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_default_types.h"
 176              		.file 3 "e:\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 177              		.file 4 "./Inc/stm32f767zi_hal.h"
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s 			page 5


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s:22     .bss.ch:00000000 ch
C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s:23     .bss.ch:00000000 $d
C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s:25     .text.main:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s:31     .text.main:00000000 main
C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s:61     .text.main:0000001c $d
C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s:65     .text.main:0000002c $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s:99     .text.main:00000054 $d
C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s:104    .text.USART3_IRQHandler:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s:110    .text.USART3_IRQHandler:00000000 USART3_IRQHandler
C:\Users\DCS_LAB\AppData\Local\Temp\ccshlg19.s:168    .text.USART3_IRQHandler:00000038 $d

UNDEFINED SYMBOLS
led_init
usart3_interrupt_default_init
led_off
led_on
