ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"main.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.global	flag_get
  19              		.section	.bss.flag_get,"aw",%nobits
  22              	flag_get:
  23 0000 00       		.space	1
  24              		.section	.rodata
  25              		.align	2
  26              	.LC0:
  27 0000 4368616E 		.ascii	"Change from Factory Trim:\015\000"
  27      67652066 
  27      726F6D20 
  27      46616374 
  27      6F727920 
  28 001b 00       		.align	2
  29              	.LC1:
  30 001c 252E3266 		.ascii	"%.2f, \000"
  30      2C2000
  31 0023 00       		.align	2
  32              	.LC2:
  33 0024 0D00     		.ascii	"\015\000"
  34 0026 0000     		.align	2
  35              	.LC3:
  36 0028 252E3266 		.ascii	"%.2f %.3f \000"
  36      20252E33 
  36      662000
  37              		.section	.text.main,"ax",%progbits
  38              		.align	1
  39              		.global	main
  40              		.syntax unified
  41              		.thumb
  42              		.thumb_func
  44              	main:
  45              	.LFB3:
  46              		.file 1 "./Src/main.c"
   1:./Src/main.c  **** /**
   2:./Src/main.c  ****  * @file test_mpu6050.c
   3:./Src/main.c  ****  * @author zheyi613 (zheyi880613@gmail.com)
   4:./Src/main.c  ****  * @brief test i2c for mpu6050
   5:./Src/main.c  ****  * @date 2022-08-26
   6:./Src/main.c  ****  */
   7:./Src/main.c  **** 
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s 			page 2


   8:./Src/main.c  **** #include "mpu6050.h"
   9:./Src/main.c  **** #include "stm32f767zi_gpio.h"
  10:./Src/main.c  **** #include "stm32f767zi_hal.h"
  11:./Src/main.c  **** #include "stm32f767zi_i2c.h"
  12:./Src/main.c  **** #include "stm32f767zi_systick.h"
  13:./Src/main.c  **** #include "stm32f767zi_timer.h"
  14:./Src/main.c  **** #include "stm32f767zi_usart.h"
  15:./Src/main.c  **** #include <stdbool.h>
  16:./Src/main.c  **** #include <stdio.h>
  17:./Src/main.c  **** 
  18:./Src/main.c  **** bool flag_get = false;
  19:./Src/main.c  **** 
  20:./Src/main.c  **** int main(void)
  21:./Src/main.c  **** {
  47              		.loc 1 21 1
  48              		.cfi_startproc
  49              		@ args = 0, pretend = 0, frame = 96
  50              		@ frame_needed = 1, uses_anonymous_args = 0
  51 0000 80B5     		push	{r7, lr}
  52              	.LCFI0:
  53              		.cfi_def_cfa_offset 8
  54              		.cfi_offset 7, -8
  55              		.cfi_offset 14, -4
  56 0002 9AB0     		sub	sp, sp, #104
  57              	.LCFI1:
  58              		.cfi_def_cfa_offset 112
  59 0004 02AF     		add	r7, sp, #8
  60              	.LCFI2:
  61              		.cfi_def_cfa 7, 104
  22:./Src/main.c  **** 	float get[7] = {0};
  62              		.loc 1 22 8
  63 0006 07F13C03 		add	r3, r7, #60
  64 000a 0022     		movs	r2, #0
  65 000c 1A60     		str	r2, [r3]
  66 000e 5A60     		str	r2, [r3, #4]
  67 0010 9A60     		str	r2, [r3, #8]
  68 0012 DA60     		str	r2, [r3, #12]
  69 0014 1A61     		str	r2, [r3, #16]
  70 0016 5A61     		str	r2, [r3, #20]
  71 0018 9A61     		str	r2, [r3, #24]
  23:./Src/main.c  **** 	float err[6] = {0};
  72              		.loc 1 23 8
  73 001a 07F12403 		add	r3, r7, #36
  74 001e 0022     		movs	r2, #0
  75 0020 1A60     		str	r2, [r3]
  76 0022 5A60     		str	r2, [r3, #4]
  77 0024 9A60     		str	r2, [r3, #8]
  78 0026 DA60     		str	r2, [r3, #12]
  79 0028 1A61     		str	r2, [r3, #16]
  80 002a 5A61     		str	r2, [r3, #20]
  24:./Src/main.c  **** 	float state[3][2] = {0};
  81              		.loc 1 24 8
  82 002c 07F10C03 		add	r3, r7, #12
  83 0030 0022     		movs	r2, #0
  84 0032 1A60     		str	r2, [r3]
  85 0034 5A60     		str	r2, [r3, #4]
  86 0036 9A60     		str	r2, [r3, #8]
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s 			page 3


  87 0038 DA60     		str	r2, [r3, #12]
  88 003a 1A61     		str	r2, [r3, #16]
  89 003c 5A61     		str	r2, [r3, #20]
  25:./Src/main.c  **** 	float angle[3] = {0};
  90              		.loc 1 25 8
  91 003e 3B46     		mov	r3, r7
  92 0040 0022     		movs	r2, #0
  93 0042 1A60     		str	r2, [r3]
  94 0044 5A60     		str	r2, [r3, #4]
  95 0046 9A60     		str	r2, [r3, #8]
  26:./Src/main.c  **** 
  27:./Src/main.c  **** 	fpu_enable();
  96              		.loc 1 27 2
  97 0048 3D4B     		ldr	r3, .L8
  98 004a 4FF47002 		mov	r2, #15728640
  99 004e 1A60     		str	r2, [r3]
  28:./Src/main.c  **** 	usart3_default_init();
 100              		.loc 1 28 2
 101 0050 FFF7FEFF 		bl	usart3_default_init
  29:./Src/main.c  **** 	i2c1_master_default_init();
 102              		.loc 1 29 2
 103 0054 FFF7FEFF 		bl	i2c1_master_default_init
  30:./Src/main.c  **** 	tim1_interrupt_init(100);
 104              		.loc 1 30 2
 105 0058 6420     		movs	r0, #100
 106 005a FFF7FEFF 		bl	tim1_interrupt_init
  31:./Src/main.c  **** 	mpu6050_power_on();
 107              		.loc 1 31 2
 108 005e FFF7FEFF 		bl	mpu6050_power_on
  32:./Src/main.c  **** 
  33:./Src/main.c  **** 	mpu6050_selftest(err);
 109              		.loc 1 33 2
 110 0062 07F12403 		add	r3, r7, #36
 111 0066 1846     		mov	r0, r3
 112 0068 FFF7FEFF 		bl	mpu6050_selftest
  34:./Src/main.c  **** 	printf("Change from Factory Trim:\r\n");
 113              		.loc 1 34 2
 114 006c 3548     		ldr	r0, .L8+4
 115 006e FFF7FEFF 		bl	puts
 116              	.LBB2:
  35:./Src/main.c  **** 
  36:./Src/main.c  **** 	for (int i = 0; i < 6; i++) {
 117              		.loc 1 36 11
 118 0072 0023     		movs	r3, #0
 119 0074 FB65     		str	r3, [r7, #92]
 120              		.loc 1 36 2
 121 0076 10E0     		b	.L2
 122              	.L3:
  37:./Src/main.c  **** 		printf("%.2f, ", err[i]);
 123              		.loc 1 37 23 discriminator 3
 124 0078 FB6D     		ldr	r3, [r7, #92]
 125 007a 9B00     		lsls	r3, r3, #2
 126 007c 6033     		adds	r3, r3, #96
 127 007e 3B44     		add	r3, r3, r7
 128 0080 3C3B     		subs	r3, r3, #60
 129 0082 D3ED007A 		vldr.32	s15, [r3]
 130              		.loc 1 37 3 discriminator 3
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s 			page 4


 131 0086 B7EEE77A 		vcvt.f64.f32	d7, s15
 132 008a 53EC172B 		vmov	r2, r3, d7
 133 008e 2E48     		ldr	r0, .L8+8
 134 0090 FFF7FEFF 		bl	printf
  36:./Src/main.c  **** 		printf("%.2f, ", err[i]);
 135              		.loc 1 36 26 discriminator 3
 136 0094 FB6D     		ldr	r3, [r7, #92]
 137 0096 0133     		adds	r3, r3, #1
 138 0098 FB65     		str	r3, [r7, #92]
 139              	.L2:
  36:./Src/main.c  **** 		printf("%.2f, ", err[i]);
 140              		.loc 1 36 2 discriminator 1
 141 009a FB6D     		ldr	r3, [r7, #92]
 142 009c 052B     		cmp	r3, #5
 143 009e EBDD     		ble	.L3
 144              	.LBE2:
  38:./Src/main.c  **** 	}
  39:./Src/main.c  **** 
  40:./Src/main.c  **** 	printf("\r\n");
 145              		.loc 1 40 2
 146 00a0 2A48     		ldr	r0, .L8+12
 147 00a2 FFF7FEFF 		bl	puts
  41:./Src/main.c  **** 	mpu6050_init(100, 2, 250);
 148              		.loc 1 41 2
 149 00a6 FA22     		movs	r2, #250
 150 00a8 0221     		movs	r1, #2
 151 00aa 6420     		movs	r0, #100
 152 00ac FFF7FEFF 		bl	mpu6050_init
  42:./Src/main.c  **** 	tim1_interrupt_init(100);
 153              		.loc 1 42 2
 154 00b0 6420     		movs	r0, #100
 155 00b2 FFF7FEFF 		bl	tim1_interrupt_init
 156              	.L7:
  43:./Src/main.c  **** 
  44:./Src/main.c  **** 	while (1) {
  45:./Src/main.c  **** 		if (flag_get) {
 157              		.loc 1 45 7
 158 00b6 264B     		ldr	r3, .L8+16
 159 00b8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 160              		.loc 1 45 6
 161 00ba 002B     		cmp	r3, #0
 162 00bc FBD0     		beq	.L7
  46:./Src/main.c  **** 			mpu6050_get_all(get);
 163              		.loc 1 46 4
 164 00be 07F13C03 		add	r3, r7, #60
 165 00c2 1846     		mov	r0, r3
 166 00c4 FFF7FEFF 		bl	mpu6050_get_all
  47:./Src/main.c  **** 			mpu6050_static_attitude(get, angle);
 167              		.loc 1 47 4
 168 00c8 3A46     		mov	r2, r7
 169 00ca 07F13C03 		add	r3, r7, #60
 170 00ce 1146     		mov	r1, r2
 171 00d0 1846     		mov	r0, r3
 172 00d2 FFF7FEFF 		bl	mpu6050_static_attitude
  48:./Src/main.c  **** 			mpu6050_kalman(state, angle, &get[4], 0.01);
 173              		.loc 1 48 4
 174 00d6 07F13C03 		add	r3, r7, #60
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s 			page 5


 175 00da 03F11002 		add	r2, r3, #16
 176 00de 3946     		mov	r1, r7
 177 00e0 07F10C03 		add	r3, r7, #12
 178 00e4 9FED1B0A 		vldr.32	s0, .L8+20
 179 00e8 1846     		mov	r0, r3
 180 00ea FFF7FEFF 		bl	mpu6050_kalman
 181              	.LBB3:
  49:./Src/main.c  **** 
  50:./Src/main.c  **** 			for (int i = 0; i < 3; i++) {
 182              		.loc 1 50 13
 183 00ee 0023     		movs	r3, #0
 184 00f0 BB65     		str	r3, [r7, #88]
 185              		.loc 1 50 4
 186 00f2 1BE0     		b	.L5
 187              	.L6:
  51:./Src/main.c  **** 				printf("%.2f %.3f ", state[i][0], state[i][1]);
 188              		.loc 1 51 34 discriminator 3
 189 00f4 BB6D     		ldr	r3, [r7, #88]
 190 00f6 DB00     		lsls	r3, r3, #3
 191 00f8 6033     		adds	r3, r3, #96
 192 00fa 3B44     		add	r3, r3, r7
 193 00fc 543B     		subs	r3, r3, #84
 194 00fe D3ED007A 		vldr.32	s15, [r3]
 195              		.loc 1 51 5 discriminator 3
 196 0102 B7EEE76A 		vcvt.f64.f32	d6, s15
 197              		.loc 1 51 47 discriminator 3
 198 0106 BB6D     		ldr	r3, [r7, #88]
 199 0108 DB00     		lsls	r3, r3, #3
 200 010a 6033     		adds	r3, r3, #96
 201 010c 3B44     		add	r3, r3, r7
 202 010e 503B     		subs	r3, r3, #80
 203 0110 D3ED007A 		vldr.32	s15, [r3]
 204              		.loc 1 51 5 discriminator 3
 205 0114 B7EEE77A 		vcvt.f64.f32	d7, s15
 206 0118 8DED007B 		vstr.64	d7, [sp]
 207 011c 53EC162B 		vmov	r2, r3, d6
 208 0120 0D48     		ldr	r0, .L8+24
 209 0122 FFF7FEFF 		bl	printf
  50:./Src/main.c  **** 				printf("%.2f %.3f ", state[i][0], state[i][1]);
 210              		.loc 1 50 28 discriminator 3
 211 0126 BB6D     		ldr	r3, [r7, #88]
 212 0128 0133     		adds	r3, r3, #1
 213 012a BB65     		str	r3, [r7, #88]
 214              	.L5:
  50:./Src/main.c  **** 				printf("%.2f %.3f ", state[i][0], state[i][1]);
 215              		.loc 1 50 4 discriminator 1
 216 012c BB6D     		ldr	r3, [r7, #88]
 217 012e 022B     		cmp	r3, #2
 218 0130 E0DD     		ble	.L6
 219              	.LBE3:
  52:./Src/main.c  **** 			}
  53:./Src/main.c  **** 
  54:./Src/main.c  **** 			printf("\r\n");
 220              		.loc 1 54 4
 221 0132 0648     		ldr	r0, .L8+12
 222 0134 FFF7FEFF 		bl	puts
  55:./Src/main.c  **** 			flag_get = false;
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s 			page 6


 223              		.loc 1 55 13
 224 0138 054B     		ldr	r3, .L8+16
 225 013a 0022     		movs	r2, #0
 226 013c 1A70     		strb	r2, [r3]
  45:./Src/main.c  **** 			mpu6050_get_all(get);
 227              		.loc 1 45 6
 228 013e BAE7     		b	.L7
 229              	.L9:
 230              		.align	2
 231              	.L8:
 232 0140 88ED00E0 		.word	-536810104
 233 0144 00000000 		.word	.LC0
 234 0148 1C000000 		.word	.LC1
 235 014c 24000000 		.word	.LC2
 236 0150 00000000 		.word	flag_get
 237 0154 0AD7233C 		.word	1008981770
 238 0158 28000000 		.word	.LC3
 239              		.cfi_endproc
 240              	.LFE3:
 242              		.section	.text.TIM1_UP_TIM10_IRQHandler,"ax",%progbits
 243              		.align	1
 244              		.global	TIM1_UP_TIM10_IRQHandler
 245              		.syntax unified
 246              		.thumb
 247              		.thumb_func
 249              	TIM1_UP_TIM10_IRQHandler:
 250              	.LFB4:
  56:./Src/main.c  **** 		}
  57:./Src/main.c  **** 	}
  58:./Src/main.c  **** 
  59:./Src/main.c  **** 	return 0;
  60:./Src/main.c  **** }
  61:./Src/main.c  **** 
  62:./Src/main.c  **** void TIM1_UP_TIM10_IRQHandler(void)
  63:./Src/main.c  **** {
 251              		.loc 1 63 1
 252              		.cfi_startproc
 253              		@ args = 0, pretend = 0, frame = 0
 254              		@ frame_needed = 1, uses_anonymous_args = 0
 255              		@ link register save eliminated.
 256 0000 80B4     		push	{r7}
 257              	.LCFI3:
 258              		.cfi_def_cfa_offset 4
 259              		.cfi_offset 7, -4
 260 0002 00AF     		add	r7, sp, #0
 261              	.LCFI4:
 262              		.cfi_def_cfa_register 7
  64:./Src/main.c  **** 	// Check whether update interrupt is pending
  65:./Src/main.c  **** 	if ((TIM1->SR & TIM_SR_UIF) != 0) {
 263              		.loc 1 65 11
 264 0004 094B     		ldr	r3, .L13
 265 0006 1B69     		ldr	r3, [r3, #16]
 266              		.loc 1 65 16
 267 0008 03F00103 		and	r3, r3, #1
 268              		.loc 1 65 5
 269 000c 002B     		cmp	r3, #0
 270 000e 08D0     		beq	.L12
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s 			page 7


  66:./Src/main.c  **** 		// Clear the update interrupt flag
  67:./Src/main.c  **** 		TIM1->SR &= ~TIM_SR_UIF;
 271              		.loc 1 67 12
 272 0010 064B     		ldr	r3, .L13
 273 0012 1B69     		ldr	r3, [r3, #16]
 274 0014 054A     		ldr	r2, .L13
 275 0016 23F00103 		bic	r3, r3, #1
 276 001a 1361     		str	r3, [r2, #16]
  68:./Src/main.c  **** 		// enable get data flag
  69:./Src/main.c  **** 		flag_get = true;
 277              		.loc 1 69 12
 278 001c 044B     		ldr	r3, .L13+4
 279 001e 0122     		movs	r2, #1
 280 0020 1A70     		strb	r2, [r3]
 281              	.L12:
  70:./Src/main.c  **** 	}
  71:./Src/main.c  **** }...
 282              		.loc 1 71 1
 283 0022 00BF     		nop
 284 0024 BD46     		mov	sp, r7
 285              	.LCFI5:
 286              		.cfi_def_cfa_register 13
 287              		@ sp needed
 288 0026 5DF8047B 		ldr	r7, [sp], #4
 289              	.LCFI6:
 290              		.cfi_restore 7
 291              		.cfi_def_cfa_offset 0
 292 002a 7047     		bx	lr
 293              	.L14:
 294              		.align	2
 295              	.L13:
 296 002c 00000140 		.word	1073807360
 297 0030 00000000 		.word	flag_get
 298              		.cfi_endproc
 299              	.LFE4:
 301              		.text
 302              	.Letext0:
 303              		.file 2 "e:\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\machine\\_default_types.h"
 304              		.file 3 "e:\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 305              		.file 4 "./Inc/stm32f767zi_hal.h"
ARM GAS  C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s:22     .bss.flag_get:00000000 flag_get
C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s:23     .bss.flag_get:00000000 $d
C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s:25     .rodata:00000000 $d
C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s:38     .text.main:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s:44     .text.main:00000000 main
C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s:232    .text.main:00000140 $d
C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s:243    .text.TIM1_UP_TIM10_IRQHandler:00000000 $t
C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s:249    .text.TIM1_UP_TIM10_IRQHandler:00000000 TIM1_UP_TIM10_IRQHandler
C:\Users\DCS_LAB\AppData\Local\Temp\ccEhIEfh.s:296    .text.TIM1_UP_TIM10_IRQHandler:0000002c $d

UNDEFINED SYMBOLS
usart3_default_init
i2c1_master_default_init
tim1_interrupt_init
mpu6050_power_on
mpu6050_selftest
puts
printf
mpu6050_init
mpu6050_get_all
mpu6050_static_attitude
mpu6050_kalman
